
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Enigma Bridge API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;json&quot;,&quot;java&quot;,&quot;javascript&quot;,&quot;python&quot;,&quot;shell&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo.png" class="logo" alt="Logo" />
        <div class="lang-selector">
              <a href="#" data-language-name="json">RESTful</a>
              <a href="#" data-language-name="java">Java</a>
              <a href="#" data-language-name="javascript">Javascript</a>
              <a href="#" data-language-name="python">Python</a>
              <a href="#" data-language-name="shell">cURL</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc" class="toc-list-h1">
          <li>
            <a href="#introduction" class="toc-h1 toc-link" data-title="Introduction">Introduction</a>
          </li>
          <li>
            <a href="#basics" class="toc-h1 toc-link" data-title="Basics">Basics</a>
          </li>
          <li>
            <a href="#getting-started" class="toc-h1 toc-link" data-title="Getting Started">Getting Started</a>
          </li>
          <li>
            <a href="#register-as-enigma-client" class="toc-h1 toc-link" data-title="Register as Enigma Client">Register as Enigma Client</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#automation" class="toc-h2 toc-link" data-title="Register as Enigma Client">Automation</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#get-api-key" class="toc-h1 toc-link" data-title="Get API Key">Get API Key</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#automation-2" class="toc-h2 toc-link" data-title="Get API Key">Automation</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#use" class="toc-h1 toc-link" data-title="Use">Use</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#processdata" class="toc-h2 toc-link" data-title="Use">ProcessData</a>
                  </li>
                  <li>
                    <a href="#create-user-object" class="toc-h2 toc-link" data-title="Use">Create User Object</a>
                  </li>
                  <li>
                    <a href="#create-user-object-rsa" class="toc-h2 toc-link" data-title="Use">Create User Object - RSA</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#errors" class="toc-h1 toc-link" data-title="Errors">Errors</a>
          </li>
          <li>
            <a href="#nbsp" class="toc-h1 toc-link" data-title=" "> </a>
          </li>
          <li>
            <a href="#nbsp-extended-apis-nbsp" class="toc-h1 toc-link" data-title="--- --- Extended APIs --- ---">--- --- Extended APIs --- ---</a>
          </li>
          <li>
            <a href="#enrolment-overview" class="toc-h1 toc-link" data-title="Enrolment Overview">Enrolment Overview</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#data-flow" class="toc-h2 toc-link" data-title="Enrolment Overview">Data Flow</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#client-endpoint-restful-api" class="toc-h1 toc-link" data-title="Client Endpoint - RESTful API">Client Endpoint - RESTful API</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#get-client-authentication" class="toc-h2 toc-link" data-title="Client Endpoint - RESTful API">Get Client Authentication</a>
                  </li>
                  <li>
                    <a href="#init-client-authentication" class="toc-h2 toc-link" data-title="Client Endpoint - RESTful API">Init Client Authentication</a>
                  </li>
                  <li>
                    <a href="#register-client" class="toc-h2 toc-link" data-title="Client Endpoint - RESTful API">Register Client</a>
                  </li>
                  <li>
                    <a href="#add-api-to-client" class="toc-h2 toc-link" data-title="Client Endpoint - RESTful API">Add API to Client</a>
                  </li>
                  <li>
                    <a href="#view-api-of-client" class="toc-h2 toc-link" data-title="Client Endpoint - RESTful API">View API of Client</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#apikey-endpoint-restful-api" class="toc-h1 toc-link" data-title="APIkey Endpoint - RESTful API">APIkey Endpoint - RESTful API</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#client-ip-address" class="toc-h2 toc-link" data-title="APIkey Endpoint - RESTful API">Client IP Address</a>
                  </li>
                  <li>
                    <a href="#list-operations" class="toc-h2 toc-link" data-title="APIkey Endpoint - RESTful API">List Operations</a>
                  </li>
                  <li>
                    <a href="#enrol-for-dns-domain" class="toc-h2 toc-link" data-title="APIkey Endpoint - RESTful API">Enrol for DNS Domain</a>
                  </li>
                  <li>
                    <a href="#get-challenge" class="toc-h2 toc-link" data-title="APIkey Endpoint - RESTful API">Get Challenge</a>
                  </li>
                  <li>
                    <a href="#update-domain" class="toc-h2 toc-link" data-title="APIkey Endpoint - RESTful API">Update Domain</a>
                  </li>
                  <li>
                    <a href="#install-status" class="toc-h2 toc-link" data-title="APIkey Endpoint - RESTful API">Install Status</a>
                  </li>
                  <li>
                    <a href="#unlock-domain" class="toc-h2 toc-link" data-title="APIkey Endpoint - RESTful API">Unlock Domain</a>
                  </li>
                  <li>
                    <a href="#send-log-data" class="toc-h2 toc-link" data-title="APIkey Endpoint - RESTful API">Send Log Data</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#authorizations-restful-api" class="toc-h1 toc-link" data-title="Authorizations - RESTful API">Authorizations - RESTful API</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#authorize-create" class="toc-h2 toc-link" data-title="Authorizations - RESTful API">Authorize Create</a>
                  </li>
                  <li>
                    <a href="#submit-new-object" class="toc-h2 toc-link" data-title="Authorizations - RESTful API">Submit new Object</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#nbsp" class="toc-h1 toc-link" data-title=" "> </a>
          </li>
          <li>
            <a href="#nbsp-keychest-api-nbsp" class="toc-h1 toc-link" data-title="--- --- KeyChest API --- ---">--- --- KeyChest API --- ---</a>
          </li>
          <li>
            <a href="#keychest" class="toc-h1 toc-link" data-title="KeyChest">KeyChest</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#register-check-api-key-get" class="toc-h2 toc-link" data-title="KeyChest">Register/check API key - GET</a>
                  </li>
                  <li>
                    <a href="#register-check-api-key-post" class="toc-h2 toc-link" data-title="KeyChest">Register/check API key - POST</a>
                  </li>
                  <li>
                    <a href="#add-domain-name" class="toc-h2 toc-link" data-title="KeyChest">Add domain name</a>
                  </li>
                  <li>
                    <a href="#check-certificate-expiration" class="toc-h2 toc-link" data-title="KeyChest">Check certificate expiration</a>
                  </li>
              </ul>
          </li>
      </div>
        <ul class="toc-footer">
            <li><a href='https://enigmabridge.freshdesk.com'>Ask a question, raise a support ticket</a></li>
            <li><a href='https://enigmabridge.com'>Visit our main website</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='introduction'>Introduction</h1>
<p><strong>Last update: 29 September</strong></p>

<blockquote>
<p>This column shows examples of API functions, or details that are language specific. Use the tab names above to switch to the language / syntax you are interested in.</p>
</blockquote>

<p>Welcome to Enigma Bridge API documentation and congratulations on taking steps to properly secure your systems from cyberattacks.</p>

<p>Enigma Bridge provides managed hardware encryption for a variety of applications. Our service is built on top of our game-changing encryption system fir secure hardware processors. This design ensures that your secrets can’t be extracted using any logical nor physical attacks. This protection of your data is provided by processors validated according to the FIPS 140-2 standard on <strong>Level 3</strong>. The <strong>Level 3</strong> means that the hardware device will erase secrets it stores when it detects an attack.</p>

<p>Side-channel, and logical attacks are also significantly limited. Assurance of this protection is provided by Common Criteria certifications on EAL5 (<a href="https://en.wikipedia.org/wiki/Evaluation_Assurance_Level#EAL5:_Semiformally_Designed_and_Tested">EAL5 explained on Wikipedia</a>).</p>

<p>You can use our API to access Enigma Bridge encryption service directly or transparently via production integrations. The set of operations available via the API includes:</p>

<ul>
<li><strong>encryption</strong> - just encrypt, MAC, sign, ...;</li>
<li><strong>re-encryption</strong> - atomic re-encryption from transport (data in transit) to storage (data at rest) keys;</li>
<li><strong>key management</strong> - generate, unwrap, manage keys; </li>
<li><strong>payment systems</strong> - re-encryption between transport and database keys, tokenization;</li>
<li><strong>cloud migration</strong> - use any subset of supported operations or one of our services built on top of the Enigma Bridge platform;</li>
<li><strong>user authentication</strong> - create user context, verify passwords and one-time passwords, reset passwords; or</li>
<li><strong>random data generation</strong> - using FIPS140-2 certified generators.</li>
</ul>

<p>The native API is REST web-service. We also provide language bindings for simple integration. We currently support Javascript (client and node.js), Python and Java. This site provides a description of API functions, including code examples in the dark area to the right. Tabs in the top right allow  switching between the programming language of the examples.</p>
<h1 id='basics'>Basics</h1>
<p>Use of Enigma Bridge consists of four phases, irrespective of operations you want to use:</p>

<ol>
<li><strong>user enrolment</strong> - creating user account;</li>
<li><strong>API key creation</strong> - obtaining API key with authorizations and also network connection details to a suitable Enigma Bridge instance;</li>
<li><strong>operation enrolment</strong> - introduction of a new use request into Enigma Bridge; and</li>
<li><strong>data processing</strong> - operational use.</li>
</ol>

<p>Depending on the use case and limits on usage, all steps can be completed fully automatically within seconds. If a particular use case requires more strict control, step 1 will require manual approval.</p>

<p>Each of the steps can be represented by a single API command, regardless of the operation you request. The result of the enrolment is a configuration string that uniquely identifies a new user object.</p>
<h1 id='getting-started'>Getting Started</h1><pre class="highlight python tab-python"><code><span class="s">"sudo pip install ebclient.py"</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="s2">"npm install -g ebclient.js"</span>
<span class="nx">or</span>
<span class="s2">"git clone https://github.com/EnigmaBridge/client.js"</span>
</code></pre><pre class="highlight shell tab-shell"><code><span class="c"># nothing required</span>
</code></pre><pre class="highlight java tab-java"><code><span class="s">"git clone https://github.com/EnigmaBridge/client.java"</span>
</code></pre><pre class="highlight json tab-json"><code><span class="s2">"nothing required"</span><span class="w">
</span></code></pre>
<p>We provide several language bindings. </p>

<ul>
<li>Java - <a href="https://github.com/EnigmaBridge/client.java">client.java at GitHub</a></li>
<li>Javascript - <a href="https://github.com/EnigmaBridge/client.js">client.js at GitHub</a></li>
<li>Python - <a href="https://github.com/EnigmaBridge/client.py">client.py at GitHub</a></li>
</ul>

<p>We have also implemented a PKCS#11 wrapper that uses Enigma Bridge for hardware security:</p>

<ul>
<li>SoftHSM - <a href="https://github.com/EnigmaBridge/SoftHSMv1">SoftHSMv1 at GitHub</a></li>
</ul>

<p>Our goal is to make any library installation as simple as possible, and using standard deployment mechanisms wherever possible. </p>
<h1 id='register-as-enigma-client'>Register as Enigma Client</h1>
<p>The first step in using the EB service is to create a client account. The client account forms the basis for your authorization towards Enigma Bridge. Once you obtain an account, you will learn your authentication details you can use to obtain API keys.</p>

<p>Unless you intend to use an automation tool that takes care of the enrolment process. Please raise a support ticket at:</p>

<p><a href="https://enigmabridge.freshdesk.com/helpdesk/tickets/new">Enigma Bridge Support System</a></p>

<p>We always require manual approval (via <a href="https://enigmabridge.freshdesk.com">our support system</a>) when you request access to higher transactions rates, or when a formal audit requirements are in place (e.g., payment applications subject to PCI audits).</p>
<h2 id='automation'>Automation</h2>
<blockquote>
<p>This section can only be used in certain cases, when it is possible to automate enrolment to the Enigma Bridge service. </p>
</blockquote>
<pre class="highlight java tab-java"><code><span class="c1">// coming soon</span>
</code></pre><pre class="highlight json tab-json"><code><span class="s2">"coming soon"</span><span class="w">
</span></code></pre><pre class="highlight shell tab-shell"><code>curl -i <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"X-Auth-Token: public"</span> <span class="se">\</span>
  -X POST
  -d <span class="s1">'{
         "nonce":"arbitrary string that will be included in the response",
         "version":1,
         "function":"create",
         "environment":"dev",
         "client":{
             "name":"name of the client - it should be unique",
             "authentication":"type",
             "type":"pre-defined type of clients",
             "token":"initial type authentication token"
         }
    }'</span><span class="se">\</span>
  https://hut3.enigmabridge.com:8445/api/v1/client
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">// JS coming soon</span>
</code></pre><pre class="highlight python tab-python"><code><span class="kn">from</span> <span class="nn">ebclient.eb_configuration</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">ebclient.eb_registration</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">ebclient.registration</span> <span class="kn">import</span> <span class="o">*</span>

<span class="n">cfg</span> <span class="o">=</span> <span class="n">Configuration</span><span class="p">()</span>
<span class="n">cfg</span><span class="o">.</span><span class="n">endpoint_register</span> <span class="o">=</span> <span class="n">Endpoint</span><span class="o">.</span><span class="n">url</span><span class="p">(</span><span class="s">'https://hut3.enigmabridge.com:8445'</span><span class="p">)</span>

<span class="n">client_data_reg</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'name'</span><span class="p">:</span> <span class="s">'name of the client - it should be unique'</span><span class="p">,</span>
    <span class="s">'authentication'</span><span class="p">:</span> <span class="s">'type'</span><span class="p">,</span>
    <span class="s">'type'</span><span class="p">:</span> <span class="s">'pre-defined type of clients'</span><span class="p">,</span>
    <span class="s">'token'</span><span class="p">:</span> <span class="s">'initial type authentication token'</span>
    <span class="s">'email'</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">email</span>
<span class="p">}</span>

<span class="n">regreq</span> <span class="o">=</span> <span class="n">RegistrationRequest</span><span class="p">(</span><span class="n">client_data</span><span class="o">=</span><span class="n">client_data_reg</span><span class="p">,</span> \
                             <span class="n">env</span><span class="o">=</span><span class="n">ENVIRONMENT_DEVELOPMENT</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="n">cfg</span><span class="p">)</span>
<span class="n">regresponse</span> <span class="o">=</span> <span class="n">regreq</span><span class="o">.</span><span class="n">call</span><span class="p">()</span>

<span class="c"># results</span>
<span class="n">username</span> <span class="o">=</span> <span class="n">regresponse</span><span class="p">[</span><span class="s">'username'</span><span class="p">]</span>
<span class="n">password</span> <span class="o">=</span> <span class="n">regresponse</span><span class="p">[</span><span class="s">'password'</span><span class="p">]</span>

<span class="k">print</span><span class="p">(</span><span class="n">regresponse</span><span class="p">)</span>
</code></pre>
<p>We have created three end-points for client registration. We named them in memory of wartime sections of the Government Code and Cypher School (GC&amp;CS) at <a href="https://en.wikipedia.org/wiki/Bletchley_Park">Bletchley Park</a></p>

<ul>
<li><strong>hut3.enigmabridge.com</strong> - Hut 3 translated, interpretated and distributed German Army (Heer) and Air Force (Luftwaffe) messages deciphered by Hut 6.</li>
<li><strong>hut6.enigmabridge.com</strong> - Hut 6&#39;s task was to break German Army and Air Force <a href="https://en.wikipedia.org/wiki/Enigma_machine">Enigma machine</a> cyphers.</li>
<li><strong>hut8.enigmabridge.com</strong> - Hut 8 was solving German naval (Kriegsmarine) Enigma messages. The section was led initially by Alan Turing.</li>
</ul>

<p>Automated registration requires knowledge of your use-case. In certain cases, we pre-define types of clients for automated deployments. For example, <a href="https://en.wikipedia.org/wiki/Amazon_Machine_Image">AMI</a> available from <a href="https://aws.amazon.com/marketplace">Amazon AWS Marketplace</a> will be assigned such a client type. </p>

<aside class="notice">
Availability of automated execution of client registration depends on the use case and required operation.
</aside>

<aside class="notice">
In some cases, it is possible to use a default "TEST" user and "TEST_API" key - these credentials are only available for demonstration purposes.
</aside>
<h1 id='get-api-key'>Get API Key</h1>
<p>Once you have a client ID and authentication data, you are ready to create your first API key (one client ID will typically have several API keys to separate software clients). All operational requests need a valid API key, even though it is usually hidden in client-side libraries.</p>

<blockquote>
<p>The automation code is only available if Enigma Bridge provides automation for particular use case or application. All operational requests need a valid ClientID, even though it is usually hidden in client-side libraries.</p>
</blockquote>
<h2 id='automation-2'>Automation</h2><pre class="highlight shell tab-shell"><code>curl -i <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"X-Auth-Token: public"</span> <span class="se">\</span>
  -X POST
  -d <span class="s1">'{
         "nonce":"arbitrary string that will be included in the response",
         "version":1,
         "function":"addapi",
         "authentication":("name" | "type" | "password" | "hotp" | "totp" | "ocra" | "challenge" | "signature"),
         "client":{
             "username":"as provided by function create",
             "authentication":"type",
             "password":"as provided",
         },
         "endpoint":{
             "ipv4":"IPv4",
             "ipv6":"IPv6",
             "email":"contact@mail",
             "country":"2 letter code, e.g. gb, us",
             "network":"network or IP space",
             "location":[0.34,10],
             "datacenter":"name",
             "hostid":"hostid",
             "productcode":"product code",
             "instancetype":"instance type"
         },
         "operations":["name","name2","nameX"]
    }'</span><span class="se">\</span>
  https://hut3.enigmabridge.com:8445/api/v1/client
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="s2">"comming soon"</span>
</code></pre><pre class="highlight python tab-python"><code><span class="kn">from</span> <span class="nn">ebclient.eb_configuration</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">ebclient.eb_registration</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">ebclient.registration</span> <span class="kn">import</span> <span class="o">*</span>

<span class="n">cfg</span> <span class="o">=</span> <span class="n">Configuration</span><span class="p">()</span>
<span class="n">cfg</span><span class="o">.</span><span class="n">endpoint_register</span> <span class="o">=</span> <span class="n">Endpoint</span><span class="o">.</span><span class="n">url</span><span class="p">(</span><span class="s">'https://hut3.enigmabridge.com:8445'</span><span class="p">)</span>

<span class="n">client_api_req</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'authentication'</span><span class="p">:</span> <span class="s">'password'</span><span class="p">,</span>
    <span class="s">'username'</span><span class="p">:</span> <span class="n">username</span><span class="p">,</span>
    <span class="s">'password'</span><span class="p">:</span> <span class="n">password</span>
<span class="p">}</span>

<span class="n">endpoint</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"ipv4"</span><span class="p">:</span> <span class="s">"123.23.23.23"</span><span class="p">,</span>
    <span class="s">"ipv6"</span><span class="p">:</span> <span class="s">"fe80::2e0:4cff:fe68:bcc2/64"</span><span class="p">,</span>
    <span class="s">"country"</span><span class="p">:</span> <span class="s">"gb"</span><span class="p">,</span>
    <span class="s">"network"</span><span class="p">:</span> <span class="s">"plusnet"</span><span class="p">,</span>
    <span class="s">"location"</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.34</span><span class="p">,</span><span class="mi">10</span><span class="p">]</span>
<span class="p">}</span>

<span class="n">apireq</span> <span class="o">=</span> <span class="n">ApiKeyRequest</span><span class="p">(</span><span class="n">client_data</span><span class="o">=</span><span class="n">client_api_req</span><span class="p">,</span> <span class="n">endpoint</span><span class="o">=</span><span class="n">endpoint</span><span class="p">,</span> \
                       <span class="n">env</span><span class="o">=</span><span class="n">ENVIRONMENT_DEVELOPMENT</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="n">cfg</span><span class="p">)</span>
<span class="n">apiresponse</span> <span class="o">=</span> <span class="n">apireq</span><span class="o">.</span><span class="n">call</span><span class="p">()</span>

<span class="c"># Results</span>
<span class="n">apikey</span> <span class="o">=</span> <span class="n">apiresponse</span><span class="p">[</span><span class="s">'apikey'</span><span class="p">]</span>
<span class="n">servers</span> <span class="o">=</span> <span class="n">apiresponse</span><span class="p">[</span><span class="s">'servers'</span><span class="p">]</span>
</code></pre>
<blockquote>
<p>Make sure to replace default values with proper ones.</p>
</blockquote>

<p>Automation is enabled with the RESTful API of our user management server. It means that requests are still being sent to one of the huts.</p>

<p>A successful response to a request for an API key will also return network connection details for operational requests. The user management server will automatically select the most suitable location of Enigma Bridge servers to provide required functionality and also to optimize network performance.</p>
<h3 id='query-parameters'>Query Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Optional</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>ipv4</td>
<td>string</td>
<td>true</td>
<td>IPv4 address provided by the client software</td>
</tr>
<tr>
<td>ipv6</td>
<td>string</td>
<td>true</td>
<td>IPv6 address provided by the client software</td>
</tr>
<tr>
<td>email</td>
<td>string</td>
<td>true</td>
<td>contact email address</td>
</tr>
<tr>
<td>country</td>
<td>string</td>
<td>true</td>
<td>2 character ISO country code</td>
</tr>
<tr>
<td>network</td>
<td>string</td>
<td>true</td>
<td>string - name or IP space</td>
</tr>
<tr>
<td>location</td>
<td>array</td>
<td>true</td>
<td>geographic location as an array of two float numbers</td>
</tr>
<tr>
<td>datacenter</td>
<td>string</td>
<td>true</td>
<td>name / identification of the datacenter</td>
</tr>
<tr>
<td>hostid</td>
<td>string</td>
<td>true</td>
<td>host ID - e.g. AMI name (Amazon), server fqdn</td>
</tr>
<tr>
<td>productcode</td>
<td>string</td>
<td>true</td>
<td>identification of the client host if a VM</td>
</tr>
<tr>
<td>instancetype</td>
<td>string</td>
<td>true</td>
<td>another identification</td>
</tr>
</tbody></table>

<p>Enigma Bridge servers require API keys to allow access to the API. You can register a new API key either programmaticaly or via our support portal at <a href="https://enigmabridge.freshdesk.com">support portal</a>.</p>

<aside class="notice">
You must replace <code>default key</code> with your personal API key.
</aside>
<h1 id='use'>Use</h1><h2 id='processdata'>ProcessData</h2><pre class="highlight json tab-json"><code><span class="s2">" POST request:"</span><span class="w">
</span><span class="s2">"    https://hut:11180/1.0/TEST_API0000001dcb0000300006/ProcessData/f2044d875bdef29d"</span><span class="w">
</span><span class="s2">"    parameters are an Enigma Bridge handle, command (ProcessData), and a nonce"</span><span class="w">
</span><span class="s2">"    Data has to be encrypted, see the text to the left for details."</span><span class="w">
</span><span class="s2">" POST data:"</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0000BCFAADB2FC41A300961AE8741463B676954515B07456681E1E180A9B5FCE7BC93F5A49328DD79CCD96F995F345E3E60674DCA06FE4B1B39E164E08E713C0DB58CBF3EDBF73BADB78BA116418704E52EEB75F575F032BD082AF2585A5F5D3119AF8ACB5C2BAB9C982A7068BD7CB6EA4B9EE84126E1B0E5FE58D6567F1595CCDB6D1B43338DF87E582C50C6A0A0479E40DD63A4E36BD7A1066E8E4293076BF513DD2AE450307A571B5D11D965910074511CCE9FEDBFDF646EFF69B42BAF6A0A8A995A46EEC223D3E595AF40BA4DB1CC0E3D29E06E05DC835A7EF4166BFC4D281F249607D6B913A46B5F69C44BFCA35D5F53AEB6A048E38C064B837C99E571A5A928B2C8C83BB467FDB76BC76F3BECB944F24EEF9B376D6A7D9977AAF59770287F2"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"function"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ProcessData"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.0"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"nonce"</span><span class="p">:</span><span class="w"> </span><span class="s2">"06AEAEADE624C651"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"objectid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TEST_API0000001dcb0000300006"</span><span class="w">
</span><span class="p">}</span><span class="w">


</span><span class="s2">"RESPONSE"</span><span class="w">
</span><span class="s2">" Typical `ProcessData` response is a JSON object like the following one."</span><span class="w">
</span><span class="s2">" The communication encryption is in place - decryption has to be performed"</span><span class="w"> 
</span><span class="s2">"  in order to get the response clear text. Status 0x9000 stands for OK - result completed successfully."</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="s2">"function"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ProcessData"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0000d81cadea2e6499fdd1095988be916e0a3b3d706fd3a5b42b2ad6cdb751ac6a831fa030fc1f2885248388355ee5977cad"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"nonce"</span><span class="p">:</span><span class="w"> </span><span class="s2">"89c14e8802c42151"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9000"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"statusdetail"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success (ok)"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"version"</span><span class="p">:</span><span class="s2">"1.0"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><pre class="highlight python tab-python"><code><span class="kn">from</span> <span class="nn">ebclient.process_data</span> <span class="kn">import</span> <span class="n">ProcessData</span>
<span class="kn">from</span> <span class="nn">ebclient.uo</span> <span class="kn">import</span> <span class="n">Configuration</span><span class="p">,</span> <span class="n">Endpoint</span><span class="p">,</span> <span class="n">SimpleRetry</span><span class="p">,</span> <span class="n">UO</span>
<span class="kn">from</span> <span class="nn">ebclient.crypto_util</span> <span class="kn">import</span> <span class="o">*</span>

<span class="n">cfg</span> <span class="o">=</span> <span class="n">Configuration</span><span class="p">()</span>
<span class="n">cfg</span><span class="o">.</span><span class="n">endpoint_process</span> <span class="o">=</span> <span class="n">Endpoint</span><span class="o">.</span><span class="n">url</span><span class="p">(</span><span class="s">'https://site2.enigmabridge.com:11180'</span><span class="p">)</span>
<span class="n">cfg</span><span class="o">.</span><span class="n">api_key</span> <span class="o">=</span> <span class="s">'API_TEST'</span>

<span class="n">uo_aes</span> <span class="o">=</span> <span class="n">UO</span><span class="p">(</span><span class="n">uo_id</span><span class="o">=</span><span class="mh">0xee01</span><span class="p">,</span>
            <span class="n">uo_type</span><span class="o">=</span><span class="mh">0x4</span><span class="p">,</span>
            <span class="n">enc_key</span><span class="o">=</span><span class="n">from_hex</span><span class="p">(</span><span class="s">'e134567890123456789012345678901234567890123456789012345678901234'</span><span class="p">),</span>
            <span class="n">mac_key</span><span class="o">=</span><span class="n">from_hex</span><span class="p">(</span><span class="s">'e224262820223456789012345678901234567890123456789012345678901234'</span><span class="p">),</span>
            <span class="n">configuration</span><span class="o">=</span><span class="n">cfg</span><span class="p">)</span>

<span class="n">pd</span> <span class="o">=</span> <span class="n">ProcessData</span><span class="p">(</span><span class="n">uo</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">uo_aes</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="n">cfg</span><span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">from_hex</span><span class="p">(</span><span class="s">'6bc1bee22e409f96e93d7e117393172a'</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="n">from_hex</span><span class="p">(</span><span class="s">'95c6bb9b6a1c3835f98cc56087a03e82'</span><span class="p">)</span> <span class="o">==</span> <span class="n">result</span><span class="p">)</span>
</code></pre><pre class="highlight shell tab-shell"><code><span class="c"># Process data uses a communication encryption preprocessing.</span>
<span class="c"># For more details please refer to the Communication encryption documentation. </span>
<span class="c"># Pure shell client is not yet planned.</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="s2">"use strict"</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">eb</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">"ebclient.js"</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">sjcl</span> <span class="o">=</span> <span class="nx">eb</span><span class="p">.</span><span class="nx">misc</span><span class="p">.</span><span class="nx">sjcl</span><span class="p">;</span>

<span class="c1">// Define basic EB configuration - shared among many requests</span>
<span class="kd">var</span> <span class="nx">config</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">eb</span><span class="p">.</span><span class="nx">client</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">({</span>
    <span class="na">endpointProcess</span><span class="p">:</span> <span class="s1">'https://site2.enigmabridge.com:11180'</span><span class="p">,</span>
    <span class="na">endpointEnroll</span><span class="p">:</span> <span class="s1">'https://site2.enigmabridge.com:11182'</span><span class="p">,</span>
    <span class="na">apiKey</span><span class="p">:</span> <span class="s1">'TEST_API'</span><span class="p">,</span>

    <span class="na">timeout</span><span class="p">:</span> <span class="mi">30000</span><span class="p">,</span>
    <span class="na">retry</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">maxAttempts</span><span class="p">:</span> <span class="mi">2</span>
    <span class="p">}</span>
<span class="p">});</span>

<span class="c1">// Define UserObject to operate with, for particular operation.</span>
<span class="kd">var</span> <span class="nx">settings</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">config</span><span class="p">:</span> <span class="nx">config</span><span class="p">,</span>
    <span class="na">uoId</span><span class="p">:</span> <span class="s1">'EE01'</span><span class="p">,</span>
    <span class="na">uoType</span><span class="p">:</span> <span class="s1">'4'</span><span class="p">,</span>
    <span class="na">aesKey</span><span class="p">:</span> <span class="s1">'e134567890123456789012345678901234567890123456789012345678901234'</span><span class="p">,</span>
    <span class="na">macKey</span><span class="p">:</span> <span class="s1">'e224262820223456789012345678901234567890123456789012345678901234'</span>
<span class="p">};</span>

<span class="c1">// Input can be either hex-coded string or SJCL bitArray (array of 32bit words / integers).</span>
<span class="kd">var</span> <span class="nx">input</span> <span class="o">=</span> <span class="s1">'6bc1bee22e409f96e93d7e117393172a'</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">cl</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">eb</span><span class="p">.</span><span class="nx">client</span><span class="p">.</span><span class="nx">processData</span><span class="p">(</span><span class="nx">settings</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">promise</span> <span class="o">=</span> <span class="nx">cl</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">input</span><span class="p">);</span>

<span class="nx">promise</span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">eb</span><span class="p">.</span><span class="nx">misc</span><span class="p">.</span><span class="nx">inputToHex</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">data</span><span class="p">)</span> <span class="o">==</span> <span class="s1">'95c6bb9b6a1c3835f98cc56087a03e82'</span><span class="p">);</span>
<span class="p">}).</span><span class="k">catch</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
<span class="p">});</span>
</code></pre><pre class="highlight java tab-java"><code><span class="c1">// Coming soon </span>
</code></pre>
<p><code>ProcessData</code> is the <em>operational call</em> of the Enigma Bridge service. It performs an operation that is identified by a handle, e.g., <code>TEST_API000000ee010000000004</code>. The only other parameter it takes is data for processing.</p>

<p>As the data should be typically protected between the client application and EB servers, it has to be encrypted with communication keys. The actual protocol is again defined by its handle, which is a text string.</p>

<p>For more details of the communication encryption, please refer to the <em>Communication encryption documentation - Link coming soon</em>, or use one of the client implementations at <a href="https://github.com/EnigmaBridge">Enigma Bridge GitHub</a>. </p>

<p>&quot; Typical <code>ProcessData</code> response is a JSON object like the following one.&quot;
&quot; The communication encryption is in place - decryption has to be performed&quot; 
&quot;  in order to get the response clear text. Status 0x9000 stands for OK - result completed successfully.&quot;</p>

<p><code>ProcessData</code> call can be tested also online in <a href="https://enigmabridge.com/test">ProcessData-demo</a>.</p>

<aside class="notice">Data sent to Enigma Bridge for processing has to be formatted. It is usually taken care of by one of our clients.</aside>

<p>See links to implementations in <a href="#getting-started">Javascript, Python, and Java above</a>.
<aside class="notice">Each response form the Enigma Bridge service will contain a numerical code, as well as a short text with explanation of the error.</aside></p>
<h2 id='create-user-object'>Create User Object</h2>
<ul>
<li>The first step before working with EnigmaBridge is creation of User Object.</li>
<li>User object can hold e.g., RSA-2048 private key or AES encryption/decryption key.</li>
<li>Each UserObject has one operation associated with it. For RSA-2048 key it is typically a decryption.</li>
<li>Symmetric encryption key - e.g. AES encryption key has also one operation thus you need two user objects, with the same AES key inside, to perform both encryption and decryption.</li>
<li>You can either import a key into the User Object if you have it (e.g., AES key known to you, RSA key) or you can let EnigmaBridge generate a
new key in the secure hardware so you benefit from the secure RNG and the fact you don&#39;t really know the secret value
thus nobody can steal it from you - it never leaves the secure hardware.</li>
</ul>
<pre class="highlight python tab-python"><code><span class="kn">from</span> <span class="nn">ebclient.process_data</span> <span class="kn">import</span> <span class="n">ProcessData</span>
<span class="kn">from</span> <span class="nn">ebclient.create_uo</span> <span class="kn">import</span> <span class="n">TemplateFields</span><span class="p">,</span> <span class="n">KeyTypes</span><span class="p">,</span> <span class="n">Environment</span><span class="p">,</span> <span class="n">Gen</span>
<span class="kn">from</span> <span class="nn">ebclient.eb_create_uo</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">ebclient.uo</span> <span class="kn">import</span> <span class="n">Configuration</span><span class="p">,</span> <span class="n">Endpoint</span><span class="p">,</span> <span class="n">SimpleRetry</span><span class="p">,</span> <span class="n">UO</span>
<span class="kn">from</span> <span class="nn">ebclient.crypto_util</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">ebclient.eb_consts</span> <span class="kn">import</span> <span class="n">UOTypes</span>

<span class="n">cfg</span> <span class="o">=</span> <span class="n">Configuration</span><span class="p">()</span>
<span class="n">cfg</span><span class="o">.</span><span class="n">endpoint_process</span> <span class="o">=</span> <span class="n">Endpoint</span><span class="o">.</span><span class="n">url</span><span class="p">(</span><span class="s">'https://site2.enigmabridge.com:11180'</span><span class="p">)</span>
<span class="n">cfg</span><span class="o">.</span><span class="n">endpoint_enroll</span> <span class="o">=</span> <span class="n">Endpoint</span><span class="o">.</span><span class="n">url</span><span class="p">(</span><span class="s">'https://site2.enigmabridge.com:11182'</span><span class="p">)</span>
<span class="n">cfg</span><span class="o">.</span><span class="n">api_key</span> <span class="o">=</span> <span class="s">'API_TEST'</span>

<span class="c"># Prepare key template - settings</span>
<span class="n">tpl</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">TemplateFields</span><span class="o">.</span><span class="n">environment</span><span class="p">:</span> <span class="n">Environment</span><span class="o">.</span><span class="n">DEV</span>
<span class="p">}</span>

<span class="c"># AES key - provided by the client</span>
<span class="c"># It is also possible to let EB generate the key.</span>
<span class="n">keys</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">KeyTypes</span><span class="o">.</span><span class="n">APP_KEY</span><span class="p">:</span> <span class="n">from_hex</span><span class="p">(</span><span class="s">'0123456789123456789012345678901234567890123456789012345678901234'</span><span class="p">)</span>
<span class="p">}</span>


<span class="c"># Create AES-128 key for decryption - UOTypes.PLAINAESDECRYPT</span>
<span class="n">cuo</span> <span class="o">=</span> <span class="n">CreateUO</span><span class="p">(</span><span class="n">configuration</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">cfg</span><span class="p">,</span> <span class="n">tpl</span><span class="o">=</span><span class="n">tpl</span><span class="p">,</span> \
              <span class="n">obj_type</span><span class="o">=</span><span class="n">UOTypes</span><span class="o">.</span><span class="n">PLAINAESDECRYPT</span><span class="p">,</span> \
              <span class="n">keys</span><span class="o">=</span><span class="n">keys</span><span class="p">)</span>
<span class="n">uo</span> <span class="o">=</span> <span class="n">cuo</span><span class="o">.</span><span class="n">create_uo</span><span class="p">()</span>

<span class="c"># Process data - prepare object to use the new AES key</span>
<span class="n">pd</span> <span class="o">=</span> <span class="n">ProcessData</span><span class="p">(</span><span class="n">uo</span><span class="o">=</span><span class="n">uo</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="n">cfg</span><span class="p">)</span>

<span class="c"># Call the operation</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">from_hex</span><span class="p">(</span><span class="s">'95c6bb9b6a1c3835f98cc56087a03e82'</span><span class="p">))</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="s2">"use strict"</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">eb</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">"ebclient.js"</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">sjcl</span> <span class="o">=</span> <span class="nx">eb</span><span class="p">.</span><span class="nx">misc</span><span class="p">.</span><span class="nx">sjcl</span><span class="p">;</span>

<span class="c1">// Define basic EB configuration - shared among many requests</span>
<span class="kd">var</span> <span class="nx">config</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">eb</span><span class="p">.</span><span class="nx">client</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">({</span>
    <span class="na">endpointProcess</span><span class="p">:</span> <span class="s1">'https://site2.enigmabridge.com:11180'</span><span class="p">,</span>
    <span class="na">endpointEnroll</span><span class="p">:</span> <span class="s1">'https://site2.enigmabridge.com:11182'</span><span class="p">,</span>
    <span class="na">apiKey</span><span class="p">:</span> <span class="s1">'TEST_API'</span><span class="p">,</span>

    <span class="na">timeout</span><span class="p">:</span> <span class="mi">30000</span><span class="p">,</span>
    <span class="na">retry</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">maxAttempts</span><span class="p">:</span> <span class="mi">2</span>
    <span class="p">}</span>
<span class="p">});</span>

<span class="c1">// Create randomly generated AES-128 key, with DECRYPT operation associated</span>
<span class="c1">// with it, in development environment.</span>
<span class="kd">var</span> <span class="nx">cfg</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">config</span><span class="p">:</span> <span class="nx">config</span><span class="p">,</span>
    <span class="na">tpl</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"environment"</span><span class="p">:</span> <span class="nx">eb</span><span class="p">.</span><span class="nx">comm</span><span class="p">.</span><span class="nx">createUO</span><span class="p">.</span><span class="nx">consts</span><span class="p">.</span><span class="nx">environment</span><span class="p">.</span><span class="nx">DEV</span>
    <span class="p">},</span>
    <span class="na">keys</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">app</span><span class="p">:</span> <span class="p">{</span>
            <span class="na">key</span><span class="p">:</span> <span class="nx">sjcl</span><span class="p">.</span><span class="nx">random</span><span class="p">.</span><span class="nx">randomWords</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">},</span>
    <span class="na">objType</span><span class="p">:</span> <span class="nx">eb</span><span class="p">.</span><span class="nx">comm</span><span class="p">.</span><span class="nx">createUO</span><span class="p">.</span><span class="nx">consts</span><span class="p">.</span><span class="nx">uoType</span><span class="p">.</span><span class="nx">PLAINAESDECRYPT</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">cl</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">eb</span><span class="p">.</span><span class="nx">client</span><span class="p">.</span><span class="nx">createUO</span><span class="p">(</span><span class="nx">cfg</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">promise</span> <span class="o">=</span> <span class="nx">cl</span><span class="p">.</span><span class="nx">call</span><span class="p">();</span>

<span class="nx">promise</span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">){</span>
    <span class="c1">// Call ProcessData on the input data - here we verify</span>
    <span class="c1">// it works as we expect.</span>
    <span class="kd">var</span> <span class="nx">aes</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">sjcl</span><span class="p">.</span><span class="nx">cipher</span><span class="p">.</span><span class="nx">aes</span><span class="p">(</span><span class="nx">cfg</span><span class="p">.</span><span class="nx">keys</span><span class="p">.</span><span class="nx">app</span><span class="p">.</span><span class="nx">key</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">input2</span> <span class="o">=</span> <span class="s1">'6bc1bee22e409f96e93d7e117393172a'</span><span class="p">;</span>

    <span class="c1">// Pass data to the process data function - contains UserObject</span>
    <span class="c1">// which ProcessData parses and uses.</span>
    <span class="kd">var</span> <span class="nx">cfg2</span> <span class="o">=</span> <span class="nx">eb</span><span class="p">.</span><span class="nx">misc</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="p">{},</span> <span class="nx">data</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">cl2</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">eb</span><span class="p">.</span><span class="nx">client</span><span class="p">.</span><span class="nx">processData</span><span class="p">(</span><span class="nx">cfg2</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">promise2</span> <span class="o">=</span> <span class="nx">cl2</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">input2</span><span class="p">);</span>

    <span class="nx">promise2</span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">){</span>
        <span class="kd">var</span> <span class="nx">desiredOutput</span> <span class="o">=</span> <span class="nx">aes</span><span class="p">.</span><span class="nx">decrypt</span><span class="p">(</span><span class="nx">eb</span><span class="p">.</span><span class="nx">misc</span><span class="p">.</span><span class="nx">inputToBits</span><span class="p">(</span><span class="nx">input2</span><span class="p">));</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">eb</span><span class="p">.</span><span class="nx">misc</span><span class="p">.</span><span class="nx">inputToHex</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">data</span><span class="p">));</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">eb</span><span class="p">.</span><span class="nx">misc</span><span class="p">.</span><span class="nx">inputToHex</span><span class="p">(</span><span class="nx">desiredOutput</span><span class="p">));</span>
    <span class="p">}).</span><span class="k">catch</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">){</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
    <span class="p">});</span>

<span class="p">}).</span><span class="k">catch</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
<span class="p">});</span>
</code></pre><pre class="highlight java tab-java"><code><span class="c1">// Coming soon</span>
</code></pre><pre class="highlight json tab-json"><code><span class="s2">" Not supported with RAW JSON. Please, take a look at clients"</span><span class="w"> 
</span></code></pre><pre class="highlight shell tab-shell"><code><span class="c"># Not supported in shell. Please, take a look at clients</span>
</code></pre><h2 id='create-user-object-rsa'>Create User Object - RSA</h2>
<p>RSA user object is a bit more specific as it returns the public part.</p>
<pre class="highlight python tab-python"><code><span class="kn">from</span> <span class="nn">ebclient.process_data</span> <span class="kn">import</span> <span class="n">ProcessData</span>
<span class="kn">from</span> <span class="nn">ebclient.create_uo</span> <span class="kn">import</span> <span class="n">TemplateFields</span><span class="p">,</span> <span class="n">KeyTypes</span><span class="p">,</span> <span class="n">Environment</span><span class="p">,</span> <span class="n">Gen</span>
<span class="kn">from</span> <span class="nn">ebclient.eb_create_uo</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">ebclient.uo</span> <span class="kn">import</span> <span class="n">Configuration</span><span class="p">,</span> <span class="n">Endpoint</span><span class="p">,</span> <span class="n">SimpleRetry</span><span class="p">,</span> <span class="n">UO</span>
<span class="kn">from</span> <span class="nn">ebclient.crypto_util</span> <span class="kn">import</span> <span class="o">*</span>

<span class="n">cfg</span> <span class="o">=</span> <span class="n">Configuration</span><span class="p">()</span>
<span class="n">cfg</span><span class="o">.</span><span class="n">endpoint_process</span> <span class="o">=</span> <span class="n">Endpoint</span><span class="o">.</span><span class="n">url</span><span class="p">(</span><span class="s">'https://site2.enigmabridge.com:11180'</span><span class="p">)</span>
<span class="n">cfg</span><span class="o">.</span><span class="n">endpoint_enroll</span> <span class="o">=</span> <span class="n">Endpoint</span><span class="o">.</span><span class="n">url</span><span class="p">(</span><span class="s">'https://site2.enigmabridge.com:11182'</span><span class="p">)</span>
<span class="n">cfg</span><span class="o">.</span><span class="n">api_key</span> <span class="o">=</span> <span class="s">'API_TEST'</span>

<span class="c"># Prepare key template - settings</span>
<span class="n">tpl</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">TemplateFields</span><span class="o">.</span><span class="n">environment</span><span class="p">:</span> <span class="n">Environment</span><span class="o">.</span><span class="n">DEV</span>
<span class="p">}</span>

<span class="n">cuo</span> <span class="o">=</span> <span class="n">CreateUO</span><span class="p">(</span><span class="n">configuration</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">cfg</span><span class="p">,</span> <span class="n">tpl</span><span class="o">=</span><span class="n">tpl</span><span class="p">)</span>

<span class="c"># Create RSA-2048 private key</span>
<span class="c"># Communication keys are not specified here -&gt; will be generated now, returned in the response.</span>
<span class="n">rsa_key</span> <span class="o">=</span> <span class="n">cuo</span><span class="o">.</span><span class="n">create_rsa</span><span class="p">(</span><span class="mi">2048</span><span class="p">)</span>

<span class="c"># Process data - prepare object to use the new RSA-2048 key for decryption</span>
<span class="n">pd</span> <span class="o">=</span> <span class="n">ProcessData</span><span class="p">(</span><span class="n">uo</span><span class="o">=</span><span class="n">rsa_key</span><span class="o">.</span><span class="n">uo</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="n">cfg</span><span class="p">)</span>

<span class="c"># Prepare data - 000..1. RAW operation is performed - padding has to be done</span>
<span class="c"># localy on the client side. You can use PKCS1.5 padding implemented in the package.</span>
<span class="nb">input</span> <span class="o">=</span> <span class="p">(</span><span class="s">"</span><span class="se">\x00</span><span class="s">"</span><span class="o">*</span><span class="mi">255</span><span class="p">)</span> <span class="o">+</span> <span class="s">"</span><span class="se">\x01</span><span class="s">"</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="nb">input</span><span class="p">)</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="s2">"use strict"</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">eb</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">"ebclient.js"</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">sjcl</span> <span class="o">=</span> <span class="nx">eb</span><span class="p">.</span><span class="nx">misc</span><span class="p">.</span><span class="nx">sjcl</span><span class="p">;</span>

<span class="c1">// Define basic EB configuration - shared among many requests</span>
<span class="kd">var</span> <span class="nx">config</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">eb</span><span class="p">.</span><span class="nx">client</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">({</span>
    <span class="na">endpointProcess</span><span class="p">:</span> <span class="s1">'https://site2.enigmabridge.com:11180'</span><span class="p">,</span>
    <span class="na">endpointEnroll</span><span class="p">:</span> <span class="s1">'https://site2.enigmabridge.com:11182'</span><span class="p">,</span>
    <span class="na">apiKey</span><span class="p">:</span> <span class="s1">'TEST_API'</span><span class="p">,</span>

    <span class="na">timeout</span><span class="p">:</span> <span class="mi">30000</span><span class="p">,</span>
    <span class="na">retry</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">maxAttempts</span><span class="p">:</span> <span class="mi">2</span>
    <span class="p">}</span>
<span class="p">});</span>

<span class="c1">// Specification: Create a new RSA-1024 key in the hardware, devel environment.</span>
<span class="kd">var</span> <span class="nx">cfg</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">config</span><span class="p">:</span> <span class="nx">config</span><span class="p">,</span>
    <span class="na">tpl</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"environment"</span><span class="p">:</span> <span class="nx">eb</span><span class="p">.</span><span class="nx">comm</span><span class="p">.</span><span class="nx">createUO</span><span class="p">.</span><span class="nx">consts</span><span class="p">.</span><span class="nx">environment</span><span class="p">.</span><span class="nx">DEV</span>
    <span class="p">},</span>
    <span class="na">bits</span><span class="p">:</span> <span class="mi">1024</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">cl</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">eb</span><span class="p">.</span><span class="nx">client</span><span class="p">.</span><span class="nx">createUO</span><span class="p">(</span><span class="nx">cfg</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">promise</span> <span class="o">=</span> <span class="nx">cl</span><span class="p">.</span><span class="nx">createRSA</span><span class="p">();</span>

<span class="nx">promise</span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">){</span>
    <span class="c1">// ProcessData demo: RSA decryption of the 00000..1</span>
    <span class="c1">// For RSA it holds: 1 ^ e mod N = 1</span>
    <span class="kd">var</span> <span class="nx">input2</span> <span class="o">=</span> <span class="s1">'0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001'</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">cfg2</span> <span class="o">=</span> <span class="nx">eb</span><span class="p">.</span><span class="nx">misc</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="p">{},</span> <span class="nx">data</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">cl2</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">eb</span><span class="p">.</span><span class="nx">client</span><span class="p">.</span><span class="nx">processData</span><span class="p">(</span><span class="nx">cfg2</span><span class="p">);</span>

    <span class="c1">// rsaPrivateKey object contains also the public part of</span>
    <span class="c1">// the key: modulus and public exponent</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">rsaPrivateKey</span><span class="p">);</span>

    <span class="kd">var</span> <span class="nx">promise2</span> <span class="o">=</span> <span class="nx">cl2</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">input2</span><span class="p">);</span>
    <span class="nx">promise2</span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">){</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">eb</span><span class="p">.</span><span class="nx">misc</span><span class="p">.</span><span class="nx">inputToHex</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">data</span><span class="p">));</span>
    <span class="p">}).</span><span class="k">catch</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">){</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
    <span class="p">});</span>

<span class="p">}).</span><span class="k">catch</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
<span class="p">});</span>
</code></pre><pre class="highlight java tab-java"><code><span class="c1">// Coming soon</span>
</code></pre><pre class="highlight json tab-json"><code><span class="s2">" Not supported with RAW JSON. Please, take a look at clients"</span><span class="w">
</span></code></pre><pre class="highlight shell tab-shell"><code><span class="c"># Not supported in shell. Please, take a look at clients</span>
</code></pre><h1 id='errors'>Errors</h1>
<aside class="notice">Each response form the Enigma Bridge service will contain a numerical code, as well as a short text with explanation of the error. 

The response code for successful processiong of a request is 36864 (0x9000).
</aside>

<p>Clients using Enigma Bridge API may encounter the following error codes:</p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>4101 (0x1005)</td>
<td>object capacity reached</td>
</tr>
<tr>
<td>4102 (0x1006)</td>
<td>timeout</td>
</tr>
<tr>
<td>4111 (0x100F)</td>
<td>service shutting down</td>
</tr>
<tr>
<td>4213 (0x1075)</td>
<td>object processing limit reached</td>
</tr>
<tr>
<td>4262 (0x10A6)</td>
<td>processing queues full</td>
</tr>
<tr>
<td>4304 (0x10D0)</td>
<td>no authorization tokens left</td>
</tr>
<tr>
<td>8364 (0x20AC)</td>
<td>integrity error / attack detected</td>
</tr>
<tr>
<td>8380 (0x20BC)</td>
<td>request not authorized</td>
</tr>
<tr>
<td>16504 (0x4078)</td>
<td>object already exists</td>
</tr>
<tr>
<td>16512 (0x4080)</td>
<td>public key not available</td>
</tr>
<tr>
<td>32769 (0x8001)</td>
<td>unknown operation</td>
</tr>
<tr>
<td>32772 (0x8004)</td>
<td>operation not available</td>
</tr>
<tr>
<td>32818 (0x8032)</td>
<td>input data length incorrect</td>
</tr>
<tr>
<td>32819 (0x8033)</td>
<td>invalid key provided</td>
</tr>
<tr>
<td>32820 (0x8034)</td>
<td>invalid handle/APIkey</td>
</tr>
<tr>
<td>32822 (0x8036)</td>
<td>missing or invalid argument</td>
</tr>
<tr>
<td>32823 (0x8037)</td>
<td>request JSON parsing failed</td>
</tr>
<tr>
<td>32824 (0x8038)</td>
<td>request JSON version not supported</td>
</tr>
<tr>
<td>32825 (0x8039)</td>
<td>request JSON data invalid</td>
</tr>
<tr>
<td>32826 (0x803A)</td>
<td>request JSON missing nonce</td>
</tr>
<tr>
<td>32827 (0x803B)</td>
<td>invalid object</td>
</tr>
<tr>
<td>32828 (0x803C)</td>
<td>unsupported operation</td>
</tr>
<tr>
<td>32829 (0x803D)</td>
<td>incorrect data padding</td>
</tr>
<tr>
<td>32830 (0x803E)</td>
<td>object format error</td>
</tr>
<tr>
<td>32833 (0x8041)</td>
<td>object format error</td>
</tr>
<tr>
<td>32835 (0x8043)</td>
<td>object format error</td>
</tr>
<tr>
<td>32839 (0x8047)</td>
<td>data is incorrect</td>
</tr>
<tr>
<td>32840 (0x8048)</td>
<td>object format error</td>
</tr>
<tr>
<td>32841 (0x8049)</td>
<td>MAC length incorrect</td>
</tr>
<tr>
<td>32842 (0x804A)</td>
<td>object format error</td>
</tr>
<tr>
<td>32844 (0x804C)</td>
<td>object format error</td>
</tr>
<tr>
<td>32846 (0x804E)</td>
<td>encrypt data padding error</td>
</tr>
<tr>
<td>32847 (0x804F)</td>
<td>encrypt data padding error</td>
</tr>
<tr>
<td>32851 (0x8053)</td>
<td>incorrect key length</td>
</tr>
<tr>
<td>32852 (0x8054)</td>
<td>data too long</td>
</tr>
<tr>
<td>32853 (0x8055)</td>
<td>malformed data</td>
</tr>
<tr>
<td>32856 (0x8058)</td>
<td>authorization cards required</td>
</tr>
<tr>
<td>32866 (0x8062)</td>
<td>invalid user context</td>
</tr>
<tr>
<td>32871 (0x8067)</td>
<td>object classification is incorrect</td>
</tr>
<tr>
<td>32872 (0x8068)</td>
<td>invalid API key</td>
</tr>
<tr>
<td>32873 (0x8069)</td>
<td>unrecognized client</td>
</tr>
<tr>
<td>32899 (0x8083)</td>
<td>invalid operation type</td>
</tr>
<tr>
<td>32909 (0x808D)</td>
<td>key component length incorrect</td>
</tr>
<tr>
<td>32910 (0x808E)</td>
<td>key component index incorrect</td>
</tr>
<tr>
<td>32911 (0x808F)</td>
<td>key component already set</td>
</tr>
<tr>
<td>32912 (0x8090)</td>
<td>key component not set</td>
</tr>
<tr>
<td>32918 (0x8096)</td>
<td>length of application key is incorrect</td>
</tr>
<tr>
<td>32919 (0x8097)</td>
<td>length of communication key is incorrect</td>
</tr>
<tr>
<td>32921 (0x8099)</td>
<td>incorrect usage flags or keys not generated</td>
</tr>
<tr>
<td>32943 (0x80AF)</td>
<td>data encryption error</td>
</tr>
<tr>
<td>32948 (0x80B4)</td>
<td>OTP code length request incorrect</td>
</tr>
<tr>
<td>32953 (0x80B9)</td>
<td>authentication method not allowed</td>
</tr>
<tr>
<td>36864 (0x9000)</td>
<td>Success</td>
</tr>
<tr>
<td>41046 (0xA056)</td>
<td>incorrect length of OTP key</td>
</tr>
<tr>
<td>41059 (0xA063)</td>
<td>too many password tries</td>
</tr>
<tr>
<td>41060 (0xA064)</td>
<td>incorrect password length</td>
</tr>
<tr>
<td>41061 (0xA065)</td>
<td>incorrect password</td>
</tr>
<tr>
<td>41062 (0xA066)</td>
<td>too many HOTP tries</td>
</tr>
<tr>
<td>41121 (0xA0A1)</td>
<td>wrong MAC on data</td>
</tr>
<tr>
<td>41136 (0xA0B0)</td>
<td>incorrect HOTP code</td>
</tr>
<tr>
<td>41137 (0xA0B1)</td>
<td>too many account tries</td>
</tr>
<tr>
<td>41138 (0xA0B2)</td>
<td>keys stored in the user object are incorrect</td>
</tr>
<tr>
<td>41139 (0xA0B3)</td>
<td>OTP counter overflow</td>
</tr>
<tr>
<td>41142 (0xA0B6)</td>
<td>incorrect user ID / malicious request</td>
</tr>
<tr>
<td>41146 (0xA0BA)</td>
<td>unknown authentication method</td>
</tr>
<tr>
<td>41170(0xA0D2)</td>
<td>no authorization credits left</td>
</tr>
<tr>
<td>61458(0xF012)</td>
<td>processor failure</td>
</tr>
<tr>
<td>61465(0xF019)</td>
<td>server not ready</td>
</tr>
<tr>
<td>61488(0xF030)</td>
<td>invalid authorization token</td>
</tr>
<tr>
<td>61489(0xF031)</td>
<td>input data too long</td>
</tr>
<tr>
<td>61493(0xF035)</td>
<td>invalid object</td>
</tr>
</tbody></table>
<h1 id='nbsp'>&nbsp;</h1><h1 id='nbsp-extended-apis-nbsp'>---&nbsp;--- Extended APIs ---&nbsp;---</h1>
<p>This part is not needed by clients as it is implemented by Enigma Bridge and their automation tools. A safe fallback is to use our <a href="https://enigmabridge.freshdesk.com">support system</a> to request enrolment to our encryption service.</p>
<h1 id='enrolment-overview'>Enrolment Overview</h1>
<aside class="notice">

User Manager is available on the following domain names managed by Enigma Bridge. Whenever we use <strong>hut</strong>, it has to be replaced with one of these three domain names.
</aside>

<p>User Manager domain names to replace <strong>hut</strong> in the text below are:</p>

<ol>
<li>hut3.enigmabridge.com</li>
<li>hut6.enigmabridge.com</li>
<li>hut8.enigmabridge.com</li>
</ol>
<h2 id='data-flow'>Data Flow</h2>
<p>The usual data-flow and sequence of actions is as follows:</p>

<ol>
<li>New client (computer, server, software package) will get an Enigma Bridge client type - this can be done automatically, e.g., for virtual machines configured by Enigma Bridge, or when you use a provided enrolment tool (script, application).</li>
<li>This step requests creation of an Enigma Bridge client - i.e., a legal entity that will own API keys and will be authorized to use the Enigma Bridge service.

<ol>
<li>The client process will use its EB type to request a new client account: this always involves a register client API call; optionally also <code>Get Client Auth Type</code> and <code>Get Client Auth</code>.</li>
<li>The customer will request a new client account via our support system at: <a href="https://enigmabridge.freshdesk.com">https://enigmabridge.freshdesk.com</a>.</li>
</ol></li>
<li>Once the client ID and authentication details are available, the client process can request a new API key.</li>
<li>The API key allows create of new user objects according to the client type definition.</li>
</ol>
<h1 id='client-endpoint-restful-api'>Client Endpoint - RESTful API</h1><h2 id='get-client-authentication'>Get Client Authentication</h2><pre class="highlight java tab-java"><code><span class="n">see</span> <span class="n">the</span> <span class="n">RESTful</span> <span class="n">column</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="nx">see</span> <span class="nx">the</span> <span class="nx">RESTful</span> <span class="nx">column</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">see</span> <span class="n">the</span> <span class="n">RESTful</span> <span class="n">column</span>
</code></pre><pre class="highlight shell tab-shell"><code>see the RESTful column
</code></pre><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"nonce"</span><span class="p">:</span><span class="s2">"nonce"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"version"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"function"</span><span class="p">:</span><span class="s2">"getauth"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"environment"</span><span class="p">:</span><span class="s2">"dev"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"client"</span><span class="p">:{</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="s2">"test"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This is a simple API call that returns the type of authentication required for a particular client type.</p>

<p>The request uses the following URL: </p>

<p><code>https://hut:8445/api/v1/client</code></p>
<h3 id='parameters'>Parameters</h3>
<table><thead>
<tr>
<th>name</th>
<th>optional</th>
<th>type</th>
<th>note</th>
</tr>
</thead><tbody>
<tr>
<td>nonce</td>
<td>NO</td>
<td>string</td>
<td>random string that will be returned back</td>
</tr>
<tr>
<td>version</td>
<td>NO</td>
<td>integer</td>
<td>must be 1</td>
</tr>
<tr>
<td>function</td>
<td>NO</td>
<td>string</td>
<td>must be &quot;create&quot;</td>
</tr>
<tr>
<td>environment</td>
<td>NO</td>
<td>string</td>
<td>must be &quot;dev&quot;, &quot;test&quot;, or &quot;prod&quot;</td>
</tr>
<tr>
<td><strong>client</strong></td>
<td>NO</td>
<td>sequence</td>
<td>must contain &quot;type&quot; of the new client that will be registered</td>
</tr>
</tbody></table>
<pre class="highlight java tab-java"><code><span class="n">see</span> <span class="n">the</span> <span class="n">RESTful</span> <span class="n">column</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="nx">see</span> <span class="nx">the</span> <span class="nx">RESTful</span> <span class="nx">column</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">see</span> <span class="n">the</span> <span class="n">RESTful</span> <span class="n">column</span>
</code></pre><pre class="highlight shell tab-shell"><code>see the RESTful column
</code></pre><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"version"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="s2">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success (ok)"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="mi">36864</span><span class="p">,</span><span class="w">
  </span><span class="s2">"nonce"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my nonce"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1475077216548</span><span class="p">,</span><span class="w">
  </span><span class="s2">"response"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"authentication"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"authentication type1"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"init"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="s2">"initdata"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
      </span><span class="p">},</span><span class="w"> 
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"authentication type2"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"init"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="s2">"initdata"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">"data required in initialization"</span><span class="w"> </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='response'>Response</h3>
<p>Response shows allowed authentication methods and lists data items required for each of the authentication methods for the &quot;Init Client Authentication&quot; method.</p>

<table><thead>
<tr>
<th>name</th>
<th>optional</th>
<th>type</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td>method</td>
<td>NO</td>
<td>string</td>
<td>one of the values from the table below</td>
</tr>
<tr>
<td>init</td>
<td>NO</td>
<td>boolean</td>
<td>true if Init Client Authentication is required</td>
</tr>
<tr>
<td>initdata</td>
<td>NO</td>
<td>array of strings</td>
<td>values can be from the set of &quot;email&quot;, &quot;mobile&quot;, and &quot;rsa&quot;</td>
</tr>
</tbody></table>

<p>The response will return an array of possible authentication types. It has to contain at least one element. Possible values are listed in the following table. Please note, that the requestor always has to know its type. </p>

<table><thead>
<tr>
<th>name</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td>type</td>
<td>client has to know its type and a token, which is fixed for all new requestors of the given type</td>
</tr>
<tr>
<td>name</td>
<td>authentication is done via a correct name; the requestor has to know the client type it wants to be</td>
</tr>
<tr>
<td>token</td>
<td>the <code>type</code>, <code>name</code>, and a <code>token</code> are required; the <code>token</code> is unique to a particular requestor and it remains constant during repeated registrations</td>
</tr>
<tr>
<td>password</td>
<td>authentication requires a correct <code>type</code>, <code>name</code>, and <code>password</code></td>
</tr>
<tr>
<td>challenge</td>
<td>authentication requires a correct one-time challenge, which is provided to the requestor via a separate channel</td>
</tr>
<tr>
<td>hotp</td>
<td>using an HOTP value, according to IETF RFC 4226</td>
</tr>
<tr>
<td>totp</td>
<td>using an TOTP value, according to IETF RFC 6238</td>
</tr>
<tr>
<td>ocra</td>
<td>using an OCRA value, according to IETF RFC 6287</td>
</tr>
<tr>
<td>signature</td>
<td>authentication with a digital signature</td>
</tr>
</tbody></table>
<h2 id='init-client-authentication'>Init Client Authentication</h2><pre class="highlight java tab-java"><code><span class="n">see</span> <span class="n">the</span> <span class="n">RESTful</span> <span class="n">column</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="nx">see</span> <span class="nx">the</span> <span class="nx">RESTful</span> <span class="nx">column</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">see</span> <span class="n">the</span> <span class="n">RESTful</span> <span class="n">column</span>
</code></pre><pre class="highlight shell tab-shell"><code>see the RESTful column
</code></pre><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"nonce"</span><span class="p">:</span><span class="s2">"nonce"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"version"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"function"</span><span class="p">:</span><span class="s2">"initauth"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"environment"</span><span class="p">:</span><span class="s2">"dev"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"client"</span><span class="p">:{</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"name of authentication method"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"email@address"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"mobile"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mobile phone number with country code"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"rsa"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RSA public key"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>If registration of a new client requires the server to provide or initialize an authentication process, this API call will provide the server with all the necessary information.</p>

<table><thead>
<tr>
<th>name</th>
<th>optional</th>
<th>type</th>
<th>note</th>
</tr>
</thead><tbody>
<tr>
<td>type</td>
<td>NO</td>
<td>string</td>
<td>a client type</td>
</tr>
<tr>
<td>method</td>
<td>NO</td>
<td>string</td>
<td>one of the names returned by &quot;Get Client Authentication&quot;</td>
</tr>
<tr>
<td>email</td>
<td>YES</td>
<td>string - email</td>
<td>email address for authentication</td>
</tr>
<tr>
<td>mobile</td>
<td>YES</td>
<td>string - number</td>
<td>mobile number with country code, only digits and whitespaces</td>
</tr>
<tr>
<td>rsa</td>
<td>YES</td>
<td>string</td>
<td>base64 public key</td>
</tr>
</tbody></table>
<h3 id='response-2'>Response</h3><pre class="highlight java tab-java"><code><span class="n">see</span> <span class="n">the</span> <span class="n">RESTful</span> <span class="n">column</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="nx">see</span> <span class="nx">the</span> <span class="nx">RESTful</span> <span class="nx">column</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">see</span> <span class="n">the</span> <span class="n">RESTful</span> <span class="n">column</span>
</code></pre><pre class="highlight shell tab-shell"><code>see the RESTful column
</code></pre><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"version"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="s2">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success (ok)"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="mi">36864</span><span class="p">,</span><span class="w">
  </span><span class="s2">"nonce"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my nonce"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1475077234509</span><span class="p">,</span><span class="w">
  </span><span class="s2">"response"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"authdata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"if appropriate, otherwise an empty sequence"</span><span class="p">},</span><span class="w">
    </span><span class="s2">"clientid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fqwbev0cid5hxmgt90nk1it0osr98ama0ey1bc10"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Response can be two-fold:</p>

<ul>
<li>input for creating authentication data, if any;</li>
<li>requesting the server to use an alternative communication channel to provide the requestor with data out-of-band </li>
</ul>
<h2 id='register-client'>Register Client</h2><pre class="highlight java tab-java"><code><span class="n">see</span> <span class="n">the</span> <span class="n">RESTful</span> <span class="n">column</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="nx">see</span> <span class="nx">the</span> <span class="nx">RESTful</span> <span class="nx">column</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">see</span> <span class="n">the</span> <span class="n">RESTful</span> <span class="n">column</span>
</code></pre><pre class="highlight shell tab-shell"><code>see the RESTful column
</code></pre><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"nonce"</span><span class="p">:</span><span class="s2">"nonce"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"version"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"function"</span><span class="p">:</span><span class="s2">"create"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"environment"</span><span class="p">:</span><span class="s2">"dev"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"client"</span><span class="p">:{</span><span class="w">
        </span><span class="s2">"name"</span><span class="p">:</span><span class="s2">"my test name"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"clientid"</span><span class="p">:</span><span class="s2">"fqwbev0cid5hxmgt90nk1it0osr98ama0ey1bc10 - from initauth API call"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"authentication"</span><span class="p">:</span><span class="s2">"type"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="s2">"test"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"token"</span><span class="p">:</span><span class="s2">"token-assigned-to-client-type"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>The request uses the following URL: </p>

<p><code>https://hut:8445/api/v1/client</code></p>
<h3 id='parameters-2'>Parameters</h3>
<table><thead>
<tr>
<th>name</th>
<th>optional</th>
<th>type</th>
<th>note</th>
</tr>
</thead><tbody>
<tr>
<td>nonce</td>
<td>NO</td>
<td>string</td>
<td>random string that will be returned back</td>
</tr>
<tr>
<td>version</td>
<td>NO</td>
<td>integer</td>
<td>must be 1</td>
</tr>
<tr>
<td>function</td>
<td>NO</td>
<td>string</td>
<td>must be &quot;create&quot;</td>
</tr>
<tr>
<td>environment</td>
<td>NO</td>
<td>string</td>
<td>must be &quot;dev&quot;, &quot;test&quot;, or &quot;prod&quot;</td>
</tr>
<tr>
<td><strong>client</strong></td>
<td>NO</td>
<td>sequence</td>
<td>contains information about the new client</td>
</tr>
</tbody></table>
<h3 id='structure-of-39-client-39'>Structure of &#39;client&#39;</h3>
<table><thead>
<tr>
<th>name</th>
<th>optional</th>
<th>type</th>
<th>note</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>NO</td>
<td>string</td>
<td>name provided by the user</td>
</tr>
<tr>
<td>clientid</td>
<td>YES</td>
<td>string</td>
<td>string provided by Init Client Authentication, if called</td>
</tr>
<tr>
<td>authentication</td>
<td>NO</td>
<td>string</td>
<td>must be &quot;type&quot;</td>
</tr>
<tr>
<td>type</td>
<td>NO</td>
<td>string</td>
<td>Name of EB client type (pre-defined)</td>
</tr>
<tr>
<td>token</td>
<td>YES</td>
<td>string</td>
<td>authentication token for the client type</td>
</tr>
</tbody></table>
<pre class="highlight java tab-java"><code><span class="n">see</span> <span class="n">the</span> <span class="n">RESTful</span> <span class="n">column</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="nx">see</span> <span class="nx">the</span> <span class="nx">RESTful</span> <span class="nx">column</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">see</span> <span class="n">the</span> <span class="n">RESTful</span> <span class="n">column</span>
</code></pre><pre class="highlight shell tab-shell"><code>see the RESTful column
</code></pre><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"version"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="s2">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success (ok)"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="mi">36864</span><span class="p">,</span><span class="w">
  </span><span class="s2">"nonce"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my nonce"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1475077216548</span><span class="p">,</span><span class="w">
  </span><span class="s2">"response"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dc5c2081-2a13-4566-ac8d-592ee955dc48"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"password"</span><span class="p">:</span><span class="w"> </span><span class="s2">"106..............571e0f53"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"max_api_keys"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
    </span><span class="s2">"authenticationType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PASSWORD"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ENABLED"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"maxobjects"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This is a typical response. The new items are:</p>

<table><thead>
<tr>
<th>name</th>
<th>optional</th>
<th>type</th>
<th>note</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>NO</td>
<td>integer</td>
<td>status code - see Error codes</td>
</tr>
<tr>
<td>error</td>
<td>NO</td>
<td>string</td>
<td>text explaining the error code</td>
</tr>
<tr>
<td>timestamp</td>
<td>NO</td>
<td>long</td>
<td>timestamp of the response</td>
</tr>
<tr>
<td><strong>response</strong></td>
<td>NO</td>
<td>sequence</td>
<td>data returned to the request</td>
</tr>
</tbody></table>
<h3 id='structure-of-39-response-39'>Structure of &#39;response&#39;</h3>
<table><thead>
<tr>
<th>name</th>
<th>optional</th>
<th>type</th>
<th>note</th>
</tr>
</thead><tbody>
<tr>
<td>username</td>
<td>NO</td>
<td>string</td>
<td>authentication username</td>
</tr>
<tr>
<td>password</td>
<td>YES</td>
<td>string</td>
<td>authentication password, depends on authenticationmethod</td>
</tr>
<tr>
<td>max_api_keys</td>
<td>NO</td>
<td>integer</td>
<td>max number of API keys the client can create</td>
</tr>
<tr>
<td>authenticationtype</td>
<td>NO</td>
<td>string</td>
<td>one of methods</td>
</tr>
<tr>
<td>status</td>
<td>NO</td>
<td>string</td>
<td>enabled, disabled, or removed</td>
</tr>
<tr>
<td>maxobjects</td>
<td>NO</td>
<td>integer</td>
<td>max number of objects this client can create</td>
</tr>
</tbody></table>
<h2 id='add-api-to-client'>Add API to Client</h2><pre class="highlight java tab-java"><code><span class="n">see</span> <span class="n">the</span> <span class="n">RESTful</span> <span class="n">column</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="nx">see</span> <span class="nx">the</span> <span class="nx">RESTful</span> <span class="nx">column</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">see</span> <span class="n">the</span> <span class="n">RESTful</span> <span class="n">column</span>
</code></pre><pre class="highlight shell tab-shell"><code>see the RESTful column
</code></pre><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"nonce"</span><span class="p">:</span><span class="s2">"d"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"version"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"function"</span><span class="p">:</span><span class="w"> </span><span class="s2">"addapi"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"environment"</span><span class="p">:</span><span class="s2">"dev"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"client"</span><span class="p">:{</span><span class="w">
        </span><span class="s2">"authentication"</span><span class="p">:</span><span class="w"> </span><span class="s2">"password"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dc5c2081-2a13-4566-ac8d-592ee955dc48"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"password"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1067...................71e0f53"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"endpoint"</span><span class="p">:{</span><span class="w">
        </span><span class="s2">"country"</span><span class="p">:</span><span class="s2">"gb"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>The request uses the following URL:</p>

<p><code>https://hut:8445/api/v1/client</code></p>

<table><thead>
<tr>
<th>name</th>
<th>optional</th>
<th>type</th>
<th>note</th>
</tr>
</thead><tbody>
<tr>
<td>nonce</td>
<td>NO</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>version</td>
<td>NO</td>
<td>integer</td>
<td>must be 1</td>
</tr>
<tr>
<td>function</td>
<td>NO</td>
<td>must be &quot;addapi&quot;</td>
<td></td>
</tr>
<tr>
<td>environment</td>
<td>NO</td>
<td>must be &quot;dev&quot;, &quot;test&quot;, or &quot;prod&quot;</td>
<td></td>
</tr>
<tr>
<td>client</td>
<td>NO</td>
<td>sequence</td>
<td></td>
</tr>
<tr>
<td>endpoint</td>
<td>NO</td>
<td>sequence</td>
<td>properties of the client server to identify best Enigma Bridge servers</td>
</tr>
</tbody></table>
<h3 id='structure-of-39-client-39-2'>Structure of &#39;client&#39;</h3>
<table><thead>
<tr>
<th>name</th>
<th>optional</th>
<th>type</th>
<th>note</th>
</tr>
</thead><tbody>
<tr>
<td>authentication</td>
<td>NO</td>
<td>string</td>
<td>at the moment must be &quot;password&quot;</td>
</tr>
<tr>
<td>username</td>
<td>NO</td>
<td>string</td>
<td>as provided during registration</td>
</tr>
<tr>
<td>password</td>
<td>NO</td>
<td>string</td>
<td>as provided during registration</td>
</tr>
</tbody></table>
<h3 id='structure-of-39-endpoint-39'>Structure of &#39;endpoint&#39;</h3>
<table><thead>
<tr>
<th>name</th>
<th>optional</th>
<th>type</th>
<th>note</th>
</tr>
</thead><tbody>
<tr>
<td>country</td>
<td>YES</td>
<td>string</td>
<td>ISO country code</td>
</tr>
<tr>
<td>email</td>
<td>YES</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>productcode</td>
<td>YES</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>instancetype</td>
<td>YES</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>network</td>
<td>YES</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>location</td>
<td>YES</td>
<td>pair of float</td>
<td></td>
</tr>
<tr>
<td>ipv4</td>
<td>YES</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>ipv6</td>
<td>YES</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>hostid</td>
<td>YES</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>
<pre class="highlight java tab-java"><code><span class="n">see</span> <span class="n">the</span> <span class="n">RESTful</span> <span class="n">column</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="nx">see</span> <span class="nx">the</span> <span class="nx">RESTful</span> <span class="nx">column</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">see</span> <span class="n">the</span> <span class="n">RESTful</span> <span class="n">column</span>
</code></pre><pre class="highlight shell tab-shell"><code>see the RESTful column
</code></pre><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"version"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="s2">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success (ok)"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="mi">36864</span><span class="p">,</span><span class="w">
  </span><span class="s2">"nonce"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1475078668177</span><span class="p">,</span><span class="w">
  </span><span class="s2">"response"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"apikey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0b75.................d057593b"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"servers"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"gb_cambridge_damselfly"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"domain"</span><span class="p">:</span><span class="w"> </span><span class="s2">"default"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"environment"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dev"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"enrolEndpoints"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="s2">"protocol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tcp"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"port"</span><span class="p">:</span><span class="w"> </span><span class="mi">11112</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="s2">"protocol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"port"</span><span class="p">:</span><span class="w"> </span><span class="mi">11182</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="s2">"useEndpoints"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="s2">"protocol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tcp"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"port"</span><span class="p">:</span><span class="w"> </span><span class="mi">11110</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="s2">"protocol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"port"</span><span class="p">:</span><span class="w"> </span><span class="mi">11180</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="s2">"fqdn"</span><span class="p">:</span><span class="w"> </span><span class="s2">"site2.enigmabridge.com"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"operations"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"enabled"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"operation"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w">
        </span><span class="s2">"operationname"</span><span class="p">:</span><span class="w"> </span><span class="s2">"basic_aes128_encrypt"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"enabled"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"operation"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
        </span><span class="s2">"operationname"</span><span class="p">:</span><span class="w"> </span><span class="s2">"basic_rsa1024_decrypt"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"enabled"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"operation"</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w">
        </span><span class="s2">"operationname"</span><span class="p">:</span><span class="w"> </span><span class="s2">"basic_rsa2048_decrypt"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"enabled"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>A response example is on the right. The new items are:</p>

<table><thead>
<tr>
<th>name</th>
<th>optional</th>
<th>type</th>
<th>note</th>
</tr>
</thead><tbody>
<tr>
<td>apikey</td>
<td>NO</td>
<td>string</td>
<td>apikey used to authenticate requests</td>
</tr>
<tr>
<td><strong>servers</strong></td>
<td>NO</td>
<td>array</td>
<td>connection details for Enigma Bridge servers</td>
</tr>
<tr>
<td>operations</td>
<td>NO</td>
<td>array</td>
<td>list of operations available for the API key</td>
</tr>
</tbody></table>
<h3 id='structure-of-39-servers-39-each-item'>Structure of &#39;servers&#39; each item</h3>
<table><thead>
<tr>
<th>name</th>
<th>optional</th>
<th>type</th>
<th>note</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>NO</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>domain</td>
<td>NO</td>
<td>string</td>
<td>name of Enigma Bridge security domain</td>
</tr>
<tr>
<td>environment</td>
<td>NO</td>
<td>string</td>
<td>&quot;dev&quot; or &quot;test&quot; or &quot;prod&quot;</td>
</tr>
<tr>
<td>enrolendpoints</td>
<td>NO</td>
<td>array</td>
<td>array of {protocol,port}</td>
</tr>
<tr>
<td>useendpoints</td>
<td>NO</td>
<td>array</td>
<td>array of {protocol,port}</td>
</tr>
</tbody></table>
<h2 id='view-api-of-client'>View API of Client</h2><pre class="highlight java tab-java"><code><span class="n">see</span> <span class="n">the</span> <span class="n">RESTful</span> <span class="n">column</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="nx">see</span> <span class="nx">the</span> <span class="nx">RESTful</span> <span class="nx">column</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">see</span> <span class="n">the</span> <span class="n">RESTful</span> <span class="n">column</span>
</code></pre><pre class="highlight shell tab-shell"><code>see the RESTful column
</code></pre><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"nonce"</span><span class="p">:</span><span class="s2">"my nonce"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"version"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"function"</span><span class="p">:</span><span class="w"> </span><span class="s2">"showapi"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"environment"</span><span class="p">:</span><span class="s2">"dev"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"client"</span><span class="p">:{</span><span class="w">
        </span><span class="s2">"authentication"</span><span class="p">:</span><span class="w"> </span><span class="s2">"password"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dc5c2081-2a13-4566-ac8d-592ee955dc48"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"password"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1067....................1e0f53"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"apidata"</span><span class="p">:{</span><span class="w">
        </span><span class="s2">"apikey"</span><span class="p">:</span><span class="s2">"0b75f...............d057593b"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>The request uses the following URL:</p>

<p><code>https://hut:8445/api/v1/client</code></p>

<p>Clients can repeatedly request information about their API keys.</p>

<table><thead>
<tr>
<th>name</th>
<th>optional</th>
<th>type</th>
<th>note</th>
</tr>
</thead><tbody>
<tr>
<td>nonce</td>
<td>NO</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>version</td>
<td>NO</td>
<td>integer</td>
<td>must be 1</td>
</tr>
<tr>
<td>function</td>
<td>NO</td>
<td>must be &quot;showapi&quot;</td>
<td></td>
</tr>
<tr>
<td>environment</td>
<td>NO</td>
<td>must be &quot;dev&quot;, &quot;test&quot;, or &quot;prod&quot;</td>
<td></td>
</tr>
<tr>
<td>client</td>
<td>NO</td>
<td>sequence</td>
<td></td>
</tr>
<tr>
<td>apidata</td>
<td>NO</td>
<td>string</td>
<td>sequence of just &quot;apikey&quot; - string</td>
</tr>
</tbody></table>
<h3 id='structure-of-39-client-39-3'>Structure of &#39;client&#39;</h3>
<table><thead>
<tr>
<th>name</th>
<th>optional</th>
<th>type</th>
<th>note</th>
</tr>
</thead><tbody>
<tr>
<td>authentication</td>
<td>NO</td>
<td>string</td>
<td>at the moment must be &quot;password&quot;</td>
</tr>
<tr>
<td>username</td>
<td>NO</td>
<td>string</td>
<td>as provided during registration</td>
</tr>
<tr>
<td>password</td>
<td>NO</td>
<td>string</td>
<td>as provided during registration</td>
</tr>
</tbody></table>

<p>Responses have the same format as for &quot;addapi&quot; requests.</p>
<h1 id='apikey-endpoint-restful-api'>APIkey Endpoint - RESTful API</h1><h2 id='client-ip-address'>Client IP Address</h2><pre class="highlight java tab-java"><code><span class="n">see</span> <span class="n">the</span> <span class="n">RESTful</span> <span class="n">column</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="nx">see</span> <span class="nx">the</span> <span class="nx">RESTful</span> <span class="nx">column</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">see</span> <span class="n">the</span> <span class="n">RESTful</span> <span class="n">column</span>
</code></pre><pre class="highlight shell tab-shell"><code>see the RESTful column
</code></pre><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"nonce"</span><span class="p">:</span><span class="s2">"nonce"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"version"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"function"</span><span class="p">:</span><span class="s2">"clientip"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>The request uses the following URL:</p>

<p><code>https://hut:8445/api/v1/apikey</code></p>

<p>This function is generally available, it doesn&#39;t require any authentication of the client.</p>
<h3 id='response-3'>Response</h3><pre class="highlight java tab-java"><code><span class="n">see</span> <span class="n">the</span> <span class="n">RESTful</span> <span class="n">column</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="nx">see</span> <span class="nx">the</span> <span class="nx">RESTful</span> <span class="nx">column</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">see</span> <span class="n">the</span> <span class="n">RESTful</span> <span class="n">column</span>
</code></pre><pre class="highlight shell tab-shell"><code>see the RESTful column
</code></pre><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"version"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="s2">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success (ok)"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="mi">36864</span><span class="p">,</span><span class="w">
  </span><span class="s2">"nonce"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my nonce"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1475077216548</span><span class="p">,</span><span class="w">
  </span><span class="s2">"response"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"ipv4"</span><span class="p">:</span><span class="s2">"11.11.11.11"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"ipv6"</span><span class="p">:</span><span class="s2">"fe80::bae8:56ff:fe2e:ce68"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This is a typical response. The new items are:</p>

<table><thead>
<tr>
<th>name</th>
<th>optional</th>
<th>type</th>
<th>note</th>
</tr>
</thead><tbody>
<tr>
<td>ipv4</td>
<td>NO</td>
<td>string</td>
<td>it can be NULL</td>
</tr>
<tr>
<td>ipv6</td>
<td>NO</td>
<td>string</td>
<td>it can be NULL</td>
</tr>
</tbody></table>
<h2 id='list-operations'>List Operations</h2><pre class="highlight java tab-java"><code><span class="n">see</span> <span class="n">the</span> <span class="n">RESTful</span> <span class="n">column</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="nx">see</span> <span class="nx">the</span> <span class="nx">RESTful</span> <span class="nx">column</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">see</span> <span class="n">the</span> <span class="n">RESTful</span> <span class="n">column</span>
</code></pre><pre class="highlight shell tab-shell"><code>see the RESTful column
</code></pre><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"nonce"</span><span class="p">:</span><span class="s2">"nonce"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"version"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"function"</span><span class="p">:</span><span class="s2">"listops"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"environment"</span><span class="p">:</span><span class="s2">"dev"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"apidata"</span><span class="p">:{</span><span class="w">
        </span><span class="s2">"username"</span><span class="p">:</span><span class="s2">"dc5c2081-2a13-4566-ac8d-592ee955dc48"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"apikey"</span><span class="p">:</span><span class="s2">"0b75f...............d057593b"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>The request uses the following URL: </p>

<p><code>https://hut:8445/api/v1/apikey</code></p>
<h3 id='parameters-3'>Parameters</h3>
<table><thead>
<tr>
<th>name</th>
<th>optional</th>
<th>type</th>
<th>note</th>
</tr>
</thead><tbody>
<tr>
<td>username</td>
<td>NO</td>
<td>string</td>
<td>client username as provided during registration</td>
</tr>
<tr>
<td>apikey</td>
<td>NO</td>
<td>string</td>
<td>apikey as provided during registration</td>
</tr>
<tr>
<td>function</td>
<td>NO</td>
<td>string</td>
<td>must be &quot;listops&quot;</td>
</tr>
<tr>
<td>environment</td>
<td>NO</td>
<td>string</td>
<td>must be &quot;dev&quot;, &quot;test&quot;, or &quot;prod&quot;</td>
</tr>
</tbody></table>
<pre class="highlight java tab-java"><code><span class="n">see</span> <span class="n">the</span> <span class="n">RESTful</span> <span class="n">column</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="nx">see</span> <span class="nx">the</span> <span class="nx">RESTful</span> <span class="nx">column</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">see</span> <span class="n">the</span> <span class="n">RESTful</span> <span class="n">column</span>
</code></pre><pre class="highlight shell tab-shell"><code>see the RESTful column
</code></pre><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"version"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="s2">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success (ok)"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="mi">36864</span><span class="p">,</span><span class="w">
  </span><span class="s2">"nonce"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my nonce"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1475077216548</span><span class="p">,</span><span class="w">
  </span><span class="s2">"response"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"operations"</span><span class="p">:{</span><span class="w">
        </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="err">#sequence</span><span class="w"> </span><span class="err">with</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">operation</span><span class="w"> </span><span class="err">definition</span><span class="w">
            </span><span class="err">#actual</span><span class="w"> </span><span class="err">content</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">beyond</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">scope</span><span class="w"> </span><span class="err">of</span><span class="w">
            </span><span class="err">#this</span><span class="w"> </span><span class="err">documentation</span><span class="w"> </span><span class="err">at</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">moment</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This is a typical response. The new items are:</p>

<table><thead>
<tr>
<th>name</th>
<th>optional</th>
<th>type</th>
<th>note</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>NO</td>
<td>integer</td>
<td>status code - see Error codes</td>
</tr>
<tr>
<td>error</td>
<td>NO</td>
<td>string</td>
<td>text explaining the error code</td>
</tr>
<tr>
<td>timestamp</td>
<td>NO</td>
<td>long</td>
<td>timestamp of the response</td>
</tr>
<tr>
<td>response</td>
<td>NO</td>
<td>sequence</td>
<td><strong>operations</strong></td>
</tr>
</tbody></table>
<h3 id='structure-of-39-operations-39'>Structure of &#39;operations&#39;</h3>
<table><thead>
<tr>
<th>name</th>
<th>optional</th>
<th>type</th>
<th>note</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>NO</td>
<td>sequence</td>
<td>definition for new operations</td>
</tr>
</tbody></table>
<h2 id='enrol-for-dns-domain'>Enrol for DNS Domain</h2>
<aside class="notice">
<strong>api</strong> endpoint does not use client password. This password is not needed for APIkey related calls and should not be present in the client endpoint.
</aside>
<pre class="highlight java tab-java"><code><span class="n">see</span> <span class="n">the</span> <span class="n">RESTful</span> <span class="n">column</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="nx">see</span> <span class="nx">the</span> <span class="nx">RESTful</span> <span class="nx">column</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">see</span> <span class="n">the</span> <span class="n">RESTful</span> <span class="n">column</span>
</code></pre><pre class="highlight shell tab-shell"><code>see the RESTful column
</code></pre><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"nonce"</span><span class="p">:</span><span class="s2">"my nonce"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"version"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"function"</span><span class="p">:</span><span class="w"> </span><span class="s2">"enroldomain"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"environment"</span><span class="p">:</span><span class="s2">"dev"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"apidata"</span><span class="p">:{</span><span class="w">
        </span><span class="s2">"username"</span><span class="p">:</span><span class="s2">"dc5c2081-2a13-4566-ac8d-592ee955dc48"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"apikey"</span><span class="p">:</span><span class="s2">"0b75f...............d057593b"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"certificate"</span><span class="p">:</span><span class="s2">"base64 encoded X.509 certificate"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>The request uses the following URL:</p>

<p><code>https://hut:8445/api/v1/apikey</code></p>
<h3 id='structure-of-39-apidata-39'>Structure of &#39;apidata&#39;</h3>
<table><thead>
<tr>
<th>name</th>
<th>optional</th>
<th>type</th>
<th>note</th>
</tr>
</thead><tbody>
<tr>
<td>username</td>
<td>NO</td>
<td>string</td>
<td>client username as provided during registration</td>
</tr>
<tr>
<td>apikey</td>
<td>NO</td>
<td>string</td>
<td>apikey as provided during registration</td>
</tr>
<tr>
<td>certificate</td>
<td>NO</td>
<td>string</td>
<td>base64 encoded certificate - vehicle to provide public key</td>
</tr>
</tbody></table>
<h3 id='response-4'>Response</h3><pre class="highlight java tab-java"><code><span class="n">see</span> <span class="n">the</span> <span class="n">RESTful</span> <span class="n">column</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="nx">see</span> <span class="nx">the</span> <span class="nx">RESTful</span> <span class="nx">column</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">see</span> <span class="n">the</span> <span class="n">RESTful</span> <span class="n">column</span>
</code></pre><pre class="highlight shell tab-shell"><code>see the RESTful column
</code></pre><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"version"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success (ok)"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="mi">36864</span><span class="p">,</span><span class="w">
    </span><span class="s2">"nonce"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my nonce"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1475078668177</span><span class="p">,</span><span class="w">
    </span><span class="s2">"response"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"domain"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pki.enigmabridge.com"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"controllers"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ns.enigmabridge.com"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="s2">"status"</span><span class="p">:</span><span class="s2">"enabled"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h2 id='get-challenge'>Get Challenge</h2>
<aside class="notice">
<strong>api</strong> endpoint does not use client password. This password is not needed for APIkey related calls and should not be present in the client endpoint.
</aside>
<pre class="highlight java tab-java"><code><span class="n">see</span> <span class="n">the</span> <span class="n">RESTful</span> <span class="n">column</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="nx">see</span> <span class="nx">the</span> <span class="nx">RESTful</span> <span class="nx">column</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">see</span> <span class="n">the</span> <span class="n">RESTful</span> <span class="n">column</span>
</code></pre><pre class="highlight shell tab-shell"><code>see the RESTful column
</code></pre><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"nonce"</span><span class="p">:</span><span class="s2">"my nonce"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"version"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"function"</span><span class="p">:</span><span class="w"> </span><span class="s2">"getdomainchallenge"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"environment"</span><span class="p">:</span><span class="s2">"dev"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"apidata"</span><span class="p">:{</span><span class="w">
        </span><span class="s2">"ipv4"</span><span class="p">:</span><span class="s2">"IPv4 provided by the client"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"ipv6"</span><span class="p">:</span><span class="s2">"IPv6 provided by the client"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"private"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="s2">"username"</span><span class="p">:</span><span class="s2">"dc5c2081-2a13-4566-ac8d-592ee955dc48"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"apikey"</span><span class="p">:</span><span class="s2">"0b75f...............d057593b"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>The request uses the following URL:</p>

<p><code>https://hut:8445/api/v1/apikey</code></p>

<table><thead>
<tr>
<th>name</th>
<th>optional</th>
<th>type</th>
<th>note</th>
</tr>
</thead><tbody>
<tr>
<td>username</td>
<td>NO</td>
<td>string</td>
<td>client username as provided during registration</td>
</tr>
<tr>
<td>ipv4</td>
<td>YES</td>
<td>string</td>
<td>ipv4 that will be tested</td>
</tr>
<tr>
<td>ipv6</td>
<td>YES</td>
<td>string</td>
<td>ipv6 that will be tested</td>
</tr>
<tr>
<td>private</td>
<td>NO</td>
<td>boolean</td>
<td>default value is &quot;false&quot;; if true, the supplied IP addresses are private and will not be used for any verification</td>
</tr>
</tbody></table>

<p>If IP addresses are marked as private, we will check whether they are from the expected range. I.e., fc00::/7 for IPv6 and 10.0.0.0/8, 172.16.0.0/12, or 192.168.0.0/16 for IPv4.</p>
<pre class="highlight java tab-java"><code><span class="n">see</span> <span class="n">the</span> <span class="n">RESTful</span> <span class="n">column</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="nx">see</span> <span class="nx">the</span> <span class="nx">RESTful</span> <span class="nx">column</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">see</span> <span class="n">the</span> <span class="n">RESTful</span> <span class="n">column</span>
</code></pre><pre class="highlight shell tab-shell"><code>see the RESTful column
</code></pre><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"version"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success (ok)"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="mi">36864</span><span class="p">,</span><span class="w">
    </span><span class="s2">"nonce"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my nonce"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1475078668177</span><span class="p">,</span><span class="w">
    </span><span class="s2">"response"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"challenge"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a random string for authenticated requests"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"authentication"</span><span class="p">:</span><span class="w"> </span><span class="s2">"signature"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>The response to these requests provides a <strong>challenge</strong> that has to be used to authenticate requests like <strong>Update Domain</strong>.</p>
<h2 id='update-domain'>Update Domain</h2>
<aside class="notice">
<strong>api</strong> endpoint does not use client password. This password is not needed for APIkey related calls and should not be present in the client endpoint.
</aside>
<pre class="highlight java tab-java"><code><span class="n">see</span> <span class="n">the</span> <span class="n">RESTful</span> <span class="n">column</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="nx">see</span> <span class="nx">the</span> <span class="nx">RESTful</span> <span class="nx">column</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">see</span> <span class="n">the</span> <span class="n">RESTful</span> <span class="n">column</span>
</code></pre><pre class="highlight shell tab-shell"><code>see the RESTful column
</code></pre><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"nonce"</span><span class="p">:</span><span class="s2">"my nonce"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"version"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"function"</span><span class="p">:</span><span class="w"> </span><span class="s2">"updatedomain"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"environment"</span><span class="p">:</span><span class="s2">"dev"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"apidata"</span><span class="p">:{</span><span class="w">
        </span><span class="s2">"username"</span><span class="p">:</span><span class="s2">"dc5c2081-2a13-4566-ac8d-592ee955dc48"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"apikey"</span><span class="p">:</span><span class="s2">"0b75f...............d057593b"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"dnsdata"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
                        </span><span class="s2">"type"</span><span class="p">:</span><span class="s2">"txt"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"domain"</span><span class="p">:</span><span class="s2">"walsall1.pki.enigmabridge.com"</span><span class="p">,</span><span class="w"> 
                        </span><span class="s2">"name"</span><span class="p">:</span><span class="s2">"_acme-challenge"</span><span class="p">,</span><span class="w"> 
                        </span><span class="s2">"value"</span><span class="p">:</span><span class="s2">"random string"</span><span class="p">},</span><span class="w">
                    </span><span class="p">{</span><span class="w">
                        </span><span class="s2">"type"</span><span class="p">:</span><span class="s2">"cname"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"domain"</span><span class="p">:</span><span class="s2">"walsall1.pki.enigmabridge.com"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"name"</span><span class="p">:</span><span class="s2">"cloud"</span><span class="p">}</span><span class="w">
                   </span><span class="p">],</span><span class="w">
        </span><span class="s2">"authentication"</span><span class="p">:</span><span class="s2">"signature"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"response"</span><span class="p">:</span><span class="s2">"value derived from previously requested challenge"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"signature"</span><span class="p">:{</span><span class="w">
        </span><span class="s2">"payload"</span><span class="p">:</span><span class="s2">"apidata-base64"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"value"</span><span class="p">:</span><span class="s2">"string-base64-signature"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>The request uses the following URL:</p>

<p><code>https://hut:8445/api/v1/apikey</code></p>

<table><thead>
<tr>
<th>name</th>
<th>optional</th>
<th>type</th>
<th>note</th>
</tr>
</thead><tbody>
<tr>
<td>apidata</td>
<td>YES</td>
<td>string</td>
<td>not needed if signature is present</td>
</tr>
<tr>
<td>signature</td>
<td>YES</td>
<td>string</td>
<td>only if method is &quot;signature&quot;;</td>
</tr>
</tbody></table>
<h3 id='structure-of-39-apidata-39-2'>Structure of &#39;apidata&#39;</h3>
<table><thead>
<tr>
<th>name</th>
<th>optional</th>
<th>type</th>
<th>note</th>
</tr>
</thead><tbody>
<tr>
<td>username</td>
<td>NO</td>
<td>string</td>
<td>as assigned</td>
</tr>
<tr>
<td>apikey</td>
<td>NO</td>
<td>string</td>
<td>as assigned</td>
</tr>
<tr>
<td>dnsdata</td>
<td>YES</td>
<td>array</td>
<td>an array of new DNS records that will be added to the domain, each record is defined by a name, type, and value</td>
</tr>
<tr>
<td>authentication</td>
<td>NO</td>
<td>string</td>
<td>as requested with a challenge</td>
</tr>
<tr>
<td>response</td>
<td>NO</td>
<td>string</td>
<td>either the challenge itself or a derived value (e.g., OCRA)</td>
</tr>
</tbody></table>
<h3 id='structure-of-39-dnsdata-39'>Structure of &#39;dnsdata&#39;</h3>
<p>We currently support &quot;TXT&quot; and &quot;CNAME&quot; DNS records only.</p>

<table><thead>
<tr>
<th>name</th>
<th>optional</th>
<th>type</th>
<th>note</th>
</tr>
</thead><tbody>
<tr>
<td>type</td>
<td>NO</td>
<td>string</td>
<td>&quot;TXT&quot;</td>
</tr>
<tr>
<td>name</td>
<td>NO</td>
<td>string</td>
<td>name of the new record</td>
</tr>
<tr>
<td>value</td>
<td>NO</td>
<td>string</td>
<td>value of the new record,</td>
</tr>
<tr>
<td>domain</td>
<td>YES</td>
<td>string</td>
<td>a particular domain to be updated, if not present, all relevant domains will be udpated, if none matches -&gt; error</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th>name</th>
<th>optional</th>
<th>type</th>
<th>note</th>
</tr>
</thead><tbody>
<tr>
<td>type</td>
<td>NO</td>
<td>string</td>
<td>&quot;CNAME&quot;</td>
</tr>
<tr>
<td>name</td>
<td>NO</td>
<td>string</td>
<td>name of the new subdomain</td>
</tr>
<tr>
<td>domain</td>
<td>YES</td>
<td>string</td>
<td>a particular domain to be updated, if not present, all relevant domains will be udpated, if none matches -&gt; error</td>
</tr>
</tbody></table>
<pre class="highlight java tab-java"><code><span class="n">see</span> <span class="n">the</span> <span class="n">RESTful</span> <span class="n">column</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="nx">see</span> <span class="nx">the</span> <span class="nx">RESTful</span> <span class="nx">column</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">see</span> <span class="n">the</span> <span class="n">RESTful</span> <span class="n">column</span>
</code></pre><pre class="highlight shell tab-shell"><code>see the RESTful column
</code></pre><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"version"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success (ok)"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="mi">36864</span><span class="p">,</span><span class="w">
    </span><span class="s2">"nonce"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my nonce"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1475078668177</span><span class="p">,</span><span class="w">
    </span><span class="s2">"response"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"domains"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"assigned domain name"</span><span class="p">],</span><span class="w">
        </span><span class="s2">"addresses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"registered IP addresses "</span><span class="p">],</span><span class="w">
        </span><span class="s2">"privateIP"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"enabled"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='structure-of-39-response-39-2'>Structure of &#39;response&#39;</h3>
<table><thead>
<tr>
<th>name</th>
<th>optional</th>
<th>type</th>
<th>note</th>
</tr>
</thead><tbody>
<tr>
<td>domains</td>
<td>NO</td>
<td>array of DNS names</td>
<td>a list of domain names registered for the API key</td>
</tr>
<tr>
<td>addresses</td>
<td>NO</td>
<td>array of IP addresses</td>
<td>a list of IPv6 and IPv4 IP addresses associated with the API key</td>
</tr>
<tr>
<td>privateIP</td>
<td>NO</td>
<td>boolean</td>
<td>returns true if the API key host is inside a private network</td>
</tr>
<tr>
<td>status</td>
<td>NO</td>
<td>string</td>
<td>a status of the DNS registration (disabled, enabled, removed, created, unlocked, not_assigned</td>
</tr>
</tbody></table>
<h2 id='install-status'>Install Status</h2>
<p>This function allows the API key announce its current status and communicate any additional context information that may be needed for support or communication requiring an independent channel for security.</p>

<aside class="notice">
<strong>api</strong> endpoint does not use client password. This password is not needed for APIkey related calls and should not be present in the client endpoint.
</aside>
<pre class="highlight java tab-java"><code><span class="n">see</span> <span class="n">the</span> <span class="n">RESTful</span> <span class="n">column</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="nx">see</span> <span class="nx">the</span> <span class="nx">RESTful</span> <span class="nx">column</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">see</span> <span class="n">the</span> <span class="n">RESTful</span> <span class="n">column</span>
</code></pre><pre class="highlight shell tab-shell"><code>see the RESTful column
</code></pre><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"nonce"</span><span class="p">:</span><span class="s2">"my nonce"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"version"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"function"</span><span class="p">:</span><span class="w"> </span><span class="s2">"installstatus"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"environment"</span><span class="p">:</span><span class="s2">"dev"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"apidata"</span><span class="p">:{</span><span class="w">
        </span><span class="s2">"username"</span><span class="p">:</span><span class="s2">"dc5c2081-2a13-4566-ac8d-592ee955dc48"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"apikey"</span><span class="p">:</span><span class="s2">"0b75f...............d057593b"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"statusdata"</span><span class="p">:{</span><span class="w">
        </span><span class="s2">"password"</span><span class="p">:</span><span class="s2">"very secret password"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"status"</span><span class="p">:</span><span class="mi">36864</span><span class="p">,</span><span class="w">
        </span><span class="s2">"error"</span><span class="p">:</span><span class="s2">"success (ok)"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"duration"</span><span class="p">:</span><span class="mi">1800</span><span class="p">,</span><span class="w">
        </span><span class="s2">"detail"</span><span class="p">:</span><span class="s2">"logs, details as a JSON message"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"key"</span><span class="p">:</span><span class="s2">"base64encoded key blob"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"email"</span><span class="p">:</span><span class="s2">"important@top.world"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>The request uses the following URL:</p>

<p><code>https://hut:8445/api/v1/apikey</code></p>

<p>This function will update status of the APIkey consumer/host. This information can be used for further communication with clients or contact clients. </p>

<p>The structure and particular meaning of items in &quot;statusdata&quot; depends on the client type.</p>

<table><thead>
<tr>
<th>name</th>
<th>optional</th>
<th>type</th>
<th>note</th>
</tr>
</thead><tbody>
<tr>
<td>username</td>
<td>NO</td>
<td>string</td>
<td>as assigned</td>
</tr>
<tr>
<td>apikey</td>
<td>NO</td>
<td>string</td>
<td>as assigned</td>
</tr>
</tbody></table>
<h3 id='structure-of-39-statusdata-39'>Structure of &#39;statusdata&#39;</h3>
<table><thead>
<tr>
<th>name</th>
<th>optional</th>
<th>type</th>
<th>note</th>
</tr>
</thead><tbody>
<tr>
<td>password</td>
<td>YES</td>
<td>string</td>
<td>generated on the apikey host</td>
</tr>
<tr>
<td>status</td>
<td>NO</td>
<td>integer</td>
<td>status code</td>
</tr>
<tr>
<td>error</td>
<td>NO</td>
<td>string</td>
<td>provided by the apikey</td>
</tr>
<tr>
<td>duration</td>
<td>YES</td>
<td>integer</td>
<td>duration of an operation in seconds</td>
</tr>
<tr>
<td>key</td>
<td>YES</td>
<td>string</td>
<td>any key that we need to pass on</td>
</tr>
<tr>
<td>detail</td>
<td>YES</td>
<td>string</td>
<td>JSON message with details we need to store</td>
</tr>
<tr>
<td>email</td>
<td>YES</td>
<td>email</td>
<td>contact details of whoever will be contacted</td>
</tr>
</tbody></table>
<pre class="highlight java tab-java"><code><span class="n">see</span> <span class="n">the</span> <span class="n">RESTful</span> <span class="n">column</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="nx">see</span> <span class="nx">the</span> <span class="nx">RESTful</span> <span class="nx">column</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">see</span> <span class="n">the</span> <span class="n">RESTful</span> <span class="n">column</span>
</code></pre><pre class="highlight shell tab-shell"><code>see the RESTful column
</code></pre><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"version"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success (ok)"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="mi">36864</span><span class="p">,</span><span class="w">
    </span><span class="s2">"nonce"</span><span class="p">:</span><span class="s2">"my nonce"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1475078668177</span><span class="p">,</span><span class="w">
    </span><span class="s2">"response"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>The response to this query is just a result of the processing.</p>
<h2 id='unlock-domain'>Unlock Domain</h2>
<aside class="notice">
<strong>api</strong> endpoint does not use client password. This password is not needed for APIkey related calls and should not be present in the client endpoint.
</aside>
<pre class="highlight java tab-java"><code><span class="n">see</span> <span class="n">the</span> <span class="n">RESTful</span> <span class="n">column</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="nx">see</span> <span class="nx">the</span> <span class="nx">RESTful</span> <span class="nx">column</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">see</span> <span class="n">the</span> <span class="n">RESTful</span> <span class="n">column</span>
</code></pre><pre class="highlight shell tab-shell"><code>see the RESTful column
</code></pre><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"nonce"</span><span class="p">:</span><span class="s2">"my nonce"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"version"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"function"</span><span class="p">:</span><span class="w"> </span><span class="s2">"unlockdomain"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"environment"</span><span class="p">:</span><span class="s2">"dev"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"apidata"</span><span class="p">:{</span><span class="w">
        </span><span class="s2">"username"</span><span class="p">:</span><span class="s2">"dc5c2081-2a13-4566-ac8d-592ee955dc48"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"apikey"</span><span class="p">:</span><span class="s2">"0b75f...............d057593b"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>The request uses the following URL:</p>

<p><code>https://hut:8445/api/v1/apikey</code></p>

<p>This function will &quot;unlock&quot; the domain record for the given API key so it can be
assigned to a new IP address.</p>

<table><thead>
<tr>
<th>name</th>
<th>optional</th>
<th>type</th>
<th>note</th>
</tr>
</thead><tbody>
<tr>
<td>apidata</td>
<td>NO</td>
<td>string</td>
<td>authentication of the client</td>
</tr>
</tbody></table>
<h3 id='structure-of-39-apidata-39-3'>Structure of &#39;apidata&#39;</h3>
<table><thead>
<tr>
<th>name</th>
<th>optional</th>
<th>type</th>
<th>note</th>
</tr>
</thead><tbody>
<tr>
<td>username</td>
<td>NO</td>
<td>string</td>
<td>as assigned</td>
</tr>
<tr>
<td>apikey</td>
<td>NO</td>
<td>string</td>
<td>as assigned</td>
</tr>
</tbody></table>
<pre class="highlight java tab-java"><code><span class="n">see</span> <span class="n">the</span> <span class="n">RESTful</span> <span class="n">column</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="nx">see</span> <span class="nx">the</span> <span class="nx">RESTful</span> <span class="nx">column</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">see</span> <span class="n">the</span> <span class="n">RESTful</span> <span class="n">column</span>
</code></pre><pre class="highlight shell tab-shell"><code>see the RESTful column
</code></pre><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"version"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success (ok)"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="mi">36864</span><span class="p">,</span><span class="w">
    </span><span class="s2">"nonce"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my nonce"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1475078668177</span><span class="p">,</span><span class="w">
    </span><span class="s2">"response"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"status of the domain in EB backend"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h2 id='send-log-data'>Send Log Data</h2>
<aside class="notice">
<strong>api</strong> endpoint does not use client password. This password is not needed for APIkey related calls and should not be present in the client endpoint.
</aside>
<pre class="highlight java tab-java"><code><span class="n">see</span> <span class="n">the</span> <span class="n">RESTful</span> <span class="n">column</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="nx">see</span> <span class="nx">the</span> <span class="nx">RESTful</span> <span class="nx">column</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">see</span> <span class="n">the</span> <span class="n">RESTful</span> <span class="n">column</span>
</code></pre><pre class="highlight shell tab-shell"><code>see the RESTful column
</code></pre><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"nonce"</span><span class="p">:</span><span class="s2">"my nonce"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"version"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"function"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sendlog"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"environment"</span><span class="p">:</span><span class="s2">"dev"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"apidata"</span><span class="p">:{</span><span class="w">
        </span><span class="s2">"username"</span><span class="p">:</span><span class="s2">"dc5c2081-2a13-4566-ac8d-592ee955dc48"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"apikey"</span><span class="p">:</span><span class="s2">"0b75f...............d057593b"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"effort"</span><span class="p">:{</span><span class="w">
        </span><span class="s2">"preimage"</span><span class="p">:</span><span class="s2">"407696;1487584132;34.249.220.146;Trunk;854843"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"secondpreimage"</span><span class="p">:</span><span class="s2">"hex value"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"collision"</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"log"</span><span class="p">:</span><span class="w"> </span><span class="s2">"text data, with log events"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>The request uses the following URL:</p>

<p><code>https://hut:8445/api/v1/apikey</code></p>

<p>This function will store log data from the endpoint. If the endpoint has its API key, it should be used as it may be used as a protection against DDoS attacks. However, its presence is optional.</p>

<p>If the &quot;apidata&quot; is not present or invalid, the &quot;effort&quot; item must be present. Otherwise the request will be unsuccessful. The &quot;effort&quot; is not required if valid &quot;apidata&quot; is provided. The effort&#39;s goal is to slow down DDoS attacks by requiring clients to comput SHA-1 function collisions.</p>

<table><thead>
<tr>
<th>name</th>
<th>optional</th>
<th>type</th>
<th>note</th>
</tr>
</thead><tbody>
<tr>
<td>apidata</td>
<td>YES</td>
<td>string</td>
<td>authentication of the client</td>
</tr>
<tr>
<td>effort</td>
<td>NO</td>
<td>sequence</td>
<td></td>
</tr>
</tbody></table>
<h3 id='structure-of-39-apidata-39-4'>Structure of &#39;apidata&#39;</h3>
<table><thead>
<tr>
<th>name</th>
<th>optional</th>
<th>type</th>
<th>note</th>
</tr>
</thead><tbody>
<tr>
<td>username</td>
<td>NO</td>
<td>string</td>
<td>as assigned</td>
</tr>
<tr>
<td>apikey</td>
<td>NO</td>
<td>string</td>
<td>as assigned</td>
</tr>
</tbody></table>
<h3 id='structure-of-39-effort-39'>Structure of &#39;effort&#39;</h3>
<table><thead>
<tr>
<th>name</th>
<th>optional</th>
<th>type</th>
<th>note</th>
</tr>
</thead><tbody>
<tr>
<td>preimage</td>
<td>NO</td>
<td>string</td>
<td>unique identifier of the request, the format is random-number &quot;;&quot; timestamp &quot;;&quot; IP_address &quot;;&quot; client_version &quot;;&quot; nonce. All numbers are in decadic form.</td>
</tr>
<tr>
<td>collision</td>
<td>YES</td>
<td>int</td>
<td>how many bits of collision have been computed</td>
</tr>
</tbody></table>

<p>The server will compare the strength of the collision and if not satisfactory, the request will be declined.</p>
<pre class="highlight java tab-java"><code><span class="n">see</span> <span class="n">the</span> <span class="n">RESTful</span> <span class="n">column</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="nx">see</span> <span class="nx">the</span> <span class="nx">RESTful</span> <span class="nx">column</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">see</span> <span class="n">the</span> <span class="n">RESTful</span> <span class="n">column</span>
</code></pre><pre class="highlight shell tab-shell"><code>see the RESTful column
</code></pre><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"version"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success (ok)"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="mi">36864</span><span class="p">,</span><span class="w">
    </span><span class="s2">"nonce"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my nonce"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1475078668177</span><span class="p">,</span><span class="w">
    </span><span class="s2">"response"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"collision"</span><span class="p">:</span><span class="w"> </span><span class="err">integer</span><span class="p">,</span><span class="w">
        </span><span class="s2">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"reference number of the log record"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>name</th>
<th>optional</th>
<th>type</th>
<th>note</th>
</tr>
</thead><tbody>
<tr>
<td>collision</td>
<td>YES</td>
<td>string</td>
<td>the length of the collision required, only present if provided collision is not sufficient</td>
</tr>
<tr>
<td>reference</td>
<td>NO</td>
<td>string</td>
<td>it canbe empty string if errir</td>
</tr>
</tbody></table>

<p>If the request is declined because of insufficent collision strength, the required length/strength is present in the result</p>
<h1 id='authorizations-restful-api'>Authorizations - RESTful API</h1>
<p>Following sections are for internal use by Enigma Bridge. The APIs are not currently available to clients.</p>

<p>The request uses the following URL:</p>

<p>https://hut:8445/api/v1/business</p>
<h2 id='authorize-create'>Authorize Create</h2><pre class="highlight java tab-java"><code><span class="n">see</span> <span class="n">the</span> <span class="n">RESTful</span> <span class="n">column</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="nx">see</span> <span class="nx">the</span> <span class="nx">RESTful</span> <span class="nx">column</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">see</span> <span class="n">the</span> <span class="n">RESTful</span> <span class="n">column</span>
</code></pre><pre class="highlight shell tab-shell"><code>see the RESTful column
</code></pre><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"nonce"</span><span class="p">:</span><span class="s2">"nonce"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"version"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"function"</span><span class="p">:</span><span class="s2">"authorizecreate"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"environment"</span><span class="p">:</span><span class="s2">"dev"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"request"</span><span class="p">:{</span><span class="w">
        </span><span class="s2">"apikey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0b75f...............d057593b"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"objecttype"</span><span class="p">:</span><span class="err">&lt;integer</span><span class="w"> </span><span class="err">type</span><span class="w"> </span><span class="err">ID&gt;</span><span class="p">,</span><span class="w">
        </span><span class="s2">"objectpolicy"</span><span class="p">:{</span><span class="w">
            </span><span class="err">/*</span><span class="w"> </span><span class="err">copy</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">definition</span><span class="w"> </span><span class="err">as</span><span class="w"> </span><span class="err">provided</span><span class="w"> </span><span class="err">by</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">client</span><span class="w"> </span><span class="err">*/</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='response'>Response</h3><pre class="highlight java tab-java"><code><span class="n">see</span> <span class="n">the</span> <span class="n">RESTful</span> <span class="n">column</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="nx">see</span> <span class="nx">the</span> <span class="nx">RESTful</span> <span class="nx">column</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">see</span> <span class="n">the</span> <span class="n">RESTful</span> <span class="n">column</span>
</code></pre><pre class="highlight shell tab-shell"><code>see the RESTful column
</code></pre><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"nonce"</span><span class="p">:</span><span class="s2">"nonce"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"version"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"function"</span><span class="p">:</span><span class="s2">"authorizecreate"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"environment"</span><span class="p">:</span><span class="s2">"dev"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"request"</span><span class="p">:{</span><span class="w">
        </span><span class="s2">"apikey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0b75f...............d057593b"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"objecttype"</span><span class="p">:</span><span class="err">&lt;integer</span><span class="w"> </span><span class="err">type</span><span class="w"> </span><span class="err">ID&gt;</span><span class="p">,</span><span class="w">
        </span><span class="s2">"objectpolicy"</span><span class="p">:{</span><span class="w">
            </span><span class="err">/*</span><span class="w"> </span><span class="err">copy</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">definition</span><span class="w"> </span><span class="err">as</span><span class="w"> </span><span class="err">provided</span><span class="w"> </span><span class="err">by</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">client</span><span class="w"> </span><span class="err">*/</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h2 id='submit-new-object'>Submit new Object</h2><pre class="highlight java tab-java"><code><span class="n">see</span> <span class="n">the</span> <span class="n">RESTful</span> <span class="n">column</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="nx">see</span> <span class="nx">the</span> <span class="nx">RESTful</span> <span class="nx">column</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">see</span> <span class="n">the</span> <span class="n">RESTful</span> <span class="n">column</span>
</code></pre><pre class="highlight shell tab-shell"><code>see the RESTful column
</code></pre><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"nonce"</span><span class="p">:</span><span class="s2">"nonce"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"version"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"function"</span><span class="p">:</span><span class="s2">"authorizecreate"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"environment"</span><span class="p">:</span><span class="s2">"dev"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"request"</span><span class="p">:{</span><span class="w">
        </span><span class="s2">"apikey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0b75f...............d057593b"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"objecttype"</span><span class="p">:</span><span class="err">&lt;integer</span><span class="w"> </span><span class="err">type</span><span class="w"> </span><span class="err">ID&gt;</span><span class="p">,</span><span class="w">
        </span><span class="s2">"objectpolicy"</span><span class="p">:{</span><span class="w">
            </span><span class="err">/*</span><span class="w"> </span><span class="err">copy</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">definition</span><span class="w"> </span><span class="err">as</span><span class="w"> </span><span class="err">provided</span><span class="w"> </span><span class="err">by</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">client</span><span class="w"> </span><span class="err">*/</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='response-2'>Response</h3><h1 id='nbsp'>&nbsp;</h1><h1 id='nbsp-keychest-api-nbsp'>---&nbsp;--- KeyChest API ---&nbsp;---</h1><h1 id='keychest'>KeyChest</h1>
<aside class="notice">
We are working on the first version of the API documentation and more functions will be added.
</aside>

<p>Calls of the KeyChest API require an API key. Each client has to create its API key themselves but it can also request the 
KeyChest to generate one. We do not require this request to be authenticated to simplify automated enrolments.</p>
<h2 id='register-check-api-key-get'>Register/check API key - GET</h2>
<p>This call requests KeyChest to generate a suitable API key for a client. This key will be associated with an email address provided.</p>
<pre class="highlight java tab-java"><code><span class="s">"no data required"</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="s2">"no data required"</span>
</code></pre><pre class="highlight python tab-python"><code><span class="s">"no data required"</span>
</code></pre><pre class="highlight shell tab-shell"><code>curl https://keychest.net/api/v1.0/access/claim/me@myemail.com
</code></pre><pre class="highlight json tab-json"><code><span class="err">https</span><span class="p">:</span><span class="err">//keychest.net/api/v</span><span class="mf">1.0</span><span class="err">/access/claim/me@myemail.com</span><span class="w">
</span></code></pre>
<p>The endpoint of this call is:</p>

<p><code>https://keychest.net/api/v1.0/access/claim/{email}</code></p>
<h3 id='parameters'>Parameters</h3>
<table><thead>
<tr>
<th>name</th>
<th>optional</th>
<th>type</th>
<th>note</th>
</tr>
</thead><tbody>
<tr>
<td>email</td>
<td>NO</td>
<td>string</td>
<td>it must be a valid email address</td>
</tr>
</tbody></table>
<pre class="highlight java tab-java"><code><span class="n">see</span> <span class="n">the</span> <span class="n">RESTful</span> <span class="n">column</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="nx">see</span> <span class="nx">the</span> <span class="nx">RESTful</span> <span class="nx">column</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">see</span> <span class="n">the</span> <span class="n">RESTful</span> <span class="n">column</span>
</code></pre><pre class="highlight shell tab-shell"><code><span class="o">{</span>
    <span class="s2">"status"</span>: <span class="s2">"created"</span>,
    <span class="s2">"user"</span>: <span class="s2">"your@email.com"</span>,
    <span class="s2">"api_key"</span>: <span class="s2">"5b9b6aceb95011e7bb9f7fca73a26228"</span>
<span class="o">}</span>
</code></pre><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"created"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"user"</span><span class="p">:</span><span class="w"> </span><span class="s2">"your@email.com"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"api_key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5b9b6aceb95011e7bb9f7fca73a26228"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='response'>Response</h3>
<p>Response provides an api_key the client shall store and use for subsequent use of the KeyChest&#39;s API.</p>

<table><thead>
<tr>
<th>name</th>
<th>optional</th>
<th>type</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>NO</td>
<td>string</td>
<td>the result of processing - &quot;created&quot; if successful</td>
</tr>
<tr>
<td>user</td>
<td>NO</td>
<td>string</td>
<td>email address as provided by the client</td>
</tr>
<tr>
<td>api_key</td>
<td>NO</td>
<td>string</td>
<td>a new API key - the length is between 16 and 64 characters and can contain digits, letters, and &#39;-&#39;</td>
</tr>
</tbody></table>
<h2 id='register-check-api-key-post'>Register/check API key - POST</h2>
<p>This call requests KeyChest to check a provided API key, and register it if it is a new API key. This key will be associated with an email address provided.</p>
<pre class="highlight java tab-java"><code><span class="o">{</span>
    <span class="s">"email"</span><span class="o">:</span><span class="s">"your@email.com"</span><span class="o">,</span>
    <span class="s">"api_key"</span><span class="o">:</span><span class="s">"5b9b6aceb95011e7bb9f7fca73a26228"</span>
<span class="o">}</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="nx">see</span> <span class="nx">the</span> <span class="nx">RESTful</span> <span class="nx">column</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">see</span> <span class="n">the</span> <span class="n">RESTful</span> <span class="n">column</span>
</code></pre><pre class="highlight shell tab-shell"><code>curl -s -X POST -H <span class="s2">"Content-Type: application/json"</span> -d <span class="s1">'{"email":"your@email.com", "api_key":"5b9b6aceb95011e7bb9f7fca73a26228"}'</span> https://keychest.net/api/v1.0/access/claim
</code></pre><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"email"</span><span class="p">:</span><span class="s2">"your@email.com"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"api_key"</span><span class="p">:</span><span class="s2">"5b9b6aceb95011e7bb9f7fca73a26228"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>The endpoint of this call is:</p>

<p><code>https://keychest.net/api/v1.0/access/claim</code></p>
<h3 id='parameters-2'>Parameters</h3>
<table><thead>
<tr>
<th>name</th>
<th>optional</th>
<th>type</th>
<th>note</th>
</tr>
</thead><tbody>
<tr>
<td>email</td>
<td>NO</td>
<td>string</td>
<td>it must be a valid email address</td>
</tr>
<tr>
<td>api_key</td>
<td>NO</td>
<td>string</td>
<td>it must only contain letters, digits, and &#39;-&#39; and the length to be between 16 and 64 characters</td>
</tr>
</tbody></table>
<pre class="highlight java tab-java"><code><span class="n">see</span> <span class="n">the</span> <span class="n">RESTful</span> <span class="n">column</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="nx">see</span> <span class="nx">the</span> <span class="nx">RESTful</span> <span class="nx">column</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">see</span> <span class="n">the</span> <span class="n">RESTful</span> <span class="n">column</span>
</code></pre><pre class="highlight shell tab-shell"><code><span class="o">{</span>
    <span class="s2">"status"</span>: <span class="s2">"created"</span>,
    <span class="s2">"user"</span>: <span class="s2">"your@email.com"</span>,
    <span class="s2">"api_key"</span>: <span class="s2">"5b9b6aceb95011e7bb9f7fca73a26228"</span>
<span class="o">}</span>
</code></pre><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"created"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"user"</span><span class="p">:</span><span class="w"> </span><span class="s2">"your@email.com"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"api_key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5b9b6aceb95011e7bb9f7fca73a26228"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='response-2'>Response</h3>
<p>Response provides an api_key the client shall store and use for subsequent use of the KeyChest&#39;s API.</p>

<table><thead>
<tr>
<th>name</th>
<th>optional</th>
<th>type</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>NO</td>
<td>string</td>
<td>the result of processing - &quot;created&quot; if successful</td>
</tr>
<tr>
<td>user</td>
<td>NO</td>
<td>string</td>
<td>email address as provided by the client</td>
</tr>
<tr>
<td>api_key</td>
<td>NO</td>
<td>string</td>
<td>a new API key - the length is between 16 and 64 characters and can contain digits, letters, and &#39;-&#39;</td>
</tr>
</tbody></table>
<h2 id='add-domain-name'>Add domain name</h2>
<p>This API call adds a new domain name for monitoring. It can be used repeatedly for the same domain name and email address without any side-effects.</p>
<pre class="highlight java tab-java"><code><span class="o">{</span>
    <span class="s">"domain"</span><span class="o">:</span><span class="s">"fish.enigmabridge.com"</span><span class="o">,</span>
    <span class="s">"api_key"</span><span class="o">:</span><span class="s">"5b9b6aceb95011e7bb9f7fca73a26228"</span>
<span class="o">}</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="nx">see</span> <span class="nx">the</span> <span class="nx">RESTful</span> <span class="nx">column</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">see</span> <span class="n">the</span> <span class="n">RESTful</span> <span class="n">column</span>
</code></pre><pre class="highlight shell tab-shell"><code>curl -s -X POST -H <span class="s2">"Content-Type: application/json"</span> -d <span class="s1">'{"domain":"fish.enigmabridge.com", "api_key":"5b9b6aceb95011e7bb9f7fca73a26228"}'</span> https://keychest.net/api/v1.0/servers/add
</code></pre><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">   
    </span><span class="s2">"domain"</span><span class="p">:</span><span class="s2">"fish.enigmabridge.com"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"api_key"</span><span class="p">:</span><span class="s2">"5b9b6aceb95011e7bb9f7fca73a26228"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>The POST endpoint of this call is:</p>

<p><code>https://keychest.net/api/v1.0/servers/add</code></p>
<h3 id='parameters-3'>Parameters</h3>
<table><thead>
<tr>
<th>name</th>
<th>optional</th>
<th>type</th>
<th>note</th>
</tr>
</thead><tbody>
<tr>
<td>domain</td>
<td>NO</td>
<td>string</td>
<td>it must be a valid domain name</td>
</tr>
<tr>
<td>api_key</td>
<td>NO</td>
<td>string</td>
<td>a valid and registered API key</td>
</tr>
</tbody></table>
<pre class="highlight java tab-java"><code><span class="n">see</span> <span class="n">the</span> <span class="n">RESTful</span> <span class="n">column</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="nx">see</span> <span class="nx">the</span> <span class="nx">RESTful</span> <span class="nx">column</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">see</span> <span class="n">the</span> <span class="n">RESTful</span> <span class="n">column</span>
</code></pre><pre class="highlight shell tab-shell"><code><span class="o">{</span>
    <span class="s2">"status"</span>: <span class="s2">"success"</span>,
    <span class="s2">"id"</span>: <span class="s2">"671d1b10-bb1d-11e7-bae1-571d93cf1c53"</span>,
    <span class="s2">"key"</span>: <span class="s2">"da70d5e4864f57e910e66bd21c685b26"</span>,
    <span class="s2">"domain"</span>: <span class="s2">"fish.enigmabridge.com
}
</span></code></pre><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"671d1b10-bb1d-11e7-bae1-571d93cf1c53"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"da70d5e4864f57e910e66bd21c685b26"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"domain"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fish.enigmabridge.com
}
</span></code></pre><h3 id='response-3'>Response</h3>
<p>Response returns the result of the processing and an additional information.</p>

<table><thead>
<tr>
<th>name</th>
<th>optional</th>
<th>type</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>NO</td>
<td>string</td>
<td>&quot;success&quot; means a successful processing</td>
</tr>
<tr>
<td>id</td>
<td>NO</td>
<td>string</td>
<td>a handle for repeated calls if asynchronous integration is implemented</td>
</tr>
<tr>
<td>key</td>
<td>NO</td>
<td>string</td>
<td>internal representation of the domain name</td>
</tr>
<tr>
<td>domain</td>
<td>NO</td>
<td>string</td>
<td>cleaned domain name that was registered</td>
</tr>
</tbody></table>
<h2 id='check-certificate-expiration'>Check certificate expiration</h2>
<p>This API call returns information about certificate expiration for a given domain name. It will return detailed information for all IP addresses known for the given
domain name.</p>
<pre class="highlight java tab-java"><code><span class="n">see</span> <span class="n">the</span> <span class="n">RESTful</span> <span class="n">column</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="nx">see</span> <span class="nx">the</span> <span class="nx">RESTful</span> <span class="nx">column</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">see</span> <span class="n">the</span> <span class="n">RESTful</span> <span class="n">column</span>
</code></pre><pre class="highlight shell tab-shell"><code>curl -s https://keychest.net/api/v1.0/servers/expiration/<span class="o">{</span>domain<span class="o">}</span>&amp;api_key<span class="o">={</span>api-key<span class="o">}</span>
</code></pre><pre class="highlight json tab-json"><code><span class="err">see</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">RESTful</span><span class="w"> </span><span class="err">column</span><span class="w">
</span></code></pre>
<p>The GET endpoint of this call is:</p>

<p><code>https://keychest.net/api/v1.0/servers/expiration/{domain}</code></p>
<h3 id='parameters-4'>Parameters</h3>
<table><thead>
<tr>
<th>name</th>
<th>optional</th>
<th>type</th>
<th>note</th>
</tr>
</thead><tbody>
<tr>
<td>domain</td>
<td>NO</td>
<td>string</td>
<td>it must be a valid domain name</td>
</tr>
<tr>
<td>api_key</td>
<td>NO</td>
<td>string</td>
<td>a valid and registered API key</td>
</tr>
</tbody></table>
<pre class="highlight java tab-java"><code><span class="n">see</span> <span class="n">the</span> <span class="n">RESTful</span> <span class="n">column</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="nx">see</span> <span class="nx">the</span> <span class="nx">RESTful</span> <span class="nx">column</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">see</span> <span class="n">the</span> <span class="n">RESTful</span> <span class="n">column</span>
</code></pre><pre class="highlight shell tab-shell"><code><span class="o">{</span>
    <span class="s2">"domain"</span>: <span class="s2">"fish.enigmabridge.com"</span>,
    <span class="s2">"certificate_found"</span>:true,
    <span class="s2">"renewal_due"</span>:false,
    <span class="s2">"expired_found"</span>:false,
    <span class="s2">"results"</span>: <span class="o">[</span>
        <span class="o">{</span>
            <span class="s2">"ip"</span>: <span class="s2">"2001:41c9:1:41d::131"</span>,
            <span class="s2">"certificate_found"</span>: <span class="nb">false</span>,
            <span class="s2">"certificate_sha256"</span>: null,
            <span class="s2">"renewal_due"</span>: null,
            <span class="s2">"expired"</span>: null,
            <span class="s2">"renewal_utc"</span>: null,
            <span class="s2">"last_scan_utc"</span>: 1509094412
        <span class="o">}</span>,
        <span class="o">{</span>
            <span class="s2">"ip"</span>: <span class="s2">"46.43.0.131"</span>,
            <span class="s2">"certificate_found"</span>: <span class="nb">true</span>,
            <span class="s2">"certificate_sha256"</span>: <span class="s2">"1aa7cda60ba61810321bedc4793fadc80f7ca6a3e328d484b0d5eb8a9ef230de"</span>,
            <span class="s2">"renewal_due"</span>: <span class="nb">true</span>,
            <span class="s2">"expired"</span>: <span class="nb">false</span>,
            <span class="s2">"renewal_utc"</span>: 1510216500,
            <span class="s2">"last_scan_utc"</span>: 1509099907
        <span class="o">}</span>
    <span class="o">]</span>,
    <span class="s2">"status"</span>: <span class="s2">"success"</span>
<span class="o">}</span>
</code></pre><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"domain"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fish.enigmabridge.com"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"certificate_found"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"renewal_due"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"expired_found"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"results"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"ip"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2001:41c9:1:41d::131"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"certificate_found"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"certificate_sha256"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"renewal_due"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"expired"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"renewal_utc"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"last_scan_utc"</span><span class="p">:</span><span class="w"> </span><span class="mi">1509094412</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"ip"</span><span class="p">:</span><span class="w"> </span><span class="s2">"46.43.0.131"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"certificate_found"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="s2">"certificate_sha256"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1aa7cda60ba61810321bedc4793fadc80f7ca6a3e328d484b0d5eb8a9ef230de"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"renewal_due"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="s2">"expired"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"renewal_utc"</span><span class="p">:</span><span class="w"> </span><span class="mi">1510216500</span><span class="p">,</span><span class="w">
            </span><span class="s2">"last_scan_utc"</span><span class="p">:</span><span class="w"> </span><span class="mi">1509099907</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='response-4'>Response</h3>
<p>Response returns the result of the processing and detailed information for all IP addresses known for a given domain name.</p>

<table><thead>
<tr>
<th>name</th>
<th>optional</th>
<th>type</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td>domain</td>
<td>NO</td>
<td>string</td>
<td>requested domain name</td>
</tr>
<tr>
<td>certificate_found</td>
<td>NO</td>
<td>boolean</td>
<td>true if at least one certificate found for the domain name</td>
</tr>
<tr>
<td>renewal_due</td>
<td>NO</td>
<td>boolean</td>
<td>true if at least one certificate expires within 28 days</td>
</tr>
<tr>
<td>expired_found</td>
<td>NO</td>
<td>booean</td>
<td>true if at least one certificate expired</td>
</tr>
<tr>
<td>results</td>
<td>NO</td>
<td>JSON array</td>
<td>an array of records for each IP address</td>
</tr>
<tr>
<td>status</td>
<td>NO</td>
<td>string</td>
<td>&quot;success&quot; when processing was successful</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="json">RESTful</a>
                <a href="#" data-language-name="java">Java</a>
                <a href="#" data-language-name="javascript">Javascript</a>
                <a href="#" data-language-name="python">Python</a>
                <a href="#" data-language-name="shell">cURL</a>
          </div>
      </div>
    </div>
  </body>
</html>
