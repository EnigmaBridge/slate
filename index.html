<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Enigma Bridge API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #f8f8f2;
  background-color: #272822;
}
.highlight .err {
  color: #151515;
  background-color: #ac4142;
}
.highlight .c, .highlight .cd, .highlight .cm, .highlight .c1, .highlight .cs {
  color: #505050;
}
.highlight .cp {
  color: #f4bf75;
}
.highlight .nt {
  color: #f4bf75;
}
.highlight .o, .highlight .ow {
  color: #d0d0d0;
}
.highlight .p, .highlight .pi {
  color: #d0d0d0;
}
.highlight .gi {
  color: #90a959;
}
.highlight .gd {
  color: #ac4142;
}
.highlight .gh {
  color: #6a9fb5;
  background-color: #151515;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #aa759f;
}
.highlight .kc {
  color: #d28445;
}
.highlight .kt {
  color: #d28445;
}
.highlight .kd {
  color: #d28445;
}
.highlight .s, .highlight .sb, .highlight .sc, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #90a959;
}
.highlight .sr {
  color: #75b5aa;
}
.highlight .si {
  color: #8f5536;
}
.highlight .se {
  color: #8f5536;
}
.highlight .nn {
  color: #f4bf75;
}
.highlight .nc {
  color: #f4bf75;
}
.highlight .no {
  color: #f4bf75;
}
.highlight .na {
  color: #6a9fb5;
}
.highlight .m, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mb, .highlight .mx {
  color: #90a959;
}
.highlight .ss {
  color: #90a959;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;json&quot;,&quot;java&quot;,&quot;javascript&quot;,&quot;python&quot;,&quot;shell&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img src="images/logo.png" />
        <div class="lang-selector">
              <a href="#" data-language-name="json">RESTful</a>
              <a href="#" data-language-name="java">Java</a>
              <a href="#" data-language-name="javascript">Javascript</a>
              <a href="#" data-language-name="python">Python</a>
              <a href="#" data-language-name="shell">cURL</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href='https://enigmabridge.freshdesk.com'>Ask a question, raise a support ticket</a></li>
            <li><a href='https://enigmabridge.com'>Visit our main website</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id="introduction">Introduction</h1>

<p>Welcome to Enigma Bridge API documentation and congratulations on taking steps to properly secure your systems from cyberattacks.</p>

<p>Enigma Bridge provides managed hardware encryption for a variety of applications and our proprietary hardware security platform ensures that your secrets canâ€™t be extracted using any logical nor physical attacks. This protection is validated according to the FIPS 140-2 standard on <strong>Level 3</strong>. The <strong>Level 3</strong> means that the hardware device will erase secrets it stores when it detects an attack.</p>

<p>Side-channel, and logical attacks are also significantly limited. Assurance of this protection is provided by Common Criteria certifications on EAL5 (<a href="https://en.wikipedia.org/wiki/Evaluation_Assurance_Level#EAL5:_Semiformally_Designed_and_Tested">EAL5 explained on Wikipedia</a>).</p>

<p>You can use our API to access Enigma Bridge encryption service directly or transparently via production integrations. The set of operations available via the API includes:</p>

<ul>
<li><strong>encryption</strong> - just encrypt, MAC, sign, &hellip;;</li>
<li><strong>re-encryption</strong> - atomic re-encryption from transport (data in transit) to storage (data at rest) keys;</li>
<li><strong>key management</strong> - generate, unwrap, manage keys; </li>
<li><strong>payment systems</strong> - re-encryption between transport and database keys, tokenization;</li>
<li><strong>cloud migration</strong> - use any subset of supported operations or one of our services built on top of the Enigma Bridge platform;</li>
<li><strong>user authentication</strong> - create user context, verify passwords and one-time passwords, reset passwords; or</li>
<li><strong>random data generation</strong> - using FIPS140-2 certified generators.</li>
</ul>

<p>The native API is REST web-service. We also provide language bindings for simple integration. We currently support Javascript (client and node.js), Python and Java. This site provides description of API functions, including code examples in the dark area to the right. Tabs in the top right allow  switching between the programming language of the examples.</p>

<h1 id="basics">Basics</h1>

<p>Use of Enigma Bridge consists of four phases, irrespective of operations you want to use:</p>

<ol>
<li><strong>user enrolment</strong> - creating user account;</li>
<li><strong>API key creation</strong> - obtaining API key with authorizations and also network connection details to a suitable Enigma Bridge instance;</li>
<li><strong>operation enrolment</strong> - introduction of a new use request into Enigma Bridge; and</li>
<li><strong>data processing</strong> - operational use.</li>
</ol>

<p>Depending on the use case and limits on usage, all steps can be completed fully automatically within seconds. If a particular use case requires more strict control, step 1 will require manual approval.</p>

<p>Each of the steps can be represented by a single API command regardless of the operation you request. The result of the enrolment is a configuration string that uniquely identifies a new user object.</p>

<h1 id="getting-started">Getting Started</h1>

<p>We provide several language bindings. </p>
<pre class="highlight python"><code><span class="s">"sudo pip install ebclient.py"</span>
</code></pre>
<pre class="highlight javascript"><code><span class="s2">"npm install -g ebclient.js"</span>
<span class="nx">or</span>
<span class="s2">"git clone https://github.com/EnigmaBridge/client.js"</span>
</code></pre>
<pre class="highlight shell"><code><span class="s2">"nothing required"</span>
</code></pre>
<pre class="highlight java"><code><span class="s">"git clone https://github.com/EnigmaBridge/client.java"</span>
</code></pre>
<pre class="highlight json"><code><span class="s2">"nothing required"</span><span class="w">
</span></code></pre>

<p>Our goal is to make any library installation as simple as possible, and using standard deployment mechanisms wherever possible. </p>

<h1 id="register-as-enigma-client">Register as Enigma Client</h1>

<p>The first step for using the EB service is to create a client account. The client account forms the basis for your authorization towards Enigma Bridge. Once you obtain an account, you will learn your authentication details you can use to obtain API keys.</p>
<pre class="highlight java"><code><span class="s">"coming soon"</span>
</code></pre>
<pre class="highlight json"><code><span class="s2">"coming soon"</span><span class="w">
</span></code></pre>
<pre class="highlight shell"><code>curl -i <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"X-Auth-Token: public"</span> <span class="se">\</span>
  -X POST
  -d <span class="s1">'{
         "nonce":"arbitrary string that will be included in the response",
         "version":1,
         "function":"create",
         "environment":"dev",
         "client":{
             "name":"name of the client - it should be unique",
             "authentication":"type",
             "type":"pre-defined type of clients",
             "token":"initial type authentication token"
         }
    }'</span><span class="se">\</span>
  https://hut3.enigmabridge.com:8445/api/v1/client
</code></pre>
<pre class="highlight javascript"><code><span class="nx">cfg</span> <span class="o">=</span> <span class="nx">Configuration</span><span class="p">()</span>
<span class="nx">cfg</span><span class="p">.</span><span class="nx">endpoint_register</span> <span class="o">=</span> <span class="nx">Endpoint</span><span class="p">.</span><span class="nx">url</span><span class="p">(</span><span class="s1">'https://hut3.enigmabridge.com:8445'</span><span class="p">)</span>
<span class="nx">cfg</span><span class="p">.</span><span class="nx">retry</span> <span class="o">=</span> <span class="nx">SimpleRetry</span><span class="p">()</span>

<span class="nx">client_data_reg</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">'name'</span><span class="p">:</span> <span class="s1">'name of the client - it should be unique'</span><span class="p">,</span>
    <span class="s1">'authentication'</span><span class="p">:</span> <span class="s1">'type'</span><span class="p">,</span>
    <span class="s1">'type'</span><span class="p">:</span> <span class="s1">'pre-defined type of clients'</span><span class="p">,</span>
    <span class="s1">'token'</span><span class="p">:</span> <span class="s1">'initial type authentication token'</span>
<span class="p">}</span>
<span class="nx">regreq</span> <span class="o">=</span> <span class="nx">RegistrationRequest</span><span class="p">(</span><span class="nx">client_data</span><span class="o">=</span><span class="nx">client_data_reg</span><span class="p">,</span> <span class="nx">env</span><span class="o">=</span><span class="nx">ENVIRONMENT_DEVELOPMENT</span><span class="p">,</span> <span class="nx">config</span><span class="o">=</span><span class="nx">cfg</span><span class="p">)</span>
<span class="nx">regresponse</span> <span class="o">=</span> <span class="nx">regreq</span><span class="p">.</span><span class="nx">call</span><span class="p">()</span>
<span class="nx">print</span><span class="p">(</span><span class="nx">regresponse</span><span class="p">)</span>
</code></pre>
<pre class="highlight python"><code><span class="s">"coming soon"</span>
</code></pre>

<p>We have created three end-points for client registration. We named them in memory of wartime sections of the Government Code and Cypher School (GC&amp;CS) at <a href="https://en.wikipedia.org/wiki/Bletchley_Park">Bletchley Park</a></p>

<ul>
<li><strong>hut3.enigmabridge.com</strong> - Hut 3 translated, interpretated and distributed German Army (Heer) and Air Force (Luftwaffe) messages deciphered by Hut 6.</li>
<li><strong>hut6.enigmabridge.com</strong> - Hut 6&rsquo;s task was to break German Army and Air Force <a href="https://en.wikipedia.org/wiki/Enigma_machine">Enigma machine</a> cyphers.</li>
<li><strong>hut8.enigmabridge.com</strong> - Hut 8 was solving German naval (Kriegsmarine) Enigma messages. The section was led initially by Alan Turing.</li>
</ul>

<p>Automated registration requires knowledge of your use-case. In certain cases, we pre-define types of clients for automated deployments. For example, <a href="https://en.wikipedia.org/wiki/Amazon_Machine_Image">AMI</a> available from <a href="https://aws.amazon.com/marketplace">Amazon AWS Marketplace</a> will be assigned such a client type. </p>

<aside class="notice">
Availability of automated execution of client registration depends on the use case and required operation.
</aside>

<aside class="notice">
In some cases, it is possible to use a default &ldquo;TEST&rdquo; user and &ldquo;TEST_API&rdquo; key - these credentials are only available for demonstration purposes.
</aside>

<h1 id="api-key-enrolment">API Key Enrolment</h1>

<blockquote>
<p>To authorize, you first have to get client authentication data.</p>
</blockquote>
<pre class="highlight shell"><code>curl -i <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"X-Auth-Token: public"</span> <span class="se">\</span>
  -X POST
  -d <span class="s1">'{
         "nonce":"arbitrary string that will be included in the response",
         "version":1,
         "function":"addapi",
         "authentication":("name" | "type" | "password" | "hotp" | "totp" | "ocra" | "challenge" | "signature"),
         "client":{
             "username":"as provided by function create",
             "authentication":"type",
             "password":"as provided",
         },
         "endpoint":{
             "ipv4":"IPv4",
             "ipv6":"IPv6",
             "email":"contact@mail",
             "country":"2 letter code, e.g. gb, us",
             "network":"network or IP space",
             "location":[0.34,10],
             "datacenter":"name",
             "hostid":"hostid",
             "productcode":"product code",
             "instancetype":"instance type"
         },
         "operations":["name","name2","nameX"]
    }'</span><span class="se">\</span>
  https://hut3.enigmabridge.com:8445/api/v1/client
</code></pre>
<pre class="highlight javascript"><code><span class="kr">const</span> <span class="nx">kittn</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'kittn'</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">api</span> <span class="o">=</span> <span class="nx">kittn</span><span class="p">.</span><span class="nx">authorize</span><span class="p">(</span><span class="s1">'meowmeowmeow'</span><span class="p">);</span>
</code></pre>

<blockquote>
<p>Make sure to replace default values with proper ones.</p>
</blockquote>

<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Optional</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>ipv4</td>
<td>string</td>
<td>true</td>
<td>IPv4 address provided by the client software</td>
</tr>
<tr>
<td>ipv6</td>
<td>string</td>
<td>true</td>
<td>IPv6 address provided by the client software</td>
</tr>
<tr>
<td>email</td>
<td>string</td>
<td>true</td>
<td>contact email address</td>
</tr>
<tr>
<td>country</td>
<td>string</td>
<td>true</td>
<td>2 character ISO country code</td>
</tr>
<tr>
<td>network</td>
<td>string</td>
<td>true</td>
<td>string - name or IP space</td>
</tr>
<tr>
<td>location</td>
<td>array</td>
<td>true</td>
<td>geographic location as an array of two float numbers</td>
</tr>
<tr>
<td>datacenter</td>
<td>string</td>
<td>true</td>
<td>name / identification of the datacenter</td>
</tr>
<tr>
<td>hostid</td>
<td>string</td>
<td>true</td>
<td>host ID - e.g. AMI name (Amazon), server fqdn</td>
</tr>
<tr>
<td>productcode</td>
<td>string</td>
<td>true</td>
<td>identification of the client host if a VM</td>
</tr>
<tr>
<td>instancetype</td>
<td>string</td>
<td>true</td>
<td>another identification</td>
</tr>
</tbody></table>

<p>Enigma Bridge servers require API keys to allow access to the API. You can register a new API key either programmaticaly or via our support portal at <a href="https://enigmabridge.freshdesk.com">support portal</a>.</p>

<aside class="notice">
You must replace <code>default key</code> with your personal API key.
</aside>

<h1 id="use">Use</h1>

<h2 id="processdata">ProcessData</h2>

<p><code class="prettyprint">ProcessData</code> is the basic call for using the UserObject - performing an operation
on the input data with the registered object (e.g., RSA decryption, AES decryption). </p>
<pre class="highlight json"><code><span class="s2">" Process data uses a communication encryption preprocessing. "</span><span class="w">
</span><span class="s2">" For more details please refer to the Communication encryption documentation. "</span><span class="w"> 
</span></code></pre>
<pre class="highlight python"><code><span class="kn">from</span> <span class="nn">ebclient.process_data</span> <span class="kn">import</span> <span class="n">ProcessData</span>
<span class="kn">from</span> <span class="nn">ebclient.uo</span> <span class="kn">import</span> <span class="n">Configuration</span><span class="p">,</span> <span class="n">Endpoint</span><span class="p">,</span> <span class="n">SimpleRetry</span><span class="p">,</span> <span class="n">UO</span>
<span class="kn">from</span> <span class="nn">ebclient.crypto_util</span> <span class="kn">import</span> <span class="o">*</span>

<span class="n">cfg</span> <span class="o">=</span> <span class="n">Configuration</span><span class="p">()</span>
<span class="n">cfg</span><span class="o">.</span><span class="n">endpoint_process</span> <span class="o">=</span> <span class="n">Endpoint</span><span class="o">.</span><span class="n">url</span><span class="p">(</span><span class="s">'https://site2.enigmabridge.com:11180'</span><span class="p">)</span>
<span class="n">cfg</span><span class="o">.</span><span class="n">api_key</span> <span class="o">=</span> <span class="s">'API_TEST'</span>

<span class="n">uo_aes</span> <span class="o">=</span> <span class="n">UO</span><span class="p">(</span><span class="n">uo_id</span><span class="o">=</span><span class="mh">0xee01</span><span class="p">,</span>
                 <span class="n">uo_type</span><span class="o">=</span><span class="mh">0x4</span><span class="p">,</span>
                 <span class="n">enc_key</span><span class="o">=</span><span class="n">from_hex</span><span class="p">(</span><span class="s">'e134567890123456789012345678901234567890123456789012345678901234'</span><span class="p">),</span>
                 <span class="n">mac_key</span><span class="o">=</span><span class="n">from_hex</span><span class="p">(</span><span class="s">'e224262820223456789012345678901234567890123456789012345678901234'</span><span class="p">),</span>
                 <span class="n">configuration</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">cfg</span><span class="p">)</span>

<span class="n">pd</span> <span class="o">=</span> <span class="n">ProcessData</span><span class="p">(</span><span class="n">uo</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">uo_aes</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">cfg</span><span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">from_hex</span><span class="p">(</span><span class="s">'6bc1bee22e409f96e93d7e117393172a'</span><span class="p">))</span>
</code></pre>
<pre class="highlight shell"><code><span class="c"># Process data uses a communication encryption preprocessing.</span>
<span class="c"># For more details please refer to the Communication encryption documentation. </span>
<span class="c"># Pure shell client is not yet planned.</span>
</code></pre>
<pre class="highlight javascript"><code><span class="s2">"use strict"</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">eb</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">"../lib/enigma"</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">sjcl</span> <span class="o">=</span> <span class="nx">eb</span><span class="p">.</span><span class="nx">misc</span><span class="p">.</span><span class="nx">sjcl</span><span class="p">;</span>

<span class="kd">var</span> <span class="nx">settings</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">host</span><span class="p">:</span> <span class="s2">"https://site2.enigmabridge.com:11180"</span><span class="p">,</span>
    <span class="na">enrollHost</span><span class="p">:</span> <span class="s2">"https://site2.enigmabridge.com:11182"</span><span class="p">,</span>
    <span class="na">requestMethod</span><span class="p">:</span> <span class="s2">"POST"</span><span class="p">,</span>
    <span class="na">requestTimeout</span><span class="p">:</span> <span class="mi">30000</span><span class="p">,</span>
    <span class="na">apiKey</span><span class="p">:</span> <span class="s2">"TEST_API"</span><span class="p">,</span>
     <span class="na">uoId</span><span class="p">:</span> <span class="s1">'EE01'</span><span class="p">,</span>
    <span class="na">uoType</span><span class="p">:</span> <span class="s1">'4'</span><span class="p">,</span>
    <span class="na">aesKey</span><span class="p">:</span> <span class="s1">'e134567890123456789012345678901234567890123456789012345678901234'</span><span class="p">,</span>
    <span class="na">macKey</span><span class="p">:</span> <span class="s1">'e224262820223456789012345678901234567890123456789012345678901234'</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">input</span> <span class="o">=</span> <span class="s1">'6bc1bee22e409f96e93d7e117393172a'</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">cl</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">eb</span><span class="p">.</span><span class="nx">client</span><span class="p">.</span><span class="nx">processData</span><span class="p">(</span><span class="nx">settings</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">promise</span> <span class="o">=</span> <span class="nx">cl</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">input</span><span class="p">);</span>

<span class="nx">promise</span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">data</span> <span class="o">==</span> <span class="s1">'95c6bb9b6a1c3835f98cc56087a03e82'</span><span class="p">);</span>
<span class="p">}).</span><span class="k">catch</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
<pre class="highlight java"><code><span class="s">"coming soon"</span>
</code></pre>

<blockquote>
<p>Typical <code class="prettyprint">ProcessData</code> response is a JSON object like the following one.
The communication encryption is in place - decryption has to be performed 
in order to get the response clear text. </p>

<p>Status 0x9000 stands for OK - result completed successfully.</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="nt">"function"</span><span class="p">:</span><span class="s2">"ProcessData"</span><span class="p">,</span><span class="nt">"result"</span><span class="p">:</span><span class="s2">"0000ae1348d2bcc0b07ffafa8fdbf9c30ee728140193e64b73eb3daeb70a4bc3ccde627dff61da0b175d1243037a0c959897_Packet0_PLAINAES_"</span><span class="p">,</span><span class="nt">"nonce"</span><span class="p">:</span><span class="s2">"c5a26f4ec30bf78b"</span><span class="p">,</span><span class="nt">"status"</span><span class="p">:</span><span class="s2">"9000"</span><span class="p">,</span><span class="nt">"statusdetail"</span><span class="p">:</span><span class="s2">"success (ok)"</span><span class="p">,</span><span class="nt">"version"</span><span class="p">:</span><span class="s2">"1.0"</span><span class="p">}</span><span class="w">
</span></code></pre>

<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>include_cats</td>
<td>false</td>
<td>If set to true, the result will also include cats.</td>
</tr>
<tr>
<td>available</td>
<td>true</td>
<td>If set to false, the result will include kittens that have already been adopted.</td>
</tr>
</tbody></table>

<aside class="success">
Remember â€” a happy kitten is an authenticated kitten!
</aside>

          <h1 id="errors">Errors</h1>

<aside class="notice">Each response form the Enigma Bridge service will contain a numerical code, as well as a short text with explanation of the error. 

The response code for successful processiong of a request is 36864 (0x9000).
</aside>

<p>Clients using Enigma Bridge API may encounter the following error codes:</p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>4101 (0x1005)</td>
<td>object capacity reached</td>
</tr>
<tr>
<td>4102 (0x1006)</td>
<td>timeout</td>
</tr>
<tr>
<td>4111 (0x100F)</td>
<td>service shutting down</td>
</tr>
<tr>
<td>4213 (0x1075)</td>
<td>object processing limit reached</td>
</tr>
<tr>
<td>4262 (0x10A6)</td>
<td>processing queues full</td>
</tr>
<tr>
<td>4304 (0x10D0)</td>
<td>no authorization tokens left</td>
</tr>
<tr>
<td>8364 (0x20AC)</td>
<td>integrity error / attack detected</td>
</tr>
<tr>
<td>8380 (0x20BC)</td>
<td>request not authorized</td>
</tr>
<tr>
<td>16504 (0x4078)</td>
<td>object already exists</td>
</tr>
<tr>
<td>16512 (0x4080)</td>
<td>public key not available</td>
</tr>
<tr>
<td>32769 (0x8001)</td>
<td>unknown operation</td>
</tr>
<tr>
<td>32772 (0x8004)</td>
<td>operation not available</td>
</tr>
<tr>
<td>32818 (0x8032)</td>
<td>input data length incorrect</td>
</tr>
<tr>
<td>32819 (0x8033)</td>
<td>invalid key provided</td>
</tr>
<tr>
<td>32820 (0x8034)</td>
<td>invalid handle/APIkey</td>
</tr>
<tr>
<td>32822 (0x8036)</td>
<td>missing or invalid argument</td>
</tr>
<tr>
<td>32823 (0x8037)</td>
<td>request JSON parsing failed</td>
</tr>
<tr>
<td>32824 (0x8038)</td>
<td>request JSON version not supported</td>
</tr>
<tr>
<td>32825 (0x8039)</td>
<td>request JSON data invalid</td>
</tr>
<tr>
<td>32826 (0x803A)</td>
<td>request JSON missing nonce</td>
</tr>
<tr>
<td>32827 (0x803B)</td>
<td>invalid object</td>
</tr>
<tr>
<td>32828 (0x803C)</td>
<td>unsupported operation</td>
</tr>
<tr>
<td>32829 (0x803D)</td>
<td>incorrect data padding</td>
</tr>
<tr>
<td>32830 (0x803E)</td>
<td>object format error</td>
</tr>
<tr>
<td>32833 (0x8041)</td>
<td>object format error</td>
</tr>
<tr>
<td>32835 (0x8043)</td>
<td>object format error</td>
</tr>
<tr>
<td>32839 (0x8047)</td>
<td>data is incorrect</td>
</tr>
<tr>
<td>32840 (0x8048)</td>
<td>object format error</td>
</tr>
<tr>
<td>32841 (0x8049)</td>
<td>MAC length incorrect</td>
</tr>
<tr>
<td>32842 (0x804A)</td>
<td>object format error</td>
</tr>
<tr>
<td>32844 (0x804C)</td>
<td>object format error</td>
</tr>
<tr>
<td>32846 (0x804E)</td>
<td>encrypt data padding error</td>
</tr>
<tr>
<td>32847 (0x804F)</td>
<td>encrypt data padding error</td>
</tr>
<tr>
<td>32851 (0x8053)</td>
<td>incorrect key length</td>
</tr>
<tr>
<td>32852 (0x8054)</td>
<td>data too long</td>
</tr>
<tr>
<td>32853 (0x8055)</td>
<td>malformed data</td>
</tr>
<tr>
<td>32856 (0x8058)</td>
<td>authorization cards required</td>
</tr>
<tr>
<td>32866 (0x8062)</td>
<td>invalid user context</td>
</tr>
<tr>
<td>32871 (0x8067)</td>
<td>object classification is incorrect</td>
</tr>
<tr>
<td>32872 (0x8068)</td>
<td>invalid API key</td>
</tr>
<tr>
<td>32873 (0x8069)</td>
<td>unrecognized client</td>
</tr>
<tr>
<td>32899 (0x8083)</td>
<td>invalid operation type</td>
</tr>
<tr>
<td>32909 (0x808D)</td>
<td>key component length incorrect</td>
</tr>
<tr>
<td>32910 (0x808E)</td>
<td>key component index incorrect</td>
</tr>
<tr>
<td>32911 (0x808F)</td>
<td>key component already set</td>
</tr>
<tr>
<td>32912 (0x8090)</td>
<td>key component not set</td>
</tr>
<tr>
<td>32918 (0x8096)</td>
<td>length of application key is incorrect</td>
</tr>
<tr>
<td>32919 (0x8097)</td>
<td>length of communication key is incorrect</td>
</tr>
<tr>
<td>32921 (0x8099)</td>
<td>incorrect usage flags or keys not generated</td>
</tr>
<tr>
<td>32943 (0x80AF)</td>
<td>data encryption error</td>
</tr>
<tr>
<td>32948 (0x80B4)</td>
<td>OTP code length request incorrect</td>
</tr>
<tr>
<td>32953 (0x80B9)</td>
<td>authentication method not allowed</td>
</tr>
<tr>
<td>36864 (0x9000)</td>
<td>Success</td>
</tr>
<tr>
<td>41046 (0xA056)</td>
<td>incorrect length of OTP key</td>
</tr>
<tr>
<td>41059 (0xA063)</td>
<td>too many password tries</td>
</tr>
<tr>
<td>41060 (0xA064)</td>
<td>incorrect password length</td>
</tr>
<tr>
<td>41061 (0xA065)</td>
<td>incorrect password</td>
</tr>
<tr>
<td>41062 (0xA066)</td>
<td>too many HOTP tries</td>
</tr>
<tr>
<td>41121 (0xA0A1)</td>
<td>wrong MAC on data</td>
</tr>
<tr>
<td>41136 (0xA0B0)</td>
<td>incorrect HOTP code</td>
</tr>
<tr>
<td>41137 (0xA0B1)</td>
<td>too many account tries</td>
</tr>
<tr>
<td>41138 (0xA0B2)</td>
<td>keys stored in the user object are incorrect</td>
</tr>
<tr>
<td>41139 (0xA0B3)</td>
<td>OTP counter overflow</td>
</tr>
<tr>
<td>41142 (0xA0B6)</td>
<td>incorrect user ID / malicious request</td>
</tr>
<tr>
<td>41146 (0xA0BA)</td>
<td>unknown authentication method</td>
</tr>
<tr>
<td>41170(0xA0D2)</td>
<td>no authorization credits left</td>
</tr>
<tr>
<td>61458(0xF012)</td>
<td>processor failure</td>
</tr>
<tr>
<td>61465(0xF019)</td>
<td>server not ready</td>
</tr>
<tr>
<td>61488(0xF030)</td>
<td>invalid authorization token</td>
</tr>
<tr>
<td>61489(0xF031)</td>
<td>input data too long</td>
</tr>
<tr>
<td>61493(0xF035)</td>
<td>invalid object</td>
</tr>
</tbody></table>

          <h1 id="user-manager-client-role">User Manager - Client Role</h1>

<aside class="notice">

User Manager is available on the following domain names managed by Enigma Bridge. Whenever we use <strong>hut</strong>, it has to be replased with one of these three domain names.
</aside>

<p>User Manager domain names to replace <strong>hut</strong> in the text below are:</p>

<ol>
<li>hut3.enigmabridge.com</li>
<li>hut6.enigmabridge.com</li>
<li>hut8.enigmabridge.com</li>
</ol>

<h2 id="data-flow">Data Flow</h2>

<p>The usual data-flow and sequence of actions is as follows:</p>

<ol>
<li>New client process (computer, server, software package) will get an Enigma Bridge client type - this can be done automatically for virtual machines configured by Enigma Bridge.</li>
<li>This step requests creation of an Enigma Bridge client - i.e., a legal entity that will own APIkeys and will be authorized to use the Enigma Bridge service.

<ol>
<li>The client process will use its EB type to request a new client account.</li>
<li>The customer will request a new client account via our support system at: <a href="https://enigmabridge.freshdesk.com">https://enigmabridge.freshdesk.com</a>.</li>
</ol></li>
<li>Once the client ID and authentication details are available, the client process can request a new API key.</li>
<li>The API key allows create of new user objects according to the client type definition.</li>
</ol>

<h2 id="register-client-client">Register Client (client)</h2>
<pre class="highlight java"><code><span class="n">see</span> <span class="n">the</span> <span class="n">RESTful</span> <span class="n">column</span>
</code></pre>
<pre class="highlight javascript"><code><span class="nx">see</span> <span class="nx">the</span> <span class="nx">RESTful</span> <span class="nx">column</span>
</code></pre>
<pre class="highlight python"><code><span class="n">see</span> <span class="n">the</span> <span class="n">RESTful</span> <span class="n">column</span>
</code></pre>
<pre class="highlight shell"><code>see the RESTful column
</code></pre>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"nonce"</span><span class="p">:</span><span class="s2">"nonce"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"version"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nt">"function"</span><span class="p">:</span><span class="s2">"create"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"environment"</span><span class="p">:</span><span class="s2">"dev"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"client"</span><span class="p">:{</span><span class="w">
        </span><span class="nt">"name"</span><span class="p">:</span><span class="s2">"my test name"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"authentication"</span><span class="p">:</span><span class="s2">"type"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"test"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"token"</span><span class="p">:</span><span class="s2">"token-assigned-to-client-type"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>The request uses the following URL: </p>

<p><code class="prettyprint">https://hut:8445/api/v1/client</code></p>

<h3 id="parameters">Parameters</h3>

<table><thead>
<tr>
<th>name</th>
<th>optional</th>
<th>type</th>
<th>note</th>
</tr>
</thead><tbody>
<tr>
<td>nonce</td>
<td>NO</td>
<td>string</td>
<td>random string that will be returned back</td>
</tr>
<tr>
<td>version</td>
<td>NO</td>
<td>integer</td>
<td>must be 1</td>
</tr>
<tr>
<td>function</td>
<td>NO</td>
<td>string</td>
<td>must be &ldquo;create&rdquo;</td>
</tr>
<tr>
<td>environment</td>
<td>NO</td>
<td>string</td>
<td>must be &ldquo;dev&rdquo;, &ldquo;test&rdquo;, or &ldquo;prod&rdquo;</td>
</tr>
<tr>
<td><strong>client</strong></td>
<td>NO</td>
<td>sequence</td>
<td>contains information about the new client</td>
</tr>
</tbody></table>

<h3 id="structure-of-39-client-39">Structure of &lsquo;client&rsquo;</h3>

<table><thead>
<tr>
<th>name</th>
<th>optional</th>
<th>type</th>
<th>note</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>NO</td>
<td>string</td>
<td>name provided by the user</td>
</tr>
<tr>
<td>authentication</td>
<td>NO</td>
<td>string</td>
<td>must be &ldquo;type&rdquo;</td>
</tr>
<tr>
<td>type</td>
<td>NO</td>
<td>string</td>
<td>Name of EB client type (pre-defined)</td>
</tr>
<tr>
<td>token</td>
<td>YES</td>
<td>string</td>
<td>authentication token for the client type</td>
</tr>
</tbody></table>
<pre class="highlight java"><code><span class="n">see</span> <span class="n">the</span> <span class="n">RESTful</span> <span class="n">column</span>
</code></pre>
<pre class="highlight javascript"><code><span class="nx">see</span> <span class="nx">the</span> <span class="nx">RESTful</span> <span class="nx">column</span>
</code></pre>
<pre class="highlight python"><code><span class="n">see</span> <span class="n">the</span> <span class="n">RESTful</span> <span class="n">column</span>
</code></pre>
<pre class="highlight shell"><code>see the RESTful column
</code></pre>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"version"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nt">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success (ok)"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="mi">36864</span><span class="p">,</span><span class="w">
  </span><span class="nt">"nonce"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my nonce"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1475077216548</span><span class="p">,</span><span class="w">
  </span><span class="nt">"response"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dc5c2081-2a13-4566-ac8d-592ee955dc48"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"password"</span><span class="p">:</span><span class="w"> </span><span class="s2">"106..............571e0f53"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"max_api_keys"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
    </span><span class="nt">"authenticationType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PASSWORD"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ENABLED"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"maxobjects"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This is a typical response. The new items are:</p>

<table><thead>
<tr>
<th>name</th>
<th>optional</th>
<th>type</th>
<th>note</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>NO</td>
<td>integer</td>
<td>status code - see Error codes</td>
</tr>
<tr>
<td>error</td>
<td>NO</td>
<td>string</td>
<td>text explaining the error code</td>
</tr>
<tr>
<td>timestamp</td>
<td>NO</td>
<td>long</td>
<td>timestamp of the response</td>
</tr>
<tr>
<td><strong>response</strong></td>
<td>NO</td>
<td>sequence</td>
<td>data returned to the request</td>
</tr>
</tbody></table>

<h3 id="structure-of-39-response-39">Structure of &#39;response&rsquo;</h3>

<table><thead>
<tr>
<th>name</th>
<th>optional</th>
<th>type</th>
<th>note</th>
</tr>
</thead><tbody>
<tr>
<td>username</td>
<td>NO</td>
<td>string</td>
<td>authentication username</td>
</tr>
<tr>
<td>password</td>
<td>YES</td>
<td>string</td>
<td>authentication password, depends on authenticationmethod</td>
</tr>
<tr>
<td>max_api_keys</td>
<td>NO</td>
<td>integer</td>
<td>max number of API keys the client can create</td>
</tr>
<tr>
<td>authenticationtype</td>
<td>NO</td>
<td>string</td>
<td>one of methods</td>
</tr>
<tr>
<td>status</td>
<td>NO</td>
<td>string</td>
<td>enabled, disabled, or removed</td>
</tr>
<tr>
<td>maxobjects</td>
<td>NO</td>
<td>integer</td>
<td>max number of objects this client can create</td>
</tr>
</tbody></table>

<h2 id="add-api-for-client-client">Add API for Client (client)</h2>
<pre class="highlight java"><code><span class="n">see</span> <span class="n">the</span> <span class="n">RESTful</span> <span class="n">column</span>
</code></pre>
<pre class="highlight javascript"><code><span class="nx">see</span> <span class="nx">the</span> <span class="nx">RESTful</span> <span class="nx">column</span>
</code></pre>
<pre class="highlight python"><code><span class="n">see</span> <span class="n">the</span> <span class="n">RESTful</span> <span class="n">column</span>
</code></pre>
<pre class="highlight shell"><code>see the RESTful column
</code></pre>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"nonce"</span><span class="p">:</span><span class="s2">"d"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"version"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nt">"function"</span><span class="p">:</span><span class="w"> </span><span class="s2">"addapi"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"environment"</span><span class="p">:</span><span class="s2">"dev"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"client"</span><span class="p">:{</span><span class="w">
        </span><span class="nt">"authentication"</span><span class="p">:</span><span class="w"> </span><span class="s2">"password"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dc5c2081-2a13-4566-ac8d-592ee955dc48"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"password"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1067...................71e0f53"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"endpoint"</span><span class="p">:{</span><span class="w">
        </span><span class="nt">"country"</span><span class="p">:</span><span class="s2">"gb"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>The request uses the following URL:</p>

<p><code class="prettyprint">https://hut:8445/api/v1/client</code></p>

<table><thead>
<tr>
<th>name</th>
<th>optional</th>
<th>type</th>
<th>note</th>
</tr>
</thead><tbody>
<tr>
<td>nonce</td>
<td>NO</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>version</td>
<td>NO</td>
<td>integer</td>
<td>must be 1</td>
</tr>
<tr>
<td>function</td>
<td>NO</td>
<td>must be &ldquo;addapi&rdquo;</td>
<td></td>
</tr>
<tr>
<td>environment</td>
<td>NO</td>
<td>must be &ldquo;dev&rdquo;, &ldquo;test&rdquo;, or &ldquo;prod&rdquo;</td>
<td></td>
</tr>
<tr>
<td>client</td>
<td>NO</td>
<td>sequence</td>
<td></td>
</tr>
<tr>
<td>endpoint</td>
<td>NO</td>
<td>sequence</td>
<td>properties of the client server to identify best Enigma Bridge servers</td>
</tr>
</tbody></table>

<h3 id="structure-of-39-client-39">Structure of &#39;client&rsquo;</h3>

<table><thead>
<tr>
<th>name</th>
<th>optional</th>
<th>type</th>
<th>note</th>
</tr>
</thead><tbody>
<tr>
<td>authentication</td>
<td>NO</td>
<td>string</td>
<td>at the moment must be &ldquo;password&rdquo;</td>
</tr>
<tr>
<td>username</td>
<td>NO</td>
<td>string</td>
<td>as provided during registration</td>
</tr>
<tr>
<td>password</td>
<td>NO</td>
<td>string</td>
<td>as provided during registration</td>
</tr>
</tbody></table>

<h3 id="structure-of-39-endpoint-39">Structure of &#39;endpoint&rsquo;</h3>

<table><thead>
<tr>
<th>name</th>
<th>optional</th>
<th>type</th>
<th>note</th>
</tr>
</thead><tbody>
<tr>
<td>country</td>
<td>YES</td>
<td>string</td>
<td>ISO country code</td>
</tr>
<tr>
<td>email</td>
<td>YES</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>productcode</td>
<td>YES</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>instancetype</td>
<td>YES</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>network</td>
<td>YES</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>location</td>
<td>YES</td>
<td>pair of float</td>
<td></td>
</tr>
<tr>
<td>ipv4</td>
<td>YES</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>ipv6</td>
<td>YES</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>hostid</td>
<td>YES</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>
<pre class="highlight java"><code><span class="n">see</span> <span class="n">the</span> <span class="n">RESTful</span> <span class="n">column</span>
</code></pre>
<pre class="highlight javascript"><code><span class="nx">see</span> <span class="nx">the</span> <span class="nx">RESTful</span> <span class="nx">column</span>
</code></pre>
<pre class="highlight python"><code><span class="n">see</span> <span class="n">the</span> <span class="n">RESTful</span> <span class="n">column</span>
</code></pre>
<pre class="highlight shell"><code>see the RESTful column
</code></pre>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"version"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nt">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success (ok)"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="mi">36864</span><span class="p">,</span><span class="w">
  </span><span class="nt">"nonce"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1475078668177</span><span class="p">,</span><span class="w">
  </span><span class="nt">"response"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"apikey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0b75.................d057593b"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"servers"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"gb_cambridge_damselfly"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"domain"</span><span class="p">:</span><span class="w"> </span><span class="s2">"default"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"environment"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dev"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"enrolEndpoints"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="nt">"protocol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tcp"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"port"</span><span class="p">:</span><span class="w"> </span><span class="mi">11112</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="nt">"protocol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"port"</span><span class="p">:</span><span class="w"> </span><span class="mi">11182</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="nt">"useEndpoints"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="nt">"protocol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tcp"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"port"</span><span class="p">:</span><span class="w"> </span><span class="mi">11110</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="nt">"protocol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"port"</span><span class="p">:</span><span class="w"> </span><span class="mi">11180</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="nt">"fqdn"</span><span class="p">:</span><span class="w"> </span><span class="s2">"site2.enigmabridge.com"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nt">"operations"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"enabled"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"operation"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w">
        </span><span class="nt">"operationname"</span><span class="p">:</span><span class="w"> </span><span class="s2">"basic_aes128_encrypt"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"enabled"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"operation"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
        </span><span class="nt">"operationname"</span><span class="p">:</span><span class="w"> </span><span class="s2">"basic_rsa1024_decrypt"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"enabled"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"operation"</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w">
        </span><span class="nt">"operationname"</span><span class="p">:</span><span class="w"> </span><span class="s2">"basic_rsa2048_decrypt"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"enabled"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>A response example is on the right. The new items are:</p>

<table><thead>
<tr>
<th>name</th>
<th>optional</th>
<th>type</th>
<th>note</th>
</tr>
</thead><tbody>
<tr>
<td>apikey</td>
<td>NO</td>
<td>string</td>
<td>apikey used to authenticate requests</td>
</tr>
<tr>
<td><strong>servers</strong></td>
<td>NO</td>
<td>array</td>
<td>connection details for Enigma Bridge servers</td>
</tr>
<tr>
<td>operations</td>
<td>NO</td>
<td>array</td>
<td>list of operations available for the API key</td>
</tr>
</tbody></table>

<h3 id="structure-of-39-servers-39-each-item">Structure of &#39;servers&rsquo; each item</h3>

<table><thead>
<tr>
<th>name</th>
<th>optional</th>
<th>type</th>
<th>note</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>NO</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>domain</td>
<td>NO</td>
<td>string</td>
<td>name of Enigma Bridge security domain</td>
</tr>
<tr>
<td>environment</td>
<td>NO</td>
<td>string</td>
<td>&ldquo;dev&rdquo; or &ldquo;test&rdquo; or &ldquo;prod&rdquo;</td>
</tr>
<tr>
<td>enrolendpoints</td>
<td>NO</td>
<td>array</td>
<td>array of {protocol,port}</td>
</tr>
<tr>
<td>useendpoints</td>
<td>NO</td>
<td>array</td>
<td>array of {protocol,port}</td>
</tr>
</tbody></table>

<h2 id="view-api-for-client-client">View API for Client (client)</h2>
<pre class="highlight java"><code><span class="n">see</span> <span class="n">the</span> <span class="n">RESTful</span> <span class="n">column</span>
</code></pre>
<pre class="highlight javascript"><code><span class="nx">see</span> <span class="nx">the</span> <span class="nx">RESTful</span> <span class="nx">column</span>
</code></pre>
<pre class="highlight python"><code><span class="n">see</span> <span class="n">the</span> <span class="n">RESTful</span> <span class="n">column</span>
</code></pre>
<pre class="highlight shell"><code>see the RESTful column
</code></pre>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"nonce"</span><span class="p">:</span><span class="s2">"my nonce"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"version"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nt">"function"</span><span class="p">:</span><span class="w"> </span><span class="s2">"showapi"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"environment"</span><span class="p">:</span><span class="s2">"dev"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"client"</span><span class="p">:{</span><span class="w">
        </span><span class="nt">"authentication"</span><span class="p">:</span><span class="w"> </span><span class="s2">"password"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dc5c2081-2a13-4566-ac8d-592ee955dc48"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"password"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1067....................1e0f53"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"apidata"</span><span class="p">:{</span><span class="w">
        </span><span class="nt">"apikey"</span><span class="p">:</span><span class="s2">"0b75f...............d057593b"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>The request uses the following URL:</p>

<p><code class="prettyprint">https://hut:8445/api/v1/client</code></p>

<p>Clients can repeatedly request information about their API keys.</p>

<table><thead>
<tr>
<th>name</th>
<th>optional</th>
<th>type</th>
<th>note</th>
</tr>
</thead><tbody>
<tr>
<td>nonce</td>
<td>NO</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>version</td>
<td>NO</td>
<td>integer</td>
<td>must be 1</td>
</tr>
<tr>
<td>function</td>
<td>NO</td>
<td>must be &ldquo;showapi&rdquo;</td>
<td></td>
</tr>
<tr>
<td>environment</td>
<td>NO</td>
<td>must be &ldquo;dev&rdquo;, &ldquo;test&rdquo;, or &ldquo;prod&rdquo;</td>
<td></td>
</tr>
<tr>
<td>client</td>
<td>NO</td>
<td>sequence</td>
<td></td>
</tr>
<tr>
<td>apidata</td>
<td>NO</td>
<td>string</td>
<td>sequence of just &ldquo;apikey&rdquo; - string</td>
</tr>
</tbody></table>

<h3 id="structure-of-39-client-39">Structure of &#39;client&rsquo;</h3>

<table><thead>
<tr>
<th>name</th>
<th>optional</th>
<th>type</th>
<th>note</th>
</tr>
</thead><tbody>
<tr>
<td>authentication</td>
<td>NO</td>
<td>string</td>
<td>at the moment must be &ldquo;password&rdquo;</td>
</tr>
<tr>
<td>username</td>
<td>NO</td>
<td>string</td>
<td>as provided during registration</td>
</tr>
<tr>
<td>password</td>
<td>NO</td>
<td>string</td>
<td>as provided during registration</td>
</tr>
</tbody></table>

<p>Responses have the same format as for &ldquo;addapi&rdquo; requests.</p>

<h2 id="enrol-for-dns-domain-api">Enrol for DNS Domain (api)</h2>

<aside class="notice">
<strong>api</strong> endpoint does not use client password. This password is not needed for APIkey related calls and should not be present in the client endpoint.
</aside>
<pre class="highlight java"><code><span class="n">see</span> <span class="n">the</span> <span class="n">RESTful</span> <span class="n">column</span>
</code></pre>
<pre class="highlight javascript"><code><span class="nx">see</span> <span class="nx">the</span> <span class="nx">RESTful</span> <span class="nx">column</span>
</code></pre>
<pre class="highlight python"><code><span class="n">see</span> <span class="n">the</span> <span class="n">RESTful</span> <span class="n">column</span>
</code></pre>
<pre class="highlight shell"><code>see the RESTful column
</code></pre>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"nonce"</span><span class="p">:</span><span class="s2">"my nonce"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"version"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nt">"function"</span><span class="p">:</span><span class="w"> </span><span class="s2">"enroldomain"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"environment"</span><span class="p">:</span><span class="s2">"dev"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"apidata"</span><span class="p">:{</span><span class="w">
        </span><span class="nt">"username"</span><span class="p">:</span><span class="s2">"dc5c2081-2a13-4566-ac8d-592ee955dc48"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"apikey"</span><span class="p">:</span><span class="s2">"0b75f...............d057593b"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"certificate"</span><span class="p">:</span><span class="s2">"base64 encoded X.509 certificate"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>The request uses the following URL:</p>

<p><code class="prettyprint">https://hut:8445/api/v1/apikey</code></p>

<h3 id="structure-of-39-apidata-39">Structure of &#39;apidata&rsquo;</h3>

<table><thead>
<tr>
<th>name</th>
<th>optional</th>
<th>type</th>
<th>note</th>
</tr>
</thead><tbody>
<tr>
<td>username</td>
<td>NO</td>
<td>string</td>
<td>client username as provided during registration</td>
</tr>
<tr>
<td>apikey</td>
<td>NO</td>
<td>string</td>
<td>apikey as provided during registration</td>
</tr>
<tr>
<td>certificate</td>
<td>NO</td>
<td>string</td>
<td>base64 encoded certificate - vehicle to provide public key</td>
</tr>
</tbody></table>

<h3 id="response">Response</h3>
<pre class="highlight java"><code><span class="n">see</span> <span class="n">the</span> <span class="n">RESTful</span> <span class="n">column</span>
</code></pre>
<pre class="highlight javascript"><code><span class="nx">see</span> <span class="nx">the</span> <span class="nx">RESTful</span> <span class="nx">column</span>
</code></pre>
<pre class="highlight python"><code><span class="n">see</span> <span class="n">the</span> <span class="n">RESTful</span> <span class="n">column</span>
</code></pre>
<pre class="highlight shell"><code>see the RESTful column
</code></pre>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"version"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nt">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success (ok)"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="mi">36864</span><span class="p">,</span><span class="w">
    </span><span class="nt">"nonce"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my nonce"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1475078668177</span><span class="p">,</span><span class="w">
    </span><span class="nt">"response"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"domain"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pki.enigmabridge.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"controllers"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ns.enigmabridge.com"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="nt">"status"</span><span class="p">:</span><span class="s2">"enabled"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h2 id="get-challenge-api">Get Challenge (api)</h2>

<aside class="notice">
<strong>api</strong> endpoint does not use client password. This password is not needed for APIkey related calls and should not be present in the client endpoint.
</aside>
<pre class="highlight java"><code><span class="n">see</span> <span class="n">the</span> <span class="n">RESTful</span> <span class="n">column</span>
</code></pre>
<pre class="highlight javascript"><code><span class="nx">see</span> <span class="nx">the</span> <span class="nx">RESTful</span> <span class="nx">column</span>
</code></pre>
<pre class="highlight python"><code><span class="n">see</span> <span class="n">the</span> <span class="n">RESTful</span> <span class="n">column</span>
</code></pre>
<pre class="highlight shell"><code>see the RESTful column
</code></pre>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"nonce"</span><span class="p">:</span><span class="s2">"my nonce"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"version"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nt">"function"</span><span class="p">:</span><span class="w"> </span><span class="s2">"getdomainchallenge"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"environment"</span><span class="p">:</span><span class="s2">"dev"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"apidata"</span><span class="p">:{</span><span class="w">
        </span><span class="nt">"ipv4"</span><span class="p">:</span><span class="s2">"IPv4 provided by the client"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"ipv6"</span><span class="p">:</span><span class="s2">"IPv6 provided by the client"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"private"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nt">"username"</span><span class="p">:</span><span class="s2">"dc5c2081-2a13-4566-ac8d-592ee955dc48"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"apikey"</span><span class="p">:</span><span class="s2">"0b75f...............d057593b"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>The request uses the following URL:</p>

<p><code class="prettyprint">https://hut:8445/api/v1/apikey</code></p>

<table><thead>
<tr>
<th>name</th>
<th>optional</th>
<th>type</th>
<th>note</th>
</tr>
</thead><tbody>
<tr>
<td>username</td>
<td>NO</td>
<td>string</td>
<td>client username as provided during registration</td>
</tr>
<tr>
<td>ipv4</td>
<td>YES</td>
<td>string</td>
<td>ipv4 that will be tested</td>
</tr>
<tr>
<td>ipv6</td>
<td>YES</td>
<td>string</td>
<td>ipv6 that will be tested</td>
</tr>
<tr>
<td>private</td>
<td>NO</td>
<td>boolean</td>
<td>default value is &ldquo;false&rdquo;; if true, the supplied IP addresses are private and will not be used for any verification</td>
</tr>
</tbody></table>

<p>If IP addresses are marked as private, we will check whether they are from the expected range. I.e., fc00::/7 for IPv6 and 10.0.0.0/8, 172.16.0.0/12, or 192.168.0.0/16 for IPv4.</p>
<pre class="highlight java"><code><span class="n">see</span> <span class="n">the</span> <span class="n">RESTful</span> <span class="n">column</span>
</code></pre>
<pre class="highlight javascript"><code><span class="nx">see</span> <span class="nx">the</span> <span class="nx">RESTful</span> <span class="nx">column</span>
</code></pre>
<pre class="highlight python"><code><span class="n">see</span> <span class="n">the</span> <span class="n">RESTful</span> <span class="n">column</span>
</code></pre>
<pre class="highlight shell"><code>see the RESTful column
</code></pre>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"version"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nt">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success (ok)"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="mi">36864</span><span class="p">,</span><span class="w">
    </span><span class="nt">"nonce"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my nonce"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1475078668177</span><span class="p">,</span><span class="w">
    </span><span class="nt">"response"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"challenge"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a random string for authenticated requests"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"authentication"</span><span class="p">:</span><span class="w"> </span><span class="s2">"signature"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>The response to these requests provides a <strong>challenge</strong> that has to be used to authenticate requests like <strong>Update Domain</strong>.</p>

<h2 id="update-domain-api">Update Domain (api)</h2>

<aside class="notice">
<strong>api</strong> endpoint does not use client password. This password is not needed for APIkey related calls and should not be present in the client endpoint.
</aside>
<pre class="highlight java"><code><span class="n">see</span> <span class="n">the</span> <span class="n">RESTful</span> <span class="n">column</span>
</code></pre>
<pre class="highlight javascript"><code><span class="nx">see</span> <span class="nx">the</span> <span class="nx">RESTful</span> <span class="nx">column</span>
</code></pre>
<pre class="highlight python"><code><span class="n">see</span> <span class="n">the</span> <span class="n">RESTful</span> <span class="n">column</span>
</code></pre>
<pre class="highlight shell"><code>see the RESTful column
</code></pre>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"nonce"</span><span class="p">:</span><span class="s2">"my nonce"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"version"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nt">"function"</span><span class="p">:</span><span class="w"> </span><span class="s2">"updatedomain"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"environment"</span><span class="p">:</span><span class="s2">"dev"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"apidata"</span><span class="p">:{</span><span class="w">
        </span><span class="nt">"username"</span><span class="p">:</span><span class="s2">"dc5c2081-2a13-4566-ac8d-592ee955dc48"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"apikey"</span><span class="p">:</span><span class="s2">"0b75f...............d057593b"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"dnsdata"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
                        </span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"txt"</span><span class="p">,</span><span class="w">
                        </span><span class="nt">"domain"</span><span class="p">:</span><span class="s2">"walsall1.pki.enigmabridge.com"</span><span class="p">,</span><span class="w"> 
                        </span><span class="nt">"name"</span><span class="p">:</span><span class="s2">"_acme-challenge"</span><span class="p">,</span><span class="w"> 
                        </span><span class="nt">"value"</span><span class="p">:</span><span class="s2">"random string"</span><span class="p">}</span><span class="w">
                   </span><span class="p">],</span><span class="w">
        </span><span class="nt">"authentication"</span><span class="p">:</span><span class="s2">"signature"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"response"</span><span class="p">:</span><span class="s2">"value derived from previously requested challenge"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"signature"</span><span class="p">:{</span><span class="w">
        </span><span class="nt">"payload"</span><span class="p">:</span><span class="s2">"apidata-base64"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"value"</span><span class="p">:</span><span class="s2">"string-base64-signature"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>The request uses the following URL:</p>

<p><code class="prettyprint">https://hut:8445/api/v1/apikey</code></p>

<table><thead>
<tr>
<th>name</th>
<th>optional</th>
<th>type</th>
<th>note</th>
</tr>
</thead><tbody>
<tr>
<td>apidata</td>
<td>YES</td>
<td>string</td>
<td>not needed if signature is present</td>
</tr>
<tr>
<td>signature</td>
<td>YES</td>
<td>string</td>
<td>only if method is &ldquo;signature&rdquo;;</td>
</tr>
</tbody></table>

<h3 id="structure-of-39-apidata-39">Structure of &#39;apidata&rsquo;</h3>

<table><thead>
<tr>
<th>name</th>
<th>optional</th>
<th>type</th>
<th>note</th>
</tr>
</thead><tbody>
<tr>
<td>username</td>
<td>NO</td>
<td>string</td>
<td>as assigned</td>
</tr>
<tr>
<td>apikey</td>
<td>NO</td>
<td>string</td>
<td>as assigned</td>
</tr>
<tr>
<td>dnsdata</td>
<td>YES</td>
<td>array</td>
<td>an array of new DNS records that will be added to the domain, each record is defined by name, type, and value</td>
</tr>
<tr>
<td>authentication</td>
<td>NO</td>
<td>string</td>
<td>as requested with a challenge</td>
</tr>
<tr>
<td>response</td>
<td>NO</td>
<td>string</td>
<td>either the challenge itself or a derived value (e.g., OCRA)</td>
</tr>
</tbody></table>

<h3 id="structure-of-39-dnsdata-39">Structure of &#39;dnsdata&rsquo;</h3>

<table><thead>
<tr>
<th>name</th>
<th>optional</th>
<th>type</th>
<th>note</th>
</tr>
</thead><tbody>
<tr>
<td>type</td>
<td>NO</td>
<td>string</td>
<td>type of DNS record to create, currently on &ldquo;TXT&rdquo; supported</td>
</tr>
<tr>
<td>name</td>
<td>NO</td>
<td>string</td>
<td>name of the new record</td>
</tr>
<tr>
<td>value</td>
<td>NO</td>
<td>string</td>
<td>value of the new record</td>
</tr>
<tr>
<td>domain</td>
<td>YES</td>
<td>string</td>
<td>a particular domain to be updated, if not present, all relevant domains will be udpated, if none matches -&gt; error</td>
</tr>
</tbody></table>
<pre class="highlight java"><code><span class="n">see</span> <span class="n">the</span> <span class="n">RESTful</span> <span class="n">column</span>
</code></pre>
<pre class="highlight javascript"><code><span class="nx">see</span> <span class="nx">the</span> <span class="nx">RESTful</span> <span class="nx">column</span>
</code></pre>
<pre class="highlight python"><code><span class="n">see</span> <span class="n">the</span> <span class="n">RESTful</span> <span class="n">column</span>
</code></pre>
<pre class="highlight shell"><code>see the RESTful column
</code></pre>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"version"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nt">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success (ok)"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="mi">36864</span><span class="p">,</span><span class="w">
    </span><span class="nt">"nonce"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my nonce"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1475078668177</span><span class="p">,</span><span class="w">
    </span><span class="nt">"response"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"domains"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"assigned domain name"</span><span class="p">],</span><span class="w">
        </span><span class="nt">"addresses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"registered IP addresses "</span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h2 id="install-status-api">Install Status (api)</h2>

<p>This function allows the API key announce its current status and communicate any additional context information that may be needed for support or communication requiring an independent channel for security.</p>

<aside class="notice">
<strong>api</strong> endpoint does not use client password. This password is not needed for APIkey related calls and should not be present in the client endpoint.
</aside>
<pre class="highlight java"><code><span class="n">see</span> <span class="n">the</span> <span class="n">RESTful</span> <span class="n">column</span>
</code></pre>
<pre class="highlight javascript"><code><span class="nx">see</span> <span class="nx">the</span> <span class="nx">RESTful</span> <span class="nx">column</span>
</code></pre>
<pre class="highlight python"><code><span class="n">see</span> <span class="n">the</span> <span class="n">RESTful</span> <span class="n">column</span>
</code></pre>
<pre class="highlight shell"><code>see the RESTful column
</code></pre>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"nonce"</span><span class="p">:</span><span class="s2">"my nonce"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"version"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nt">"function"</span><span class="p">:</span><span class="w"> </span><span class="s2">"installstatus"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"environment"</span><span class="p">:</span><span class="s2">"dev"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"apidata"</span><span class="p">:{</span><span class="w">
        </span><span class="nt">"username"</span><span class="p">:</span><span class="s2">"dc5c2081-2a13-4566-ac8d-592ee955dc48"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"apikey"</span><span class="p">:</span><span class="s2">"0b75f...............d057593b"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"statusdata"</span><span class="p">:{</span><span class="w">
        </span><span class="nt">"password"</span><span class="p">:</span><span class="s2">"very secret password"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"status"</span><span class="p">:</span><span class="mi">36864</span><span class="p">,</span><span class="w">
        </span><span class="nt">"error"</span><span class="p">:</span><span class="s2">"success (ok)"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"duration"</span><span class="p">:</span><span class="mi">1800</span><span class="p">,</span><span class="w">
        </span><span class="nt">"key"</span><span class="p">:</span><span class="s2">"base64encoded key blob"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"email"</span><span class="p">:</span><span class="s2">"important@top.world"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>The request uses the following URL:</p>

<p><code class="prettyprint">https://hut:8445/api/v1/apikey</code></p>

<p>This function will update status of the APIkey consumer/host. This information can be used for further communication with clients or contact clients. </p>

<p>The structure and particular meaning of items in &ldquo;statusdata&rdquo; depends on the client type.</p>

<table><thead>
<tr>
<th>name</th>
<th>optional</th>
<th>type</th>
<th>note</th>
</tr>
</thead><tbody>
<tr>
<td>username</td>
<td>NO</td>
<td>string</td>
<td>as assigned</td>
</tr>
<tr>
<td>apikey</td>
<td>NO</td>
<td>string</td>
<td>as assigned</td>
</tr>
</tbody></table>

<h3 id="structure-of-39-statusdata-39">Structure of &#39;statusdata&rsquo;</h3>

<table><thead>
<tr>
<th>name</th>
<th>optional</th>
<th>type</th>
<th>note</th>
</tr>
</thead><tbody>
<tr>
<td>password</td>
<td>YES</td>
<td>string</td>
<td>generated on the apikey host</td>
</tr>
<tr>
<td>status</td>
<td>NO</td>
<td>integer</td>
<td>status code</td>
</tr>
<tr>
<td>error</td>
<td>NO</td>
<td>string</td>
<td>provided by the apikey</td>
</tr>
<tr>
<td>duration</td>
<td>YES</td>
<td>integer</td>
<td>duration of an operation in seconds</td>
</tr>
<tr>
<td>key</td>
<td>YES</td>
<td>string</td>
<td>any key that we need to pass on</td>
</tr>
<tr>
<td>email</td>
<td>YES</td>
<td>email</td>
<td>contact details of whoever will be contacted</td>
</tr>
</tbody></table>

<h2 id="unlock-domain-api">Unlock Domain (api)</h2>

<aside class="notice">
<strong>api</strong> endpoint does not use client password. This password is not needed for APIkey related calls and should not be present in the client endpoint.
</aside>
<pre class="highlight java"><code><span class="n">see</span> <span class="n">the</span> <span class="n">RESTful</span> <span class="n">column</span>
</code></pre>
<pre class="highlight javascript"><code><span class="nx">see</span> <span class="nx">the</span> <span class="nx">RESTful</span> <span class="nx">column</span>
</code></pre>
<pre class="highlight python"><code><span class="n">see</span> <span class="n">the</span> <span class="n">RESTful</span> <span class="n">column</span>
</code></pre>
<pre class="highlight shell"><code>see the RESTful column
</code></pre>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"nonce"</span><span class="p">:</span><span class="s2">"my nonce"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"version"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nt">"function"</span><span class="p">:</span><span class="w"> </span><span class="s2">"unlockdomain"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"environment"</span><span class="p">:</span><span class="s2">"dev"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"apidata"</span><span class="p">:{</span><span class="w">
        </span><span class="nt">"username"</span><span class="p">:</span><span class="s2">"dc5c2081-2a13-4566-ac8d-592ee955dc48"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"apikey"</span><span class="p">:</span><span class="s2">"0b75f...............d057593b"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>The request uses the following URL:</p>

<p><code class="prettyprint">https://hut:8445/api/v1/apikey</code></p>

<p>This function will &ldquo;unlock&rdquo; the domain record for the given API key so it can be
assigned to a new IP address.</p>

<table><thead>
<tr>
<th>name</th>
<th>optional</th>
<th>type</th>
<th>note</th>
</tr>
</thead><tbody>
<tr>
<td>apidata</td>
<td>NO</td>
<td>string</td>
<td>authentication of the client</td>
</tr>
</tbody></table>

<h3 id="structure-of-39-apidata-39">Structure of &#39;apidata&rsquo;</h3>

<table><thead>
<tr>
<th>name</th>
<th>optional</th>
<th>type</th>
<th>note</th>
</tr>
</thead><tbody>
<tr>
<td>username</td>
<td>NO</td>
<td>string</td>
<td>as assigned</td>
</tr>
<tr>
<td>apikey</td>
<td>NO</td>
<td>string</td>
<td>as assigned</td>
</tr>
</tbody></table>
<pre class="highlight java"><code><span class="n">see</span> <span class="n">the</span> <span class="n">RESTful</span> <span class="n">column</span>
</code></pre>
<pre class="highlight javascript"><code><span class="nx">see</span> <span class="nx">the</span> <span class="nx">RESTful</span> <span class="nx">column</span>
</code></pre>
<pre class="highlight python"><code><span class="n">see</span> <span class="n">the</span> <span class="n">RESTful</span> <span class="n">column</span>
</code></pre>
<pre class="highlight shell"><code>see the RESTful column
</code></pre>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"version"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nt">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success (ok)"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="mi">36864</span><span class="p">,</span><span class="w">
    </span><span class="nt">"nonce"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my nonce"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1475078668177</span><span class="p">,</span><span class="w">
    </span><span class="nt">"response"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"status of the domain in EB backend"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

          <h1 id="user-manager-enrolment-private-api">User Manager - Enrolment (Private API)</h1>

<h2 id="api-endpoint">API Endpoint</h2>

<h3 id="disable-enrolment-object">Disable Enrolment Object</h3>

<h3 id="enable-enrolment-object">Enable Enrolment Object</h3>

<h3 id="remove-enrolment-object">Remove Enrolment Object</h3>

<h2 id="client-endpoint">Client Endpoint</h2>

<h3 id="disable-api-key">Disable API Key</h3>

<h3 id="enable-api-key">Enable API Key</h3>

<h3 id="remove-api-key">Remove API Key</h3>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="json">RESTful</a>
                <a href="#" data-language-name="java">Java</a>
                <a href="#" data-language-name="javascript">Javascript</a>
                <a href="#" data-language-name="python">Python</a>
                <a href="#" data-language-name="shell">cURL</a>
          </div>
      </div>
    </div>
  </body>
</html>
