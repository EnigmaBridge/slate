<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Enigma Bridge API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #f8f8f2;
  background-color: #272822;
}
.highlight .err {
  color: #151515;
  background-color: #ac4142;
}
.highlight .c, .highlight .cd, .highlight .cm, .highlight .c1, .highlight .cs {
  color: #505050;
}
.highlight .cp {
  color: #f4bf75;
}
.highlight .nt {
  color: #f4bf75;
}
.highlight .o, .highlight .ow {
  color: #d0d0d0;
}
.highlight .p, .highlight .pi {
  color: #d0d0d0;
}
.highlight .gi {
  color: #90a959;
}
.highlight .gd {
  color: #ac4142;
}
.highlight .gh {
  color: #6a9fb5;
  background-color: #151515;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #aa759f;
}
.highlight .kc {
  color: #d28445;
}
.highlight .kt {
  color: #d28445;
}
.highlight .kd {
  color: #d28445;
}
.highlight .s, .highlight .sb, .highlight .sc, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #90a959;
}
.highlight .sr {
  color: #75b5aa;
}
.highlight .si {
  color: #8f5536;
}
.highlight .se {
  color: #8f5536;
}
.highlight .nn {
  color: #f4bf75;
}
.highlight .nc {
  color: #f4bf75;
}
.highlight .no {
  color: #f4bf75;
}
.highlight .na {
  color: #6a9fb5;
}
.highlight .m, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mb, .highlight .mx {
  color: #90a959;
}
.highlight .ss {
  color: #90a959;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;java&quot;,&quot;javascript&quot;,&quot;python&quot;,&quot;json&quot;,&quot;shell&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img src="images/logo.png" />
        <div class="lang-selector">
              <a href="#" data-language-name="java">Java</a>
              <a href="#" data-language-name="javascript">Javascript</a>
              <a href="#" data-language-name="python">Python</a>
              <a href="#" data-language-name="json">RESTful</a>
              <a href="#" data-language-name="shell">cURL</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href='https://enigmabridge.freshdesk.com'>Ask a question, raise a support ticket</a></li>
            <li><a href='https://enigmabridge.com'>Visit our main website</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id="introduction">Introduction</h1>

<p>Welcome to Enigma Bridge API documentation! Enigma Bridge provides managed hardware encryption. The hardware security ensures that your secrets can&rsquo;t be extracted using any physical attacks. This protection is validated according to the FIPS 140-2 standard on <strong>Level 3</strong>. The <strong>Level 3</strong> means that the hardware device will erase secrets it stores when it detects an attack. </p>

<p>Side-channel, and logical attacks are also significantly limited. Assurance of this protection is provided by Common Criteria certifications on EAL5 (<a href="https://en.wikipedia.org/wiki/Evaluation_Assurance_Level#EAL5:_Semiformally_Designed_and_Tested">EAL5 explained on Wikipedia</a>).</p>

<p>You can use our API to access Enigma Bridge encryption service directly or transparently via production integrations. The set of operations available via the API includes:</p>

<ul>
<li><strong>authentication</strong> - create user context, verify passwords and one-time passwords, reset passwords;</li>
<li><strong>payment systems</strong> - re-encryption between transport and database keys, tokenization;</li>
<li><strong>key management</strong> - generate, unwrap, manage keys; </li>
<li><strong>random data generation</strong> - using FIPS140-2 certified generators;</li>
<li><strong>encryption</strong> - just encrypt, MAC, sign, &hellip;; or</li>
<li><strong>re-encryption</strong> - atomic re-encryption from asymetric to symetric algorithms.</li>
</ul>

<p>The native API is REST web-service. We also provide language bindings for simple integration. We currently support Javascript (client and node.js), Python and Java. This site provides description of API functions, including code examples in the dark area to the right. Tabs in the top right allow  switching between the programming language of the examples.</p>

<h1 id="basics">Basics</h1>

<p>Use of Enigma Bridge consists of four phases:</p>

<ol>
<li><strong>user enrolment</strong> - creating user account;</li>
<li><strong>API key creation</strong> - obtaining API key with authorizations and also networkconnection details to a suitable Enigma Bridge instance;</li>
<li><strong>operation enrolment</strong> - introduction of a new use request into Enigma Bridge; and</li>
<li><strong>data processing</strong> - operational use.</li>
</ol>

<p>Depending on the use case and limits on usage, all steps can be completed fully automatically within seconds. If a particular use case requires more strict control, step 1 will require manual approval.</p>

<p>Each of the steps can be represented by a single API command regardless of the operation you request. The result of the enrolment is a configuration string that uniquely identifies a new user object.</p>

<h1 id="getting-started">Getting Started</h1>

<p>We provide several language bindings. </p>
<pre class="highlight python"><code><span class="s">"sudo pip install ebclient.py"</span>
</code></pre>
<pre class="highlight javascript"><code><span class="s2">"npm install -g ebclient.js"</span>
<span class="nx">or</span>
<span class="s2">"git clone https://github.com/EnigmaBridge/client.js"</span>
</code></pre>
<pre class="highlight shell"><code><span class="s2">"nothing required"</span>
</code></pre>
<pre class="highlight java"><code><span class="s">"git clone https://github.com/EnigmaBridge/client.java"</span>
</code></pre>
<pre class="highlight json"><code><span class="s2">"nothing required"</span><span class="w">
</span></code></pre>

<p>Our goal is to make any library installation as simple as possible, and using standard deployment mechanisms wherever possible. </p>

<h1 id="register-as-enigma-client">Register as Enigma Client</h1>

<p>The first step for using the EB service is to create a client account. The client account forms the basis for your authorization towards Enigma Bridge. Once you obtain an account, you will learn your authentication details you can use to obtain API keys.</p>
<pre class="highlight java"><code><span class="s">"coming soon"</span>
</code></pre>
<pre class="highlight json"><code><span class="s2">"coming soon"</span><span class="w">
</span></code></pre>
<pre class="highlight shell"><code>curl -i <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"X-Auth-Token: public"</span> <span class="se">\</span>
  -X POST
  -d <span class="s1">'{
         "nonce":"arbitrary string that will be included in the response",
         "version":1,
         "function":"create",
         "environment":"dev",
         "client":{
             "name":"name of the client - it should be unique",
             "authentication":"type",
             "type":"pre-defined type of clients",
             "token":"initial type authentication token"
         }
    }'</span><span class="se">\</span>
  https://hut3.enigmabridge.com/api/v1/client
</code></pre>
<pre class="highlight javascript"><code><span class="nx">cfg</span> <span class="o">=</span> <span class="nx">Configuration</span><span class="p">()</span>
<span class="nx">cfg</span><span class="p">.</span><span class="nx">endpoint_register</span> <span class="o">=</span> <span class="nx">Endpoint</span><span class="p">.</span><span class="nx">url</span><span class="p">(</span><span class="s1">'https://hut3.enigmabridge.com:8445'</span><span class="p">)</span>
<span class="nx">cfg</span><span class="p">.</span><span class="nx">retry</span> <span class="o">=</span> <span class="nx">SimpleRetry</span><span class="p">()</span>

<span class="nx">client_data_reg</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">'name'</span><span class="p">:</span> <span class="s1">'name of the client - it should be unique'</span><span class="p">,</span>
    <span class="s1">'authentication'</span><span class="p">:</span> <span class="s1">'type'</span><span class="p">,</span>
    <span class="s1">'type'</span><span class="p">:</span> <span class="s1">'pre-defined type of clients'</span><span class="p">,</span>
    <span class="s1">'token'</span><span class="p">:</span> <span class="s1">'initial type authentication token'</span>
<span class="p">}</span>
<span class="nx">regreq</span> <span class="o">=</span> <span class="nx">RegistrationRequest</span><span class="p">(</span><span class="nx">client_data</span><span class="o">=</span><span class="nx">client_data_reg</span><span class="p">,</span> <span class="nx">env</span><span class="o">=</span><span class="nx">ENVIRONMENT_DEVELOPMENT</span><span class="p">,</span> <span class="nx">config</span><span class="o">=</span><span class="nx">cfg</span><span class="p">)</span>
<span class="nx">regresponse</span> <span class="o">=</span> <span class="nx">regreq</span><span class="p">.</span><span class="nx">call</span><span class="p">()</span>
<span class="nx">print</span><span class="p">(</span><span class="nx">regresponse</span><span class="p">)</span>
</code></pre>
<pre class="highlight python"><code><span class="s">"coming soon"</span>
</code></pre>

<p>We have created three end-points for client registration. We named them in memory of wartime sections of the Government Code and Cypher School (GC&amp;CS) at <a href="https://en.wikipedia.org/wiki/Bletchley_Park">Bletchley Park</a></p>

<ul>
<li><strong>hut3.enigmabridge.com</strong> - Hut 3 translated, interpretated and distributed German Army (Heer) and Air Force (Luftwaffe) messages deciphered by Hut 6.</li>
<li><strong>hut6.enigmabridge.com</strong> - Hut 6&rsquo;s task was to break German Army and Air Force <a href="https://en.wikipedia.org/wiki/Enigma_machine">Enigma machine</a> cyphers.</li>
<li><strong>hut8.enigmabridge.com</strong> - Hut 8 was solving German naval (Kriegsmarine) Enigma messages. The section was led initially by Alan Turing.</li>
</ul>

<p>Automated registration requires knowledge of your use-case. In certain cases, we pre-define types of clients for automated deployments. For example, <a href="https://en.wikipedia.org/wiki/Amazon_Machine_Image">AMI</a> available from <a href="https://aws.amazon.com/marketplace">Amazon AWS Marketplace</a> will be assigned such a client type. </p>

<aside class="notice">
Availability of automated execution of client registration depends on the use case and required operation.
</aside>

<aside class="notice">
In some cases, it is possible to use a default &ldquo;TEST&rdquo; user and &ldquo;TEST_API&rdquo; key - these credentials are only available for demonstration purposes.
</aside>

<h1 id="api-key-enrolment">API Key Enrolment</h1>

<blockquote>
<p>To authorize, use this code:</p>
</blockquote>
<pre class="highlight ruby"><code><span class="nb">require</span> <span class="s1">'kittn'</span>

<span class="n">api</span> <span class="o">=</span> <span class="no">Kittn</span><span class="o">::</span><span class="no">APIClient</span><span class="p">.</span><span class="nf">authorize!</span><span class="p">(</span><span class="s1">'meowmeowmeow'</span><span class="p">)</span>
</code></pre>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">kittn</span>

<span class="n">api</span> <span class="o">=</span> <span class="n">kittn</span><span class="o">.</span><span class="n">authorize</span><span class="p">(</span><span class="s">'meowmeowmeow'</span><span class="p">)</span>
</code></pre>
<pre class="highlight shell"><code><span class="c"># With shell, you can just pass the correct header with each request</span>
curl <span class="s2">"api_endpoint_here"</span>
  -H <span class="s2">"Authorization: meowmeowmeow"</span>
</code></pre>
<pre class="highlight javascript"><code><span class="kr">const</span> <span class="nx">kittn</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'kittn'</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">api</span> <span class="o">=</span> <span class="nx">kittn</span><span class="p">.</span><span class="nx">authorize</span><span class="p">(</span><span class="s1">'meowmeowmeow'</span><span class="p">);</span>
</code></pre>

<blockquote>
<p>Make sure to replace <code class="prettyprint">meowmeowmeow</code> with your API key.</p>
</blockquote>

<p>Kittn uses API keys to allow access to the API. You can register a new Kittn API key at our <a href="http://example.com/developers">developer portal</a>.</p>

<p>Kittn expects for the API key to be included in all API requests to the server in a header that looks like the following:</p>

<p><code class="prettyprint">Authorization: meowmeowmeow</code></p>

<aside class="notice">
You must replace <code>meowmeowmeow</code> with your personal API key.
</aside>

<h1 id="use">Use</h1>
<pre class="highlight json"><code><span class="s2">"coming soon"</span><span class="w">
</span></code></pre>
<pre class="highlight python"><code><span class="s">"coming soon"</span>
</code></pre>
<pre class="highlight shell"><code><span class="s2">"coming soon
</span></code></pre>
<pre class="highlight javascript"><code><span class="s2">"coming soon"</span>
</code></pre>
<pre class="highlight java"><code><span class="s">"coming soon"</span>
</code></pre>

<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json"><code><span class="s2">"coming soon"</span><span class="w">
</span></code></pre>

<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>include_cats</td>
<td>false</td>
<td>If set to true, the result will also include cats.</td>
</tr>
<tr>
<td>available</td>
<td>true</td>
<td>If set to false, the result will include kittens that have already been adopted.</td>
</tr>
</tbody></table>

<aside class="success">
Remember — a happy kitten is an authenticated kitten!
</aside>

          <h1 id="errors">Errors</h1>

<aside class="notice">Each response form the Enigma Bridge service will contain a numerical code, as well as a short text with explanation of the error. 

The response code for successful processiong of a request is 36864 (0x9000).
</aside>

<p>Clients using Enigma Bridge API may encounter the following error codes:</p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>4101 (0x1005)</td>
<td>object capacity reached</td>
</tr>
<tr>
<td>4102 (0x1006)</td>
<td>timeout</td>
</tr>
<tr>
<td>4111 (0x100F)</td>
<td>service shutting down</td>
</tr>
<tr>
<td>4213 (0x1075)</td>
<td>object processing limit reached</td>
</tr>
<tr>
<td>4262 (0x10A6)</td>
<td>processing queues full</td>
</tr>
<tr>
<td>4304 (0x10D0)</td>
<td>no authorization tokens left</td>
</tr>
<tr>
<td>8364 (0x20AC)</td>
<td>integrity error / attack detected</td>
</tr>
<tr>
<td>8380 (0x20BC)</td>
<td>request not authorized</td>
</tr>
<tr>
<td>16504 (0x4078)</td>
<td>object already exists</td>
</tr>
<tr>
<td>16512 (0x4080)</td>
<td>public key not available</td>
</tr>
<tr>
<td>32769 (0x8001)</td>
<td>unknown operation</td>
</tr>
<tr>
<td>32772 (0x8004)</td>
<td>operation not available</td>
</tr>
<tr>
<td>32818 (0x8032)</td>
<td>input data length incorrect</td>
</tr>
<tr>
<td>32819 (0x8033)</td>
<td>invalid key provided</td>
</tr>
<tr>
<td>32820 (0x8034)</td>
<td>invalid handle/APIkey</td>
</tr>
<tr>
<td>32822 (0x8036)</td>
<td>missing or invalid argument</td>
</tr>
<tr>
<td>32823 (0x8037)</td>
<td>request JSON parsing failed</td>
</tr>
<tr>
<td>32824 (0x8038)</td>
<td>request JSON version not supported</td>
</tr>
<tr>
<td>32825 (0x8039)</td>
<td>request JSON data invalid</td>
</tr>
<tr>
<td>32826 (0x803A)</td>
<td>request JSON missing nonce</td>
</tr>
<tr>
<td>32827 (0x803B)</td>
<td>invalid object</td>
</tr>
<tr>
<td>32828 (0x803C)</td>
<td>unsupported operation</td>
</tr>
<tr>
<td>32829 (0x803D)</td>
<td>incorrect data padding</td>
</tr>
<tr>
<td>32830 (0x803E)</td>
<td>object format error</td>
</tr>
<tr>
<td>32833 (0x8041)</td>
<td>object format error</td>
</tr>
<tr>
<td>32835 (0x8043)</td>
<td>object format error</td>
</tr>
<tr>
<td>32839 (0x8047)</td>
<td>data is incorrect</td>
</tr>
<tr>
<td>32840 (0x8048)</td>
<td>object format error</td>
</tr>
<tr>
<td>32841 (0x8049)</td>
<td>MAC length incorrect</td>
</tr>
<tr>
<td>32842 (0x804A)</td>
<td>object format error</td>
</tr>
<tr>
<td>32844 (0x804C)</td>
<td>object format error</td>
</tr>
<tr>
<td>32846 (0x804E)</td>
<td>encrypt data padding error</td>
</tr>
<tr>
<td>32847 (0x804F)</td>
<td>encrypt data padding error</td>
</tr>
<tr>
<td>32851 (0x8053)</td>
<td>incorrect key length</td>
</tr>
<tr>
<td>32852 (0x8054)</td>
<td>data too long</td>
</tr>
<tr>
<td>32853 (0x8055)</td>
<td>malformed data</td>
</tr>
<tr>
<td>32856 (0x8058)</td>
<td>authorization cards required</td>
</tr>
<tr>
<td>32866 (0x8062)</td>
<td>invalid user context</td>
</tr>
<tr>
<td>32871 (0x8067)</td>
<td>object classification is incorrect</td>
</tr>
<tr>
<td>32872 (0x8068)</td>
<td>invalid API key</td>
</tr>
<tr>
<td>32873 (0x8069)</td>
<td>unrecognized client</td>
</tr>
<tr>
<td>32899 (0x8083)</td>
<td>invalid operation type</td>
</tr>
<tr>
<td>32909 (0x808D)</td>
<td>key component length incorrect</td>
</tr>
<tr>
<td>32910 (0x808E)</td>
<td>key component index incorrect</td>
</tr>
<tr>
<td>32911 (0x808F)</td>
<td>key component already set</td>
</tr>
<tr>
<td>32912 (0x8090)</td>
<td>key component not set</td>
</tr>
<tr>
<td>32918 (0x8096)</td>
<td>length of application key is incorrect</td>
</tr>
<tr>
<td>32919 (0x8097)</td>
<td>length of communication key is incorrect</td>
</tr>
<tr>
<td>32921 (0x8099)</td>
<td>incorrect usage flags or keys not generated</td>
</tr>
<tr>
<td>32943 (0x80AF)</td>
<td>data encryption error</td>
</tr>
<tr>
<td>32948 (0x80B4)</td>
<td>OTP code length request incorrect</td>
</tr>
<tr>
<td>32953 (0x80B9)</td>
<td>authentication method not allowed</td>
</tr>
<tr>
<td>36864 (0x9000)</td>
<td>Success</td>
</tr>
<tr>
<td>41046 (0xA056)</td>
<td>incorrect length of OTP key</td>
</tr>
<tr>
<td>41059 (0xA063)</td>
<td>too many password tries</td>
</tr>
<tr>
<td>41060 (0xA064)</td>
<td>incorrect password length</td>
</tr>
<tr>
<td>41061 (0xA065)</td>
<td>incorrect password</td>
</tr>
<tr>
<td>41062 (0xA066)</td>
<td>too many HOTP tries</td>
</tr>
<tr>
<td>41121 (0xA0A1)</td>
<td>wrong MAC on data</td>
</tr>
<tr>
<td>41136 (0xA0B0)</td>
<td>incorrect HOTP code</td>
</tr>
<tr>
<td>41137 (0xA0B1)</td>
<td>too many account tries</td>
</tr>
<tr>
<td>41138 (0xA0B2)</td>
<td>keys stored in the user object are incorrect</td>
</tr>
<tr>
<td>41139 (0xA0B3)</td>
<td>OTP counter overflow</td>
</tr>
<tr>
<td>41142 (0xA0B6)</td>
<td>incorrect user ID / malicious request</td>
</tr>
<tr>
<td>41146 (0xA0BA)</td>
<td>unknown authentication method</td>
</tr>
<tr>
<td>41170(0xA0D2)</td>
<td>no authorization credits left</td>
</tr>
<tr>
<td>61458(0xF012)</td>
<td>processor failure</td>
</tr>
<tr>
<td>61465(0xF019)</td>
<td>server not ready</td>
</tr>
<tr>
<td>61488(0xF030)</td>
<td>invalid authorization token</td>
</tr>
<tr>
<td>61489(0xF031)</td>
<td>input data too long</td>
</tr>
<tr>
<td>61493(0xF035)</td>
<td>invalid object</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="java">Java</a>
                <a href="#" data-language-name="javascript">Javascript</a>
                <a href="#" data-language-name="python">Python</a>
                <a href="#" data-language-name="json">RESTful</a>
                <a href="#" data-language-name="shell">cURL</a>
          </div>
      </div>
    </div>
  </body>
</html>
